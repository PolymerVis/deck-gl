!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return i(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){e("babel-polyfill"),void 0!==window&&(window.LumaGL=e("luma.gl"),window.DeckGL=e("deck.gl"))},{"babel-polyfill":4,"deck.gl":367,"luma.gl":428}],2:[function(e,t,r){(function(r){"use strict";function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function i(e){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function a(e){return!i(e)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(m.isFunction(e)){if(x)return e.name;var t=e.toString(),r=t.match(O);return r&&r[1]}}function u(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function c(e){if(x||!m.isFunction(e))return m.inspect(e);var t=s(e),r=t?": "+t:"";return"[Function"+r+"]"}function l(e){return u(c(e.actual),128)+" "+e.operator+" "+u(c(e.expected),128)}function f(e,t,r,n,i){throw new T.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function h(e,t){e||f(e,!0,t,"==",T.ok)}function d(e,t,r,s){if(e===t)return!0;if(i(e)&&i(t))return 0===n(e,t);if(m.isDate(e)&&m.isDate(t))return e.getTime()===t.getTime();if(m.isRegExp(e)&&m.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(a(e)&&a(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(e);return u!==-1&&u===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),v(e,t,r,s))}return r?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function v(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(m.isPrimitive(e)||m.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=p(e),o=p(t);if(i&&!o||!i&&o)return!1;if(i)return e=E.call(e),t=E.call(t),d(e,t,r);var a,s,u=A(e),c=A(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(a=u[s],!d(e[a],t[a],r,n))return!1;return!0}function _(e,t,r){d(e,t,!0)&&f(e,t,r,"notDeepStrictEqual",_)}function g(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&t.call({},e)===!0}function y(e){var t;try{e()}catch(e){t=e}return t}function b(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=y(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&f(i,r,"Missing expected exception"+n);var o="string"==typeof n,a=!e&&m.isError(i),s=!e&&i&&!r;if((a&&o&&g(i,r)||s)&&f(i,r,"Got unwanted exception"+n),e&&i&&r&&!g(i,r)||!e&&i)throw i}var m=e("util/"),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,x=function(){return"foo"===function(){}.name}(),T=t.exports=h,O=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=s(t),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},m.inherits(T.AssertionError,Error),T.fail=f,T.ok=h,T.equal=function(e,t,r){e!=t&&f(e,t,r,"==",T.equal)},T.notEqual=function(e,t,r){e==t&&f(e,t,r,"!=",T.notEqual)},T.deepEqual=function(e,t,r){d(e,t,!1)||f(e,t,r,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(e,t,r){d(e,t,!0)||f(e,t,r,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(e,t,r){d(e,t,!1)&&f(e,t,r,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=_,T.strictEqual=function(e,t,r){e!==t&&f(e,t,r,"===",T.strictEqual)},T.notStrictEqual=function(e,t,r){e===t&&f(e,t,r,"!==",T.notStrictEqual)},T.throws=function(e,t,r){b(!0,e,t,r)},T.doesNotThrow=function(e,t,r){b(!1,e,t,r)},T.ifError=function(e){if(e)throw e};var A=Object.keys||function(e){var t=[];for(var r in e)w.call(e,r)&&t.push(r);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":549}],3:[function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 1===t.length?i.apply(void 0,t):o.apply(void 0,t)}function i(e){var t=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach(function(t){if("constructor"!==t){var r=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof r.value&&Object.defineProperty(e.prototype,t,o(e,t,r))}}),e}function o(e,t,r){var n=r.value;if("function"!=typeof n)throw new Error("@autobind decorator can only be applied to methods not: "+typeof n);var i=!1;return{configurable:!0,get:function(){if(i||this===e.prototype||this.hasOwnProperty(t))return n;var r=n.bind(this);return i=!0,Object.defineProperty(this,t,{value:r,configurable:!0,writable:!0}),i=!1,r}}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,t.exports=r.default},{}],4:[function(e,t,r){(function(t){"use strict";function r(e,t,r){e[t]||Object[n](e,t,{writable:!0,configurable:!0,value:r})}if(e("core-js/shim"),e("regenerator-runtime/runtime"),e("core-js/fn/regexp/escape"),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var n="defineProperty";r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&r(Array,e,Function.call.bind([][e]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":20,"core-js/shim":313,"regenerator-runtime/runtime":540}],5:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,a,s,u=e.length;a=n(e),s=new f(3*u/4-a),i=a>0?u-4:u;var c=0;for(t=0,r=0;t<i;t+=4,r+=3)o=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===a?(o=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,s[c++]=255&o):1===a&&(o=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function s(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i="",o=[],a=16383,u=0,l=r-n;u<l;u+=a)o.push(s(e,u,u+a>l?l:u+a));return 1===n?(t=e[r-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}r.byteLength=i,r.toByteArray=o,r.fromByteArray=u;for(var c=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=h.length;d<p;++d)c[d]=h[d],l[h.charCodeAt(d)]=d;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],6:[function(e,t,r){},{}],7:[function(e,t,r){(function(t,n){function i(e){if(e<r.DEFLATE||e>r.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}var a=e("pako/lib/zlib/messages"),s=e("pako/lib/zlib/zstream"),u=e("pako/lib/zlib/deflate.js"),c=e("pako/lib/zlib/inflate.js"),l=e("pako/lib/zlib/constants");for(var f in l)r[f]=l[f];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7,i.prototype.init=function(e,t,n,i,o){switch(this.windowBits=e,this.level=t,this.memLevel=n,this.strategy=i,this.mode!==r.GZIP&&this.mode!==r.GUNZIP||(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),this.mode!==r.DEFLATERAW&&this.mode!==r.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:var a=u.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:var a=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return a!==r.Z_OK?void this._error(a):(this.write_in_progress=!1,void(this.init_done=!0))},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===r.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(e,r,n,i,o,a,s){this._writeCheck(),this.write_in_progress=!0;var u=this;return t.nextTick(function(){u.write_in_progress=!1;var t=u._write(e,r,n,i,o,a,s);u.callback(t[0],t[1]),u.pending_close&&u.close()}),this},i.prototype.writeSync=function(e,t,r,n,i,o,a){return this._writeCheck(),this._write(e,t,r,n,i,o,a)},i.prototype._write=function(e,t,i,a,s,l,f){if(this.write_in_progress=!0,e!==r.Z_NO_FLUSH&&e!==r.Z_PARTIAL_FLUSH&&e!==r.Z_SYNC_FLUSH&&e!==r.Z_FULL_FLUSH&&e!==r.Z_FINISH&&e!==r.Z_BLOCK)throw new Error("Invalid flush value");null==t&&(t=new n(0),a=0,i=0),s._set?s.set=s._set:s.set=o;var h=this.strm;switch(h.avail_in=a,h.input=t,h.next_in=i,h.avail_out=f,h.output=s,h.next_out=l,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:var d=u.deflate(h,e);break;case r.UNZIP:case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:var d=c.inflate(h,e);break;default:throw new Error("Unknown mode "+this.mode)}return d!==r.Z_STREAM_END&&d!==r.Z_OK&&this._error(d),this.write_in_progress=!1,[h.avail_in,h.avail_out]},i.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?u.deflateEnd(this.strm):c.inflateEnd(this.strm),void(this.mode=r.NONE))},i.prototype.reset=function(){switch(this.mode){case r.DEFLATE:case r.DEFLATERAW:var e=u.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:var e=c.inflateReset(this.strm)}e!==r.Z_OK&&this._error(e)},i.prototype._error=function(e){this.onerror(a[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},r.Zlib=i}).call(this,e("_process"),e("buffer").Buffer)},{_process:528,buffer:11,"pako/lib/zlib/constants":496,"pako/lib/zlib/deflate.js":498,"pako/lib/zlib/inflate.js":500,"pako/lib/zlib/messages":502,"pako/lib/zlib/zstream":504}],8:[function(e,t,r){(function(t,n){function i(e,t,r){function i(){for(var t;null!==(t=e.read());)s.push(t),u+=t.length;e.once("readable",i)}function o(t){e.removeListener("end",a),e.removeListener("readable",i),r(t)}function a(){var t=n.concat(s,u);s=[],r(null,t),e.close()}var s=[],u=0;e.on("error",o),e.on("end",a),e.end(t),i()}function o(e,t){if("string"==typeof t&&(t=new n(t)),!n.isBuffer(t))throw new TypeError("Not a string or buffer");var r=v.Z_FINISH;return e._processChunk(t,r)}function a(e){return this instanceof a?void d.call(this,e,v.DEFLATE):new a(e)}function s(e){return this instanceof s?void d.call(this,e,v.INFLATE):new s(e)}function u(e){return this instanceof u?void d.call(this,e,v.GZIP):new u(e)}function c(e){return this instanceof c?void d.call(this,e,v.GUNZIP):new c(e)}function l(e){return this instanceof l?void d.call(this,e,v.DEFLATERAW):new l(e)}function f(e){return this instanceof f?void d.call(this,e,v.INFLATERAW):new f(e)}function h(e){return this instanceof h?void d.call(this,e,v.UNZIP):new h(e)}function d(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||r.Z_DEFAULT_CHUNK,p.call(this,e),e.flush&&e.flush!==v.Z_NO_FLUSH&&e.flush!==v.Z_PARTIAL_FLUSH&&e.flush!==v.Z_SYNC_FLUSH&&e.flush!==v.Z_FULL_FLUSH&&e.flush!==v.Z_FINISH&&e.flush!==v.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||v.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<r.Z_MIN_CHUNK||e.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<r.Z_MIN_WINDOWBITS||e.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<r.Z_MIN_LEVEL||e.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<r.Z_MIN_MEMLEVEL||e.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=r.Z_FILTERED&&e.strategy!=r.Z_HUFFMAN_ONLY&&e.strategy!=r.Z_RLE&&e.strategy!=r.Z_FIXED&&e.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!n.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new v.Zlib(t);var i=this;this._hadError=!1,this._binding.onerror=function(e,t){i._binding=null,i._hadError=!0;var n=new Error(e);n.errno=t,n.code=r.codes[t],i.emit("error",n)};var o=r.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var a=r.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(a=e.strategy),this._binding.init(e.windowBits||r.Z_DEFAULT_WINDOWBITS,o,e.memLevel||r.Z_DEFAULT_MEMLEVEL,a,e.dictionary),this._buffer=new n(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=a,this.once("end",this.close)}var p=e("_stream_transform"),v=e("./binding"),_=e("util"),g=e("assert").ok;v.Z_MIN_WINDOWBITS=8,v.Z_MAX_WINDOWBITS=15,v.Z_DEFAULT_WINDOWBITS=15,v.Z_MIN_CHUNK=64,v.Z_MAX_CHUNK=1/0,v.Z_DEFAULT_CHUNK=16384,v.Z_MIN_MEMLEVEL=1,v.Z_MAX_MEMLEVEL=9,v.Z_DEFAULT_MEMLEVEL=8,v.Z_MIN_LEVEL=-1,v.Z_MAX_LEVEL=9,v.Z_DEFAULT_LEVEL=v.Z_DEFAULT_COMPRESSION,Object.keys(v).forEach(function(e){e.match(/^Z/)&&(r[e]=v[e])}),r.codes={Z_OK:v.Z_OK,Z_STREAM_END:v.Z_STREAM_END,Z_NEED_DICT:v.Z_NEED_DICT,Z_ERRNO:v.Z_ERRNO,Z_STREAM_ERROR:v.Z_STREAM_ERROR,Z_DATA_ERROR:v.Z_DATA_ERROR,Z_MEM_ERROR:v.Z_MEM_ERROR,Z_BUF_ERROR:v.Z_BUF_ERROR,Z_VERSION_ERROR:v.Z_VERSION_ERROR},Object.keys(r.codes).forEach(function(e){r.codes[r.codes[e]]=e}),r.Deflate=a,r.Inflate=s,r.Gzip=u,r.Gunzip=c,r.DeflateRaw=l,r.InflateRaw=f,r.Unzip=h,r.createDeflate=function(e){return new a(e)},r.createInflate=function(e){return new s(e)},r.createDeflateRaw=function(e){return new l(e)},r.createInflateRaw=function(e){return new f(e)},r.createGzip=function(e){return new u(e)},r.createGunzip=function(e){return new c(e)},r.createUnzip=function(e){return new h(e)},r.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),i(new a(t),e,r)},r.deflateSync=function(e,t){return o(new a(t),e)},r.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),i(new u(t),e,r)},r.gzipSync=function(e,t){return o(new u(t),e)},r.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),i(new l(t),e,r)},r.deflateRawSync=function(e,t){return o(new l(t),e)},r.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),i(new h(t),e,r)},r.unzipSync=function(e,t){return o(new h(t),e)},r.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),i(new s(t),e,r)},r.inflateSync=function(e,t){return o(new s(t),e)},r.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),i(new c(t),e,r)},r.gunzipSync=function(e,t){return o(new c(t),e)},r.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),i(new f(t),e,r)},r.inflateRawSync=function(e,t){return o(new f(t),e)},_.inherits(d,p),d.prototype.params=function(e,n,i){if(e<r.Z_MIN_LEVEL||e>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=r.Z_FILTERED&&n!=r.Z_HUFFMAN_ONLY&&n!=r.Z_RLE&&n!=r.Z_FIXED&&n!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var o=this;this.flush(v.Z_SYNC_FLUSH,function(){o._binding.params(e,n),o._hadError||(o._level=e,o._strategy=n,i&&i())})}else t.nextTick(i)},d.prototype.reset=function(){return this._binding.reset()},d.prototype._flush=function(e){this._transform(new n(0),"",e)},d.prototype.flush=function(e,r){var i=this._writableState;if(("function"==typeof e||void 0===e&&!r)&&(r=e,e=v.Z_FULL_FLUSH),i.ended)r&&t.nextTick(r);else if(i.ending)r&&this.once("end",r);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(r)})}else this._flushFlag=e,this.write(new n(0),"",r)},d.prototype.close=function(e){if(e&&t.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var r=this;t.nextTick(function(){r.emit("close")})}},d.prototype._transform=function(e,t,r){var i,o=this._writableState,a=o.ending||o.ended,s=a&&(!e||o.length===e.length);if(null===!e&&!n.isBuffer(e))return r(new Error("invalid input"));s?i=v.Z_FINISH:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||v.Z_NO_FLUSH));this._processChunk(e,i,r)},d.prototype._processChunk=function(e,t,r){function i(l,d){if(!u._hadError){var p=a-d;if(g(p>=0,"have should not go down"),p>0){var v=u._buffer.slice(u._offset,u._offset+p);u._offset+=p,c?u.push(v):(f.push(v),h+=v.length)}if((0===d||u._offset>=u._chunkSize)&&(a=u._chunkSize,u._offset=0,u._buffer=new n(u._chunkSize)),0===d){if(s+=o-l,o=l,!c)return!0;var _=u._binding.write(t,e,s,o,u._buffer,u._offset,u._chunkSize);return _.callback=i,void(_.buffer=e)}return!!c&&void r()}}var o=e&&e.length,a=this._chunkSize-this._offset,s=0,u=this,c="function"==typeof r;if(!c){var l,f=[],h=0;this.on("error",function(e){l=e});do var d=this._binding.writeSync(t,e,s,o,this._buffer,this._offset,a);while(!this._hadError&&i(d[0],d[1]));if(this._hadError)throw l;var p=n.concat(f,h);return this.close(),p}var v=this._binding.write(t,e,s,o,this._buffer,this._offset,a);v.buffer=e,v.callback=i},_.inherits(a,d),_.inherits(s,d),_.inherits(u,d),_.inherits(c,d),_.inherits(l,d),_.inherits(f,d),_.inherits(h,d)}).call(this,e("_process"),e("buffer").Buffer)},{"./binding":7,_process:528,_stream_transform:538,assert:2,buffer:11,util:549}],9:[function(e,t,r){arguments[4][6][0].apply(r,arguments)},{dup:6}],10:[function(e,t,r){(function(t){"use strict";var n=e("buffer"),i=n.Buffer,o=n.SlowBuffer,a=n.kMaxLength||2147483647;r.alloc=function(e,t,r){if("function"==typeof i.alloc)return i.alloc(e,t,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");var n=r,o=t;void 0===o&&(n=void 0,o=0);var s=new i(e);if("string"==typeof o)for(var u=new i(o,n),c=u.length,l=-1;++l<e;)s[l]=u[l%c];else s.fill(o);return s},r.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");return new i(e)},r.from=function(e,r,n){if("function"==typeof i.from&&(!t.Uint8Array||Uint8Array.from!==i.from))return i.from(e,r,n);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new i(e,r);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new i(e);"undefined"==typeof o&&(o=0);var a=n;if("undefined"==typeof a&&(a=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(a>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(e.slice(o,o+a))}if(i.isBuffer(e)){var s=new i(e.length);return e.copy(s,0,0,e.length),s}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new i(e);if("Buffer"===e.type&&Array.isArray(e.data))return new i(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},r.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=a)throw new RangeError("size is too large");return new o(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:11}],11:[function(e,t,r){(function(t){"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,r)}function s(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,r,n):"string"==typeof t?f(e,t,r):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){return u(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function l(e,t){if(u(t),e=o(e,t<0?0:0|v(t)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(t,r);e=o(e,n);var i=e.write(t,r);return i!==n&&(e=e.slice(0,i)),e}function h(e,t){var r=t.length<0?0:0|v(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=h(e,t),e}function p(e,t){if(a.isBuffer(t)){var r=0|v(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||K(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&J(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),a.alloc(+e)}function g(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return I(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<s;c++)if(o(e,c)===o(t,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*a}else l!==-1&&(c-=c-l),l=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){f=!1;break}if(f)return c}return-1}function E(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function x(e,t,r,n){return Z(V(t,e.length-r),e,r,n)}function T(e,t,r,n){return Z(Y(t),e,r,n)}function O(e,t,r,n){return T(e,t,r,n)}function A(e,t,r,n){return Z(X(t),e,r,n)}function S(e,t,r,n){return Z(q(t,e.length-r),e,r,n)}function I(e,t,r){return 0===t&&r===e.length?Q.fromByteArray(e):Q.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(a=f));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return M(n)}function M(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=ee));return r}function k(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function j(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=W(e[o]);return i}function N(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function C(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return i||U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,r,n,23,4),r+4}function G(e,t,r,n,i){return i||U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,r,n,52,8),r+8}function z(e){if(e=H(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Y(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function q(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function X(e){return Q.toByteArray(z(e))}function Z(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function K(e){return e!==e}var Q=e("base64-js"),$=e("ieee754"),J=e("isarray");r.Buffer=a,r.SlowBuffer=_,r.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:n(),r.kMaxLength=i(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,r){return s(null,e,t,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,r){return c(null,e,t,r)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length;
}return n},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):y.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,u=Math.min(o,s),c=this.slice(n,i),l=e.slice(t,r),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return E(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return T(this,e,t,r);case"latin1":case"binary":return O(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=a.prototype;else{var i=t-e;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},a.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},a.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),$.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),$.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),$.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),$.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;L(this,e,t,r,i,0)}var o=1,a=0;for(this[t]=255&e;++a<r&&(o*=256);)this[t+a]=e/o&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;L(this,e,t,r,i,0)}var o=r-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);L(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return G(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return G(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:V(new a(e,n).toString()),u=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":5,ieee754:396,isarray:400}],12:[function(e,t,r){(function(r){"use strict";function n(e,t){return this instanceof n?(i.call(this,t),null!==e&&void 0!==e||(e=String(e)),void(this._obj=e)):new n(e,t)}var i=e("readable-stream").Readable,o=e("util");t.exports=n,o.inherits(n,i),n.prototype._read=function(e){var t=this._obj;"string"==typeof t?this.push(new r(t)):r.isBuffer(t)?this.push(t):this.push(new r(JSON.stringify(t))),this.push(null)}}).call(this,e("buffer").Buffer)},{buffer:11,"readable-stream":19,util:549}],13:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],14:[function(e,t,r){(function(r){function n(e){return this instanceof n?(u.call(this,e),c.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}t.exports=n;var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},s=e("core-util-is");s.inherits=e("inherits");var u=e("./_stream_readable"),c=e("./_stream_writable");s.inherits(n,u),o(a(c.prototype),function(e){n.prototype[e]||(n.prototype[e]=c.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":16,"./_stream_writable":18,_process:528,"core-util-is":314,inherits:397}],15:[function(e,t,r){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":17,"core-util-is":314,inherits:397}],16:[function(e,t,r){(function(r){function n(t,r){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(I||(I=e("string_decoder/").StringDecoder),this.decoder=new I(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new n(e,this),this.readable=!0,void A.call(this)):new i(e)}function o(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||l(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&f(e),d(e,t);else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e>=R)e=R;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return T.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?f(e):m(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){h(e)}):h(e))}function h(e){e.emit("readable")}function d(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&_(e)}}function _(e){function t(e,t,i){var o=e.write(r);!1===o&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):w(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(O.listenerCount(e,"data")>0&&y(e))):void(n.ranOut=!0)}function g(){this._readableState.ranOut&&(this._readableState.ranOut=!1,_(this))}function y(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var i=t||!1,o=!1;e.readable=!0,e.pipe=A.prototype.pipe,e.on=e.addListener=A.prototype.on,e.on("readable",function(){o=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,o?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function b(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(a)r=n.shift();else if(!e||e>=i)r=o?n.join(""):T.concat(n,i),n.length=0;else if(e<n[0].length){var s=n[0];r=s.slice(0,e),n[0]=s.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new T(e);for(var u=0,c=0,l=n.length;c<l&&u<e;c++){var s=n[0],f=Math.min(e-u,s.length);o?r+=s.slice(0,f):s.copy(r,u,0,f),f<s.length?n[0]=s.slice(f):n.shift(),u+=f}}return r}function m(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function E(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=i;var x=e("isarray"),T=e("buffer").Buffer;i.ReadableState=n;var O=e("events").EventEmitter;O.listenerCount||(O.listenerCount=function(e,t){return e.listeners(t).length});var A=e("stream"),S=e("core-util-is");S.inherits=e("inherits");var I;S.inherits(i,A),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding,t!==r.encoding&&(e=new T(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){I||(I=e("string_decoder/").StringDecoder),this._readableState.decoder=new I(t),this._readableState.encoding=t};var R=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f(this),null;if(e=u(e,t),0===e&&t.ended)return r=null,t.length>0&&t.decoder&&(r=b(e,t),t.length-=r.length),0===t.length&&m(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(n,t)),r=e>0?b(e,t):null,null===r&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&m(this),r},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===l&&o()}function i(){e.end()}function o(){e.removeListener("close",s),e.removeListener("finish",u),e.removeListener("drain",p),e.removeListener("error",a),e.removeListener("unpipe",n),l.removeListener("end",i),l.removeListener("end",o),e._writableState&&!e._writableState.needDrain||p()}function a(t){c(),e.removeListener("error",a),0===O.listenerCount(e,"error")&&e.emit("error",t)}function s(){e.removeListener("finish",u),c()}function u(){e.removeListener("close",s),c()}function c(){l.unpipe(e)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,d=h?i:o;f.endEmitted?r.nextTick(d):l.once("end",d),e.on("unpipe",n);var p=v(l);return e.on("drain",p),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",s),e.once("finish",u),e.emit("pipe",l),f.flowing||(this.on("readable",g),f.flowing=!0,r.nextTick(function(){_(l)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",g),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",g),t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=A.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||y(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&f(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){y(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){r&&(r=!1,e.resume())},n},i._fromList=b}).call(this,e("_process"))},{_process:528,buffer:11,"core-util-is":314,events:370,inherits:397,isarray:13,stream:542,"string_decoder/":543}],17:[function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e);var t=(this._transformState=new n(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":14,"core-util-is":314,inherits:397}],18:[function(e,t,r){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=e.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(t,this),this.writable=!0,void E.call(this)):new o(t)}function a(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function s(e,t,n,i){var o=!0;if(!m.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),r.nextTick(function(){i(a)}),o=!1}return o}function u(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new m(t,r)),t}function c(e,t,r,i,o){r=u(t,r,i),m.isBuffer(r)&&(i="buffer");var a=t.objectMode?1:r.length;t.length+=a;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing?t.buffer.push(new n(r,i,o)):l(e,t,a,r,i,o),s}function l(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function f(e,t,n,i,o){n?r.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(h(n),t)f(e,n,i,t,o);else{var a=g(e,n);a||n.bufferProcessing||!n.buffer.length||_(e,n),i?r.nextTick(function(){p(e,n,a,o)}):p(e,n,a,o)}}function p(e,t,r,n){r||v(e,t),n(),r&&y(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,a=n.callback,s=t.objectMode?1:i.length;if(l(e,t,s,i,o,a),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function g(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var r=g(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function b(e,t,n){t.ending=!0,y(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=o;var m=e("buffer").Buffer;o.WritableState=i;var w=e("core-util-is");w.inherits=e("inherits");var E=e("stream");w.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),m.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?a(this,n,r):s(this,n,e,r)&&(i=c(this,n,e,t,r)),i},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),n.ending||n.finished||b(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":14,_process:528,buffer:11,"core-util-is":314,inherits:397,stream:542}],19:[function(e,t,r){(function(n){var i=e("stream");r=t.exports=e("./lib/_stream_readable.js"),r.Stream=i,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":14,"./lib/_stream_passthrough.js":15,"./lib/_stream_readable.js":16,"./lib/_stream_transform.js":17,"./lib/_stream_writable.js":18,_process:528,stream:542}],20:[function(e,t,r){e("../../modules/core.regexp.escape"),t.exports=e("../../modules/_core").RegExp.escape},{"../../modules/_core":41,"../../modules/core.regexp.escape":137}],21:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],22:[function(e,t,r){var n=e("./_cof");t.exports=function(e,t){if("number"!=typeof e&&"Number"!=n(e))throw TypeError(t);return+e}},{"./_cof":36}],23:[function(e,t,r){var n=e("./_wks")("unscopables"),i=Array.prototype;void 0==i[n]&&e("./_hide")(i,n,{}),t.exports=function(e){i[n][e]=!0}},{"./_hide":58,"./_wks":135}],24:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],25:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":67}],26:[function(e,t,r){"use strict";var n=e("./_to-object"),i=e("./_to-index"),o=e("./_to-length");t.exports=[].copyWithin||function(e,t){var r=n(this),a=o(r.length),s=i(e,a),u=i(t,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in r?r[s]=r[u]:delete r[s],s+=f,u+=f;return r}},{"./_to-index":123,"./_to-length":126,"./_to-object":127}],27:[function(e,t,r){"use strict";var n=e("./_to-object"),i=e("./_to-index"),o=e("./_to-length");t.exports=function(e){for(var t=n(this),r=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,c=void 0===u?r:i(u,r);c>s;)t[s++]=e;return t}},{"./_to-index":123,"./_to-length":126,"./_to-object":127}],28:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":55}],29:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_to-length"),o=e("./_to-index");t.exports=function(e){return function(t,r,a){var s,u=n(t),c=i(u.length),l=o(a,c);if(e&&r!=r){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},{"./_to-index":123,"./_to-iobject":125,"./_to-length":126}],30:[function(e,t,r){var n=e("./_ctx"),i=e("./_iobject"),o=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,d=t||s;return function(t,s,p){for(var v,_,g=o(t),y=i(g),b=n(s,p,3),m=a(y.length),w=0,E=r?d(t,m):u?d(t,0):void 0;m>w;w++)if((h||w in y)&&(v=y[w],_=b(v,w,g),e))if(r)E[w]=_;else if(_)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:E.push(v)}else if(l)return!1;return f?-1:c||l?l:E}}},{"./_array-species-create":33,"./_ctx":43,"./_iobject":63,"./_to-length":126,"./_to-object":127}],31:[function(e,t,r){var n=e("./_a-function"),i=e("./_to-object"),o=e("./_iobject"),a=e("./_to-length");t.exports=function(e,t,r,s,u){n(t);var c=i(e),l=o(c),f=a(c.length),h=u?f-1:0,d=u?-1:1;if(r<2)for(;;){if(h in l){s=l[h],h+=d;break}if(h+=d,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=d)h in l&&(s=t(s,l[h],h,c));return s}},{"./_a-function":21,"./_iobject":63,"./_to-length":126,"./_to-object":127}],32:[function(e,t,r){var n=e("./_is-object"),i=e("./_is-array"),o=e("./_wks")("species");t.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},{"./_is-array":65,"./_is-object":67,"./_wks":135}],33:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":32}],34:[function(e,t,r){"use strict";var n=e("./_a-function"),i=e("./_is-object"),o=e("./_invoke"),a=[].slice,s={},u=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};t.exports=Function.bind||function(e){var t=n(this),r=a.call(arguments,1),s=function(){var n=r.concat(a.call(arguments));return this instanceof s?u(t,n.length,n):o(t,n,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},{"./_a-function":21,"./_invoke":62,"./_is-object":67}],35:[function(e,t,r){var n=e("./_cof"),i=e("./_wks")("toStringTag"),o="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":36,"./_wks":135}],36:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],37:[function(e,t,r){"use strict";var n=e("./_object-dp").f,i=e("./_object-create"),o=e("./_redefine-all"),a=e("./_ctx"),s=e("./_an-instance"),u=e("./_defined"),c=e("./_for-of"),l=e("./_iter-define"),f=e("./_iter-step"),h=e("./_set-species"),d=e("./_descriptors"),p=e("./_meta").fastKey,v=d?"_s":"size",_=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,l){var f=e(function(e,n){s(e,f,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=n&&c(n,r,e[l],e)});return o(f.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=this,r=_(t,e);if(r){var n=r.n,i=r.p;delete t._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),t._f==r&&(t._f=n),t._l==r&&(t._l=i),t[v]--}return!!r},forEach:function(e){s(this,f,"forEach");for(var t,r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!_(this,e)}}),d&&n(f.prototype,"size",{get:function(){return u(this[v])}}),f},def:function(e,t,r){var n,i,o=_(e,t);return o?o.v=r:(e._l=o={i:i=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:_,setStrong:function(e,t,r){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?f(0,r.k):"values"==t?f(0,r.v):f(0,[r.k,r.v]):(e._t=void 0,
f(1))},r?"entries":"values",!r,!0),h(t)}}},{"./_an-instance":24,"./_ctx":43,"./_defined":45,"./_descriptors":46,"./_for-of":55,"./_iter-define":71,"./_iter-step":73,"./_meta":80,"./_object-create":84,"./_object-dp":85,"./_redefine-all":104,"./_set-species":109}],38:[function(e,t,r){var n=e("./_classof"),i=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":28,"./_classof":35}],39:[function(e,t,r){"use strict";var n=e("./_redefine-all"),i=e("./_meta").getWeak,o=e("./_an-object"),a=e("./_is-object"),s=e("./_an-instance"),u=e("./_for-of"),c=e("./_array-methods"),l=e("./_has"),f=c(5),h=c(6),d=0,p=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},_=function(e,t){return f(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=_(this,e);if(t)return t[1]},has:function(e){return!!_(this,e)},set:function(e,t){var r=_(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,o){var c=e(function(e,n){s(e,c,t,"_i"),e._i=d++,e._l=void 0,void 0!=n&&u(n,r,e[o],e)});return n(c.prototype,{delete:function(e){if(!a(e))return!1;var t=i(e);return t===!0?p(this).delete(e):t&&l(t,this._i)&&delete t[this._i]},has:function(e){if(!a(e))return!1;var t=i(e);return t===!0?p(this).has(e):t&&l(t,this._i)}}),c},def:function(e,t,r){var n=i(o(t),!0);return n===!0?p(e).set(t,r):n[e._i]=r,e},ufstore:p}},{"./_an-instance":24,"./_an-object":25,"./_array-methods":30,"./_for-of":55,"./_has":57,"./_is-object":67,"./_meta":80,"./_redefine-all":104}],40:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_export"),o=e("./_redefine"),a=e("./_redefine-all"),s=e("./_meta"),u=e("./_for-of"),c=e("./_an-instance"),l=e("./_is-object"),f=e("./_fails"),h=e("./_iter-detect"),d=e("./_set-to-string-tag"),p=e("./_inherit-if-required");t.exports=function(e,t,r,v,_,g){var y=n[e],b=y,m=_?"set":"add",w=b&&b.prototype,E={},x=function(e){var t=w[e];o(w,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof b&&(g||w.forEach&&!f(function(){(new b).entries().next()}))){var T=new b,O=T[m](g?{}:-0,1)!=T,A=f(function(){T.has(1)}),S=h(function(e){new b(e)}),I=!g&&f(function(){for(var e=new b,t=5;t--;)e[m](t,t);return!e.has(-0)});S||(b=t(function(t,r){c(t,b,e);var n=p(new y,t,b);return void 0!=r&&u(r,_,n[m],n),n}),b.prototype=w,w.constructor=b),(A||I)&&(x("delete"),x("has"),_&&x("get")),(I||O)&&x(m),g&&w.clear&&delete w.clear}else b=v.getConstructor(t,e,_,m),a(b.prototype,r),s.NEED=!0;return d(b,e),E[e]=b,i(i.G+i.W+i.F*(b!=y),E),g||v.setStrong(b,e,_),b}},{"./_an-instance":24,"./_export":50,"./_fails":52,"./_for-of":55,"./_global":56,"./_inherit-if-required":61,"./_is-object":67,"./_iter-detect":72,"./_meta":80,"./_redefine":105,"./_redefine-all":104,"./_set-to-string-tag":110}],41:[function(e,t,r){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],42:[function(e,t,r){"use strict";var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},{"./_object-dp":85,"./_property-desc":103}],43:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":21}],44:[function(e,t,r){"use strict";var n=e("./_an-object"),i=e("./_to-primitive"),o="number";t.exports=function(e){if("string"!==e&&e!==o&&"default"!==e)throw TypeError("Incorrect hint");return i(n(this),e!=o)}},{"./_an-object":25,"./_to-primitive":128}],45:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],46:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":52}],47:[function(e,t,r){var n=e("./_is-object"),i=e("./_global").document,o=n(i)&&n(i.createElement);t.exports=function(e){return o?i.createElement(e):{}}},{"./_global":56,"./_is-object":67}],48:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],49:[function(e,t,r){var n=e("./_object-keys"),i=e("./_object-gops"),o=e("./_object-pie");t.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},{"./_object-gops":91,"./_object-keys":94,"./_object-pie":95}],50:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_hide"),a=e("./_redefine"),s=e("./_ctx"),u="prototype",c=function(e,t,r){var l,f,h,d,p=e&c.F,v=e&c.G,_=e&c.S,g=e&c.P,y=e&c.B,b=v?n:_?n[t]||(n[t]={}):(n[t]||{})[u],m=v?i:i[t]||(i[t]={}),w=m[u]||(m[u]={});v&&(r=t);for(l in r)f=!p&&b&&void 0!==b[l],h=(f?b:r)[l],d=y&&f?s(h,n):g&&"function"==typeof h?s(Function.call,h):h,b&&a(b,l,h,e&c.U),m[l]!=h&&o(m,l,d),g&&w[l]!=h&&(w[l]=h)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},{"./_core":41,"./_ctx":43,"./_global":56,"./_hide":58,"./_redefine":105}],51:[function(e,t,r){var n=e("./_wks")("match");t.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},{"./_wks":135}],52:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],53:[function(e,t,r){"use strict";var n=e("./_hide"),i=e("./_redefine"),o=e("./_fails"),a=e("./_defined"),s=e("./_wks");t.exports=function(e,t,r){var u=s(e),c=r(a,u,""[e]),l=c[0],f=c[1];o(function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,l),n(RegExp.prototype,u,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},{"./_defined":45,"./_fails":52,"./_hide":58,"./_redefine":105,"./_wks":135}],54:[function(e,t,r){"use strict";var n=e("./_an-object");t.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},{"./_an-object":25}],55:[function(e,t,r){var n=e("./_ctx"),i=e("./_iter-call"),o=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={},r=t.exports=function(e,t,r,f,h){var d,p,v,_,g=h?function(){return e}:u(e),y=n(r,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=s(e.length);d>b;b++)if(_=t?y(a(p=e[b])[0],p[1]):y(e[b]),_===c||_===l)return _}else for(v=g.call(e);!(p=v.next()).done;)if(_=i(v,y,p.value,t),_===c||_===l)return _};r.BREAK=c,r.RETURN=l},{"./_an-object":25,"./_ctx":43,"./_is-array-iter":64,"./_iter-call":69,"./_to-length":126,"./core.get-iterator-method":136}],56:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],57:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],58:[function(e,t,r){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":46,"./_object-dp":85,"./_property-desc":103}],59:[function(e,t,r){t.exports=e("./_global").document&&document.documentElement},{"./_global":56}],60:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":46,"./_dom-create":47,"./_fails":52}],61:[function(e,t,r){var n=e("./_is-object"),i=e("./_set-proto").set;t.exports=function(e,t,r){var o,a=t.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(e,o),e}},{"./_is-object":67,"./_set-proto":108}],62:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],63:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":36}],64:[function(e,t,r){var n=e("./_iterators"),i=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},{"./_iterators":74,"./_wks":135}],65:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":36}],66:[function(e,t,r){var n=e("./_is-object"),i=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":67}],67:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],68:[function(e,t,r){var n=e("./_is-object"),i=e("./_cof"),o=e("./_wks")("match");t.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},{"./_cof":36,"./_is-object":67,"./_wks":135}],69:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},{"./_an-object":25}],70:[function(e,t,r){"use strict";var n=e("./_object-create"),i=e("./_property-desc"),o=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},{"./_hide":58,"./_object-create":84,"./_property-desc":103,"./_set-to-string-tag":110,"./_wks":135}],71:[function(e,t,r){"use strict";var n=e("./_library"),i=e("./_export"),o=e("./_redefine"),a=e("./_hide"),s=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),h=e("./_wks")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",_="values",g=function(){return this};t.exports=function(e,t,r,y,b,m,w){c(r,t,y);var E,x,T,O=function(e){if(!d&&e in R)return R[e];switch(e){case v:return function(){return new r(this,e)};case _:return function(){return new r(this,e)}}return function(){return new r(this,e)}},A=t+" Iterator",S=b==_,I=!1,R=e.prototype,M=R[h]||R[p]||b&&R[b],k=M||O(b),P=b?S?O("entries"):k:void 0,j="Array"==t?R.entries||M:M;if(j&&(T=f(j.call(new e)),T!==Object.prototype&&(l(T,A,!0),n||s(T,h)||a(T,h,g))),S&&M&&M.name!==_&&(I=!0,k=function(){return M.call(this)}),n&&!w||!d&&!I&&R[h]||a(R,h,k),u[t]=k,u[A]=g,b)if(E={values:S?k:O(_),keys:m?k:O(v),entries:P},w)for(x in E)x in R||o(R,x,E[x]);else i(i.P+i.F*(d||I),t,E);return E}},{"./_export":50,"./_has":57,"./_hide":58,"./_iter-create":70,"./_iterators":74,"./_library":76,"./_object-gpo":92,"./_redefine":105,"./_set-to-string-tag":110,"./_wks":135}],72:[function(e,t,r){var n=e("./_wks")("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},{"./_wks":135}],73:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],74:[function(e,t,r){t.exports={}},{}],75:[function(e,t,r){var n=e("./_object-keys"),i=e("./_to-iobject");t.exports=function(e,t){for(var r,o=i(e),a=n(o),s=a.length,u=0;s>u;)if(o[r=a[u++]]===t)return r}},{"./_object-keys":94,"./_to-iobject":125}],76:[function(e,t,r){t.exports=!1},{}],77:[function(e,t,r){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},{}],78:[function(e,t,r){t.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},{}],79:[function(e,t,r){t.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],80:[function(e,t,r){var n=e("./_uid")("meta"),i=e("./_is-object"),o=e("./_has"),a=e("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},h=function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},d=function(e){return c&&p.NEED&&u(e)&&!o(e,n)&&l(e),e},p=t.exports={KEY:n,NEED:!1,fastKey:f,getWeak:h,onFreeze:d}},{"./_fails":52,"./_has":57,"./_is-object":67,"./_object-dp":85,"./_uid":132}],81:[function(e,t,r){var n=e("./es6.map"),i=e("./_export"),o=e("./_shared")("metadata"),a=o.store||(o.store=new(e("./es6.weak-map"))),s=function(e,t,r){var i=a.get(e);if(!i){if(!r)return;a.set(e,i=new n)}var o=i.get(t);if(!o){if(!r)return;i.set(t,o=new n)}return o},u=function(e,t,r){var n=s(t,r,!1);return void 0!==n&&n.has(e)},c=function(e,t,r){var n=s(t,r,!1);return void 0===n?void 0:n.get(e)},l=function(e,t,r,n){s(r,n,!0).set(e,t)},f=function(e,t){var r=s(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},d=function(e){i(i.S,"Reflect",e)};t.exports={store:a,map:s,has:u,get:c,set:l,keys:f,key:h,exp:d}},{"./_export":50,"./_shared":112,"./es6.map":167,"./es6.weak-map":273}],82:[function(e,t,r){var n=e("./_global"),i=e("./_task").set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==e("./_cof")(a);t.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=a.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),r=function(){f.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(c)}}else r=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},{"./_cof":36,"./_global":56,"./_task":122}],83:[function(e,t,r){"use strict";var n=e("./_object-keys"),i=e("./_object-gops"),o=e("./_object-pie"),a=e("./_to-object"),s=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,d=s(arguments[c++]),p=l?n(d).concat(l(d)):n(d),v=p.length,_=0;v>_;)f.call(d,h=p[_++])&&(r[h]=d[h]);return r}:u},{"./_fails":52,"./_iobject":63,"./_object-gops":91,"./_object-keys":94,"./_object-pie":95,"./_to-object":127}],84:[function(e,t,r){var n=e("./_an-object"),i=e("./_object-dps"),o=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},u="prototype",c=function(){var t,r=e("./_dom-create")("iframe"),n=o.length,i="<",a=">";for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),c=t.F;n--;)delete c[u][o[n]];return c()};t.exports=Object.create||function(e,t){var r;return null!==e?(s[u]=n(e),r=new s,s[u]=null,r[a]=e):r=c(),void 0===t?r:i(r,t)}},{"./_an-object":25,"./_dom-create":47,"./_enum-bug-keys":48,"./_html":59,"./_object-dps":86,"./_shared-key":111}],85:[function(e,t,r){var n=e("./_an-object"),i=e("./_ie8-dom-define"),o=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":25,"./_descriptors":46,"./_ie8-dom-define":60,"./_to-primitive":128}],86:[function(e,t,r){var n=e("./_object-dp"),i=e("./_an-object"),o=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},{"./_an-object":25,"./_descriptors":46,"./_object-dp":85,"./_object-keys":94}],87:[function(e,t,r){t.exports=e("./_library")||!e("./_fails")(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete e("./_global")[t]})},{"./_fails":52,"./_global":56,"./_library":76}],88:[function(e,t,r){var n=e("./_object-pie"),i=e("./_property-desc"),o=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),u=e("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},{"./_descriptors":46,"./_has":57,"./_ie8-dom-define":60,"./_object-pie":95,"./_property-desc":103,"./_to-iobject":125,"./_to-primitive":128}],89:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};t.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(n(e))}},{"./_object-gopn":90,"./_to-iobject":125}],90:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},{"./_enum-bug-keys":48,"./_object-keys-internal":93}],91:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],92:[function(e,t,r){var n=e("./_has"),i=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":57,"./_shared-key":111,"./_to-object":127}],93:[function(e,t,r){var n=e("./_has"),i=e("./_to-iobject"),o=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=i(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~o(c,r)||c.push(r));return c}},{"./_array-includes":29,"./_has":57,"./_shared-key":111,"./_to-iobject":125}],94:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,i)}},{"./_enum-bug-keys":48,"./_object-keys-internal":93}],95:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],96:[function(e,t,r){var n=e("./_export"),i=e("./_core"),o=e("./_fails");t.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},{"./_core":41,"./_export":50,"./_fails":52}],97:[function(e,t,r){var n=e("./_object-keys"),i=e("./_to-iobject"),o=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r,a=i(t),s=n(a),u=s.length,c=0,l=[];u>c;)o.call(a,r=s[c++])&&l.push(e?[r,a[r]]:a[r]);return l}}},{"./_object-keys":94,"./_object-pie":95,"./_to-iobject":125}],98:[function(e,t,r){var n=e("./_object-gopn"),i=e("./_object-gops"),o=e("./_an-object"),a=e("./_global").Reflect;t.exports=a&&a.ownKeys||function(e){var t=n.f(o(e)),r=i.f;return r?t.concat(r(e)):t}},{"./_an-object":25,"./_global":56,"./_object-gopn":90,"./_object-gops":91}],99:[function(e,t,r){var n=e("./_global").parseFloat,i=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!==-(1/0)?function(e){var t=i(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},{"./_global":56,"./_string-trim":120,"./_string-ws":121}],100:[function(e,t,r){var n=e("./_global").parseInt,i=e("./_string-trim").trim,o=e("./_string-ws"),a=/^[\-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(e,t){var r=i(String(e),3);return n(r,t>>>0||(a.test(r)?16:10))}:n},{"./_global":56,"./_string-trim":120,"./_string-ws":121}],101:[function(e,t,r){"use strict";var n=e("./_path"),i=e("./_invoke"),o=e("./_a-function");t.exports=function(){for(var e=o(this),t=arguments.length,r=Array(t),a=0,s=n._,u=!1;t>a;)(r[a]=arguments[a++])===s&&(u=!0);return function(){var n,o=this,a=arguments.length,c=0,l=0;if(!u&&!a)return i(e,r,o);if(n=r.slice(),u)for(;t>c;c++)n[c]===s&&(n[c]=arguments[l++]);for(;a>l;)n.push(arguments[l++]);return i(e,n,o)}}},{"./_a-function":21,"./_invoke":62,"./_path":102}],102:[function(e,t,r){t.exports=e("./_global")},{"./_global":56}],103:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],104:[function(e,t,r){var n=e("./_redefine");t.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},{"./_redefine":105}],105:[function(e,t,r){var n=e("./_global"),i=e("./_hide"),o=e("./_has"),a=e("./_uid")("src"),s="toString",u=Function[s],c=(""+u).split(s);e("./_core").inspectSource=function(e){return u.call(e)},(t.exports=function(e,t,r,s){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",t)),e[t]!==r&&(u&&(o(r,a)||i(r,a,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,s,function(){return"function"==typeof this&&this[a]||u.call(this)})},{"./_core":41,"./_global":56,"./_has":57,"./_hide":58,"./_uid":132}],106:[function(e,t,r){t.exports=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}},{}],107:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],108:[function(e,t,r){var n=e("./_is-object"),i=e("./_an-object"),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return o(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:o}},{"./_an-object":25,"./_ctx":43,"./_is-object":67,"./_object-gopd":88}],109:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_object-dp"),o=e("./_descriptors"),a=e("./_wks")("species");t.exports=function(e){var t=n[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},{"./_descriptors":46,"./_global":56,"./_object-dp":85,"./_wks":135}],110:[function(e,t,r){var n=e("./_object-dp").f,i=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},{"./_has":57,"./_object-dp":85,"./_wks":135}],111:[function(e,t,r){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":112,"./_uid":132}],112:[function(e,t,r){var n=e("./_global"),i="__core-js_shared__",o=n[i]||(n[i]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./_global":56}],113:[function(e,t,r){var n=e("./_an-object"),i=e("./_a-function"),o=e("./_wks")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[o])?t:i(r)}},{"./_a-function":21,"./_an-object":25,"./_wks":135}],114:[function(e,t,r){var n=e("./_fails");t.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},{"./_fails":52}],115:[function(e,t,r){var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,r){var o,a,s=String(i(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},{"./_defined":45,"./_to-integer":124}],116:[function(e,t,r){var n=e("./_is-regexp"),i=e("./_defined");t.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},{"./_defined":45,"./_is-regexp":68}],117:[function(e,t,r){var n=e("./_export"),i=e("./_fails"),o=e("./_defined"),a=/"/g,s=function(e,t,r,n){var i=String(o(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};t.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},{"./_defined":45,"./_export":50,"./_fails":52}],118:[function(e,t,r){var n=e("./_to-length"),i=e("./_string-repeat"),o=e("./_defined");t.exports=function(e,t,r,a){var s=String(o(e)),u=s.length,c=void 0===r?" ":String(r),l=n(t);if(l<=u||""==c)return s;var f=l-u,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},{"./_defined":45,"./_string-repeat":119,"./_to-length":126}],119:[function(e,t,r){"use strict";var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){var t=String(i(this)),r="",o=n(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(r+=t);return r}},{"./_defined":45,"./_to-integer":124}],120:[function(e,t,r){var n=e("./_export"),i=e("./_defined"),o=e("./_fails"),a=e("./_string-ws"),s="["+a+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(e,t,r){var i={},s=o(function(){return!!a[e]()||u[e]()!=u}),c=i[e]=s?t(h):a[e];r&&(i[r]=c),n(n.P+n.F*s,"String",i)},h=f.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};t.exports=f},{"./_defined":45,"./_export":50,"./_fails":52,"./_string-ws":121}],121:[function(e,t,r){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],122:[function(e,t,r){var n,i,o,a=e("./_ctx"),s=e("./_invoke"),u=e("./_html"),c=e("./_dom-create"),l=e("./_global"),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=0,_={},g="onreadystatechange",y=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},b=function(e){y.call(e.data)};h&&d||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return _[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},d=function(e){delete _[e]},"process"==e("./_cof")(f)?n=function(e){f.nextTick(a(y,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,n=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):n=g in c("script")?function(e){u.appendChild(c("script"))[g]=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),t.exports={set:h,clear:d}},{"./_cof":36,"./_ctx":43,"./_dom-create":47,"./_global":56,"./_html":59,"./_invoke":62}],123:[function(e,t,r){var n=e("./_to-integer"),i=Math.max,o=Math.min;t.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},{"./_to-integer":124}],124:[function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],125:[function(e,t,r){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":45,"./_iobject":63}],126:[function(e,t,r){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"./_to-integer":124}],127:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":45}],128:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":67}],129:[function(e,t,r){"use strict";if(e("./_descriptors")){var n=e("./_library"),i=e("./_global"),o=e("./_fails"),a=e("./_export"),s=e("./_typed"),u=e("./_typed-buffer"),c=e("./_ctx"),l=e("./_an-instance"),f=e("./_property-desc"),h=e("./_hide"),d=e("./_redefine-all"),p=e("./_to-integer"),v=e("./_to-length"),_=e("./_to-index"),g=e("./_to-primitive"),y=e("./_has"),b=e("./_same-value"),m=e("./_classof"),w=e("./_is-object"),E=e("./_to-object"),x=e("./_is-array-iter"),T=e("./_object-create"),O=e("./_object-gpo"),A=e("./_object-gopn").f,S=e("./core.get-iterator-method"),I=e("./_uid"),R=e("./_wks"),M=e("./_array-methods"),k=e("./_array-includes"),P=e("./_species-constructor"),j=e("./es6.array.iterator"),N=e("./_iterators"),F=e("./_iter-detect"),L=e("./_set-species"),C=e("./_array-fill"),D=e("./_array-copy-within"),U=e("./_object-dp"),B=e("./_object-gopd"),G=U.f,z=B.f,H=i.RangeError,W=i.TypeError,V=i.Uint8Array,Y="ArrayBuffer",q="Shared"+Y,X="BYTES_PER_ELEMENT",Z="prototype",K=Array[Z],Q=u.ArrayBuffer,$=u.DataView,J=M(0),ee=M(2),te=M(3),re=M(4),ne=M(5),ie=M(6),oe=k(!0),ae=k(!1),se=j.values,ue=j.keys,ce=j.entries,le=K.lastIndexOf,fe=K.reduce,he=K.reduceRight,de=K.join,pe=K.sort,ve=K.slice,_e=K.toString,ge=K.toLocaleString,ye=R("iterator"),be=R("toStringTag"),me=I("typed_constructor"),we=I("def_constructor"),Ee=s.CONSTR,xe=s.TYPED,Te=s.VIEW,Oe="Wrong length!",Ae=M(1,function(e,t){return Pe(P(e,e[we]),t)}),Se=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Ie=!!V&&!!V[Z].set&&o(function(){new V(1).set({})}),Re=function(e,t){if(void 0===e)throw W(Oe);var r=+e,n=v(e);if(t&&!b(r,n))throw H(Oe);return n},Me=function(e,t){var r=p(e);if(r<0||r%t)throw H("Wrong offset!");return r},ke=function(e){if(w(e)&&xe in e)return e;throw W(e+" is not a typed array!")},Pe=function(e,t){if(!(w(e)&&me in e))throw W("It is not a typed array constructor!");return new e(t)},je=function(e,t){return Ne(P(e,e[we]),t)},Ne=function(e,t){for(var r=0,n=t.length,i=Pe(e,n);n>r;)i[r]=t[r++];return i},Fe=function(e,t,r){G(e,t,{get:function(){return this._d[r]}})},Le=function(e){var t,r,n,i,o,a,s=E(e),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=S(s);if(void 0!=h&&!x(h)){for(a=h.call(s),n=[],t=0;!(o=a.next()).done;t++)n.push(o.value);s=n}for(f&&u>2&&(l=c(l,arguments[2],2)),t=0,r=v(s.length),i=Pe(this,r);r>t;t++)i[t]=f?l(s[t],t):s[t];return i},Ce=function(){for(var e=0,t=arguments.length,r=Pe(this,t);t>e;)r[e]=arguments[e++];return r},De=!!V&&o(function(){ge.call(new V(1))}),Ue=function(){return ge.apply(De?ve.call(ke(this)):ke(this),arguments)},Be={copyWithin:function(e,t){return D.call(ke(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return re(ke(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return C.apply(ke(this),arguments)},filter:function(e){return je(this,ee(ke(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return ne(ke(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ie(ke(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){J(ke(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ae(ke(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return oe(ke(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return de.apply(ke(this),arguments)},lastIndexOf:function(e){return le.apply(ke(this),arguments)},map:function(e){return Ae(ke(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(ke(this),arguments)},reduceRight:function(e){return he.apply(ke(this),arguments)},reverse:function(){for(var e,t=this,r=ke(t).length,n=Math.floor(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t},some:function(e){return te(ke(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(ke(this),e)},subarray:function(e,t){var r=ke(this),n=r.length,i=_(e,n);return new(P(r,r[we]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,v((void 0===t?n:_(t,n))-i))}},Ge=function(e,t){return je(this,ve.call(ke(this),e,t))},ze=function(e){ke(this);var t=Me(arguments[1],1),r=this.length,n=E(e),i=v(n.length),o=0;if(i+t>r)throw H(Oe);for(;o<i;)this[t+o]=n[o++]},He={entries:function(){return ce.call(ke(this))},keys:function(){return ue.call(ke(this))},values:function(){return se.call(ke(this))}},We=function(e,t){return w(e)&&e[xe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t);
},Ve=function(e,t){return We(e,t=g(t,!0))?f(2,e[t]):z(e,t)},Ye=function(e,t,r){return!(We(e,t=g(t,!0))&&w(r)&&y(r,"value"))||y(r,"get")||y(r,"set")||r.configurable||y(r,"writable")&&!r.writable||y(r,"enumerable")&&!r.enumerable?G(e,t,r):(e[t]=r.value,e)};Ee||(B.f=Ve,U.f=Ye),a(a.S+a.F*!Ee,"Object",{getOwnPropertyDescriptor:Ve,defineProperty:Ye}),o(function(){_e.call({})})&&(_e=ge=function(){return de.call(this)});var qe=d({},Be);d(qe,He),h(qe,ye,He.values),d(qe,{slice:Ge,set:ze,constructor:function(){},toString:_e,toLocaleString:Ue}),Fe(qe,"buffer","b"),Fe(qe,"byteOffset","o"),Fe(qe,"byteLength","l"),Fe(qe,"length","e"),G(qe,be,{get:function(){return this[xe]}}),t.exports=function(e,t,r,u){u=!!u;var c=e+(u?"Clamped":"")+"Array",f="Uint8Array"!=c,d="get"+e,p="set"+e,_=i[c],g=_||{},y=_&&O(_),b=!_||!s.ABV,E={},x=_&&_[Z],S=function(e,r){var n=e._d;return n.v[d](r*t+n.o,Se)},I=function(e,r,n){var i=e._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[p](r*t+i.o,n,Se)},R=function(e,t){G(e,t,{get:function(){return S(this,t)},set:function(e){return I(this,t,e)},enumerable:!0})};b?(_=r(function(e,r,n,i){l(e,_,c,"_d");var o,a,s,u,f=0,d=0;if(w(r)){if(!(r instanceof Q||(u=m(r))==Y||u==q))return xe in r?Ne(_,r):Le.call(_,r);o=r,d=Me(n,t);var p=r.byteLength;if(void 0===i){if(p%t)throw H(Oe);if(a=p-d,a<0)throw H(Oe)}else if(a=v(i)*t,a+d>p)throw H(Oe);s=a/t}else s=Re(r,!0),a=s*t,o=new Q(a);for(h(e,"_d",{b:o,o:d,l:a,e:s,v:new $(o)});f<s;)R(e,f++)}),x=_[Z]=T(qe),h(x,"constructor",_)):F(function(e){new _(null),new _(e)},!0)||(_=r(function(e,r,n,i){l(e,_,c);var o;return w(r)?r instanceof Q||(o=m(r))==Y||o==q?void 0!==i?new g(r,Me(n,t),i):void 0!==n?new g(r,Me(n,t)):new g(r):xe in r?Ne(_,r):Le.call(_,r):new g(Re(r,f))}),J(y!==Function.prototype?A(g).concat(A(y)):A(g),function(e){e in _||h(_,e,g[e])}),_[Z]=x,n||(x.constructor=_));var M=x[ye],k=!!M&&("values"==M.name||void 0==M.name),P=He.values;h(_,me,!0),h(x,xe,c),h(x,Te,!0),h(x,we,_),(u?new _(1)[be]==c:be in x)||G(x,be,{get:function(){return c}}),E[c]=_,a(a.G+a.W+a.F*(_!=g),E),a(a.S,c,{BYTES_PER_ELEMENT:t,from:Le,of:Ce}),X in x||h(x,X,t),a(a.P,c,Be),L(c),a(a.P+a.F*Ie,c,{set:ze}),a(a.P+a.F*!k,c,He),a(a.P+a.F*(x.toString!=_e),c,{toString:_e}),a(a.P+a.F*o(function(){new _(1).slice()}),c,{slice:Ge}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new _([1,2]).toLocaleString()})||!o(function(){x.toLocaleString.call([1,2])})),c,{toLocaleString:Ue}),N[c]=k?M:P,n||k||h(x,ye,P)}}else t.exports=function(){}},{"./_an-instance":24,"./_array-copy-within":26,"./_array-fill":27,"./_array-includes":29,"./_array-methods":30,"./_classof":35,"./_ctx":43,"./_descriptors":46,"./_export":50,"./_fails":52,"./_global":56,"./_has":57,"./_hide":58,"./_is-array-iter":64,"./_is-object":67,"./_iter-detect":72,"./_iterators":74,"./_library":76,"./_object-create":84,"./_object-dp":85,"./_object-gopd":88,"./_object-gopn":90,"./_object-gpo":92,"./_property-desc":103,"./_redefine-all":104,"./_same-value":107,"./_set-species":109,"./_species-constructor":113,"./_to-index":123,"./_to-integer":124,"./_to-length":126,"./_to-object":127,"./_to-primitive":128,"./_typed":131,"./_typed-buffer":130,"./_uid":132,"./_wks":135,"./core.get-iterator-method":136,"./es6.array.iterator":148}],130:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_descriptors"),o=e("./_library"),a=e("./_typed"),s=e("./_hide"),u=e("./_redefine-all"),c=e("./_fails"),l=e("./_an-instance"),f=e("./_to-integer"),h=e("./_to-length"),d=e("./_object-gopn").f,p=e("./_object-dp").f,v=e("./_array-fill"),_=e("./_set-to-string-tag"),g="ArrayBuffer",y="DataView",b="prototype",m="Wrong length!",w="Wrong index!",E=n[g],x=n[y],T=n.Math,O=n.RangeError,A=n.Infinity,S=E,I=T.abs,R=T.pow,M=T.floor,k=T.log,P=T.LN2,j="buffer",N="byteLength",F="byteOffset",L=i?"_b":j,C=i?"_l":N,D=i?"_o":F,U=function(e,t,r){var n,i,o,a=Array(r),s=8*r-t-1,u=(1<<s)-1,c=u>>1,l=23===t?R(2,-24)-R(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for(e=I(e),e!=e||e===A?(i=e!=e?1:0,n=u):(n=M(k(e)/P),e*(o=R(2,-n))<1&&(n--,o*=2),e+=n+c>=1?l/o:l*R(2,1-c),e*o>=2&&(n++,o/=2),n+c>=u?(i=0,n=u):n+c>=1?(i=(e*o-1)*R(2,t),n+=c):(i=e*R(2,c-1)*R(2,t),n=0));t>=8;a[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;a[f++]=255&n,n/=256,s-=8);return a[--f]|=128*h,a},B=function(e,t,r){var n,i=8*r-t-1,o=(1<<i)-1,a=o>>1,s=i-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return n?NaN:c?-A:A;n+=R(2,t),l-=a}return(c?-1:1)*n*R(2,l-t)},G=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},z=function(e){return[255&e]},H=function(e){return[255&e,e>>8&255]},W=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},V=function(e){return U(e,52,8)},Y=function(e){return U(e,23,4)},q=function(e,t,r){p(e[b],t,{get:function(){return this[r]}})},X=function(e,t,r,n){var i=+r,o=f(i);if(i!=o||o<0||o+t>e[C])throw O(w);var a=e[L]._b,s=o+e[D],u=a.slice(s,s+t);return n?u:u.reverse()},Z=function(e,t,r,n,i,o){var a=+r,s=f(a);if(a!=s||s<0||s+t>e[C])throw O(w);for(var u=e[L]._b,c=s+e[D],l=n(+i),h=0;h<t;h++)u[c+h]=l[o?h:t-h-1]},K=function(e,t){l(e,E,g);var r=+t,n=h(r);if(r!=n)throw O(m);return n};if(a.ABV){if(!c(function(){new E})||!c(function(){new E(.5)})){E=function(e){return new S(K(this,e))};for(var Q,$=E[b]=S[b],J=d(S),ee=0;J.length>ee;)(Q=J[ee++])in E||s(E,Q,S[Q]);o||($.constructor=E)}var te=new x(new E(2)),re=x[b].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||u(x[b],{setInt8:function(e,t){re.call(this,e,t<<24>>24)},setUint8:function(e,t){re.call(this,e,t<<24>>24)}},!0)}else E=function(e){var t=K(this,e);this._b=v.call(Array(t),0),this[C]=t},x=function(e,t,r){l(this,x,y),l(e,E,y);var n=e[C],i=f(t);if(i<0||i>n)throw O("Wrong offset!");if(r=void 0===r?n-i:h(r),i+r>n)throw O(m);this[L]=e,this[D]=i,this[C]=r},i&&(q(E,N,"_l"),q(x,j,"_b"),q(x,N,"_l"),q(x,F,"_o")),u(x[b],{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return G(X(this,4,e,arguments[1]))},getUint32:function(e){return G(X(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return B(X(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return B(X(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){Z(this,1,e,z,t)},setUint8:function(e,t){Z(this,1,e,z,t)},setInt16:function(e,t){Z(this,2,e,H,t,arguments[2])},setUint16:function(e,t){Z(this,2,e,H,t,arguments[2])},setInt32:function(e,t){Z(this,4,e,W,t,arguments[2])},setUint32:function(e,t){Z(this,4,e,W,t,arguments[2])},setFloat32:function(e,t){Z(this,4,e,Y,t,arguments[2])},setFloat64:function(e,t){Z(this,8,e,V,t,arguments[2])}});_(E,g),_(x,y),s(x[b],a.VIEW,!0),r[g]=E,r[y]=x},{"./_an-instance":24,"./_array-fill":27,"./_descriptors":46,"./_fails":52,"./_global":56,"./_hide":58,"./_library":76,"./_object-dp":85,"./_object-gopn":90,"./_redefine-all":104,"./_set-to-string-tag":110,"./_to-integer":124,"./_to-length":126,"./_typed":131}],131:[function(e,t,r){for(var n,i=e("./_global"),o=e("./_hide"),a=e("./_uid"),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<h;)(n=i[d[f++]])?(o(n.prototype,s,!0),o(n.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},{"./_global":56,"./_hide":58,"./_uid":132}],132:[function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},{}],133:[function(e,t,r){var n=e("./_global"),i=e("./_core"),o=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":41,"./_global":56,"./_library":76,"./_object-dp":85,"./_wks-ext":134}],134:[function(e,t,r){r.f=e("./_wks")},{"./_wks":135}],135:[function(e,t,r){var n=e("./_shared")("wks"),i=e("./_uid"),o=e("./_global").Symbol,a="function"==typeof o,s=t.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))};s.store=n},{"./_global":56,"./_shared":112,"./_uid":132}],136:[function(e,t,r){var n=e("./_classof"),i=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},{"./_classof":35,"./_core":41,"./_iterators":74,"./_wks":135}],137:[function(e,t,r){var n=e("./_export"),i=e("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(e){return i(e)}})},{"./_export":50,"./_replacer":106}],138:[function(e,t,r){var n=e("./_export");n(n.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":23,"./_array-copy-within":26,"./_export":50}],139:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(4);n(n.P+n.F*!e("./_strict-method")([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":30,"./_export":50,"./_strict-method":114}],140:[function(e,t,r){var n=e("./_export");n(n.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":23,"./_array-fill":27,"./_export":50}],141:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(2);n(n.P+n.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":30,"./_export":50,"./_strict-method":114}],142:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),n(n.P+n.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(o)},{"./_add-to-unscopables":23,"./_array-methods":30,"./_export":50}],143:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(o)},{"./_add-to-unscopables":23,"./_array-methods":30,"./_export":50}],144:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(0),o=e("./_strict-method")([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":30,"./_export":50,"./_strict-method":114}],145:[function(e,t,r){"use strict";var n=e("./_ctx"),i=e("./_export"),o=e("./_to-object"),a=e("./_iter-call"),s=e("./_is-array-iter"),u=e("./_to-length"),c=e("./_create-property"),l=e("./core.get-iterator-method");i(i.S+i.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,h=o(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,_=void 0!==v,g=0,y=l(h);if(_&&(v=n(v,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(t=u(h.length),r=new d(t);t>g;g++)c(r,g,_?v(h[g],g):h[g]);else for(f=y.call(h),r=new d;!(i=f.next()).done;g++)c(r,g,_?a(f,v,[i.value,g],!0):i.value);return r.length=g,r}})},{"./_create-property":42,"./_ctx":43,"./_export":50,"./_is-array-iter":64,"./_iter-call":69,"./_iter-detect":72,"./_to-length":126,"./_to-object":127,"./core.get-iterator-method":136}],146:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-includes")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(a||!e("./_strict-method")(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},{"./_array-includes":29,"./_export":50,"./_strict-method":114}],147:[function(e,t,r){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":50,"./_is-array":65}],148:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),i=e("./_iter-step"),o=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":23,"./_iter-define":71,"./_iter-step":73,"./_iterators":74,"./_to-iobject":125}],149:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-iobject"),o=[].join;n(n.P+n.F*(e("./_iobject")!=Object||!e("./_strict-method")(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},{"./_export":50,"./_iobject":63,"./_strict-method":114,"./_to-iobject":125}],150:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-iobject"),o=e("./_to-integer"),a=e("./_to-length"),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!e("./_strict-method")(s)),"Array",{lastIndexOf:function(e){if(u)return s.apply(this,arguments)||0;var t=i(this),r=a(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}})},{"./_export":50,"./_strict-method":114,"./_to-integer":124,"./_to-iobject":125,"./_to-length":126}],151:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(1);n(n.P+n.F*!e("./_strict-method")([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":30,"./_export":50,"./_strict-method":114}],152:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_create-property");n(n.S+n.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},{"./_create-property":42,"./_export":50,"./_fails":52}],153:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},{"./_array-reduce":31,"./_export":50,"./_strict-method":114}],154:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-reduce");n(n.P+n.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},{"./_array-reduce":31,"./_export":50,"./_strict-method":114}],155:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_html"),o=e("./_cof"),a=e("./_to-index"),s=e("./_to-length"),u=[].slice;n(n.P+n.F*e("./_fails")(function(){i&&u.call(i)}),"Array",{slice:function(e,t){var r=s(this.length),n=o(this);if(t=void 0===t?r:t,"Array"==n)return u.call(this,e,t);for(var i=a(e,r),c=a(t,r),l=s(c-i),f=Array(l),h=0;h<l;h++)f[h]="String"==n?this.charAt(i+h):this[i+h];return f}})},{"./_cof":36,"./_export":50,"./_fails":52,"./_html":59,"./_to-index":123,"./_to-length":126}],156:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-methods")(3);n(n.P+n.F*!e("./_strict-method")([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},{"./_array-methods":30,"./_export":50,"./_strict-method":114}],157:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_a-function"),o=e("./_to-object"),a=e("./_fails"),s=[].sort,u=[1,2,3];n(n.P+n.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!e("./_strict-method")(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},{"./_a-function":21,"./_export":50,"./_fails":52,"./_strict-method":114,"./_to-object":127}],158:[function(e,t,r){e("./_set-species")("Array")},{"./_set-species":109}],159:[function(e,t,r){var n=e("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":50}],160:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_fails"),o=Date.prototype.getTime,a=function(e){return e>9?e:"0"+e};n(n.P+n.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(r>99?r:"0"+a(r))+"Z"}})},{"./_export":50,"./_fails":52}],161:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive");n(n.P+n.F*e("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),r=o(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}})},{"./_export":50,"./_fails":52,"./_to-object":127,"./_to-primitive":128}],162:[function(e,t,r){var n=e("./_wks")("toPrimitive"),i=Date.prototype;n in i||e("./_hide")(i,n,e("./_date-to-primitive"))},{"./_date-to-primitive":44,"./_hide":58,"./_wks":135}],163:[function(e,t,r){var n=Date.prototype,i="Invalid Date",o="toString",a=n[o],s=n.getTime;new Date(NaN)+""!=i&&e("./_redefine")(n,o,function(){var e=s.call(this);return e===e?a.call(this):i})},{"./_redefine":105}],164:[function(e,t,r){var n=e("./_export");n(n.P,"Function",{bind:e("./_bind")})},{"./_bind":34,"./_export":50}],165:[function(e,t,r){"use strict";var n=e("./_is-object"),i=e("./_object-gpo"),o=e("./_wks")("hasInstance"),a=Function.prototype;o in a||e("./_object-dp").f(a,o,{value:function(e){if("function"!=typeof this||!n(e))return!1;if(!n(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},{"./_is-object":67,"./_object-dp":85,"./_object-gpo":92,"./_wks":135}],166:[function(e,t,r){var n=e("./_object-dp").f,i=e("./_property-desc"),o=e("./_has"),a=Function.prototype,s=/^\s*function ([^ (]*)/,u="name",c=Object.isExtensible||function(){return!0};u in a||e("./_descriptors")&&n(a,u,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(s)[1];return o(e,u)||!c(e)||n(e,u,i(5,t)),t}catch(e){return""}}})},{"./_descriptors":46,"./_has":57,"./_object-dp":85,"./_property-desc":103}],167:[function(e,t,r){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./_collection":40,"./_collection-strong":37}],168:[function(e,t,r){var n=e("./_export"),i=e("./_math-log1p"),o=Math.sqrt,a=Math.acosh;n(n.S+n.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},{"./_export":50,"./_math-log1p":78}],169:[function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=e("./_export"),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:n})},{"./_export":50}],170:[function(e,t,r){var n=e("./_export"),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},{"./_export":50}],171:[function(e,t,r){var n=e("./_export"),i=e("./_math-sign");n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},{"./_export":50,"./_math-sign":79}],172:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":50}],173:[function(e,t,r){var n=e("./_export"),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},{"./_export":50}],174:[function(e,t,r){var n=e("./_export"),i=e("./_math-expm1");n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},{"./_export":50,"./_math-expm1":77}],175:[function(e,t,r){var n=e("./_export"),i=e("./_math-sign"),o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),c=o(2,-126),l=function(e){return e+1/a-1/a};n(n.S,"Math",{fround:function(e){var t,r,n=Math.abs(e),o=i(e);return n<c?o*l(n/c/s)*c*s:(t=(1+s/a)*n,r=t-(t-n),r>u||r!=r?o*(1/0):o*r)}})},{"./_export":50,"./_math-sign":79}],176:[function(e,t,r){var n=e("./_export"),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,o=0,a=0,s=arguments.length,u=0;a<s;)r=i(arguments[a++]),u<r?(n=u/r,o=o*n*n+1,u=r):r>0?(n=r/u,o+=n*n):o+=r;return u===1/0?1/0:u*Math.sqrt(o)}})},{"./_export":50}],177:[function(e,t,r){var n=e("./_export"),i=Math.imul;n(n.S+n.F*e("./_fails")(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(e,t){var r=65535,n=+e,i=+t,o=r&n,a=r&i;return 0|o*a+((r&n>>>16)*a+o*(r&i>>>16)<<16>>>0)}})},{"./_export":50,"./_fails":52}],178:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},{"./_export":50}],179:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log1p:e("./_math-log1p")})},{"./_export":50,"./_math-log1p":78}],180:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},{"./_export":50}],181:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{sign:e("./_math-sign")})},{"./_export":50,"./_math-sign":79}],182:[function(e,t,r){var n=e("./_export"),i=e("./_math-expm1"),o=Math.exp;n(n.S+n.F*e("./_fails")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},{"./_export":50,"./_fails":52,"./_math-expm1":77}],183:[function(e,t,r){var n=e("./_export"),i=e("./_math-expm1"),o=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(o(e)+o(-e))}})},{"./_export":50,"./_math-expm1":77}],184:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},{"./_export":50}],185:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_has"),o=e("./_cof"),a=e("./_inherit-if-required"),s=e("./_to-primitive"),u=e("./_fails"),c=e("./_object-gopn").f,l=e("./_object-gopd").f,f=e("./_object-dp").f,h=e("./_string-trim").trim,d="Number",p=n[d],v=p,_=p.prototype,g=o(e("./_object-create")(_))==d,y="trim"in String.prototype,b=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():h(t,3);var r,n,i,o=t.charCodeAt(0);if(43===o||45===o){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var a,u=t.slice(2),c=0,l=u.length;c<l;c++)if(a=u.charCodeAt(c),a<48||a>i)return NaN;return parseInt(u,n)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof p&&(g?u(function(){_.valueOf.call(r)}):o(r)!=d)?a(new v(b(t)),r,p):b(t)};for(var m,w=e("./_descriptors")?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;w.length>E;E++)i(v,m=w[E])&&!i(p,m)&&f(p,m,l(v,m));p.prototype=_,_.constructor=p,e("./_redefine")(n,d,p)}},{"./_cof":36,"./_descriptors":46,"./_fails":52,"./_global":56,"./_has":57,"./_inherit-if-required":61,"./_object-create":84,"./_object-dp":85,"./_object-gopd":88,"./_object-gopn":90,"./_redefine":105,"./_string-trim":120,"./_to-primitive":128}],186:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":50}],187:[function(e,t,r){var n=e("./_export"),i=e("./_global").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},{"./_export":50,"./_global":56}],188:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":50,"./_is-integer":66}],189:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":50}],190:[function(e,t,r){var n=e("./_export"),i=e("./_is-integer"),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},{"./_export":50,"./_is-integer":66}],191:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":50}],192:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":50}],193:[function(e,t,r){var n=e("./_export"),i=e("./_parse-float");n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{"./_export":50,"./_parse-float":99}],194:[function(e,t,r){var n=e("./_export"),i=e("./_parse-int");n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},{"./_export":50,"./_parse-int":100}],195:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-integer"),o=e("./_a-number-value"),a=e("./_string-repeat"),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f="0",h=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*c[r],c[r]=n%1e7,n=u(n/1e7)},d=function(e){for(var t=6,r=0;--t>=0;)r+=c[t],c[t]=u(r/e),r=r%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==c[e]){var r=String(c[e]);t=""===t?r:t+a.call(f,7-r.length)+r}return t},v=function(e,t,r){return 0===t?r:t%2===1?v(e,t-1,r*e):v(e*e,t/2,r)},_=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!e("./_fails")(function(){s.call({})})),"Number",{toFixed:function(e){var t,r,n,s,u=o(this,l),c=i(e),g="",y=f;if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(t=_(u*v(2,69,1))-69,r=t<0?u*v(2,-t,1):u/v(2,t,1),r*=4503599627370496,t=52-t,t>0){for(h(0,r),n=c;n>=7;)h(1e7,0),n-=7;for(h(v(10,n,1),0),n=t-1;n>=23;)d(1<<23),n-=23;d(1<<n),h(1,1),d(2),y=p()}else h(0,r),h(1<<-t,0),y=p()+a.call(f,c);return c>0?(s=y.length,y=g+(s<=c?"0."+a.call(f,c-s)+y:y.slice(0,s-c)+"."+y.slice(s-c))):y=g+y,y}})},{"./_a-number-value":22,"./_export":50,"./_fails":52,"./_string-repeat":119,"./_to-integer":124}],196:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_fails"),o=e("./_a-number-value"),a=1..toPrecision;n(n.P+n.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},{"./_a-number-value":22,"./_export":50,"./_fails":52}],197:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":50,"./_object-assign":83}],198:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":50,"./_object-create":84}],199:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":46,"./_export":50,"./_object-dps":86}],200:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":46,"./_export":50,"./_object-dp":85}],201:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":67,"./_meta":80,"./_object-sap":96}],202:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},{"./_object-gopd":88,"./_object-sap":96,"./_to-iobject":125}],203:[function(e,t,r){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":89,"./_object-sap":96}],204:[function(e,t,r){var n=e("./_to-object"),i=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return i(n(e))}})},{"./_object-gpo":92,"./_object-sap":96,"./_to-object":127}],205:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isExtensible",function(e){return function(t){return!!n(t)&&(!e||e(t))}})},{"./_is-object":67,"./_object-sap":96}],206:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isFrozen",function(e){return function(t){return!n(t)||!!e&&e(t)}})},{"./_is-object":67,"./_object-sap":96}],207:[function(e,t,r){var n=e("./_is-object");e("./_object-sap")("isSealed",function(e){return function(t){return!n(t)||!!e&&e(t)}})},{"./_is-object":67,"./_object-sap":96}],208:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{is:e("./_same-value")})},{"./_export":50,"./_same-value":107}],209:[function(e,t,r){var n=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return i(n(e))}})},{"./_object-keys":94,"./_object-sap":96,"./_to-object":127}],210:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":67,"./_meta":80,"./_object-sap":96}],211:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("seal",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":67,"./_meta":80,"./_object-sap":96}],212:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":50,"./_set-proto":108}],213:[function(e,t,r){"use strict";var n=e("./_classof"),i={};i[e("./_wks")("toStringTag")]="z",i+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},{"./_classof":35,"./_redefine":105,"./_wks":135}],214:[function(e,t,r){var n=e("./_export"),i=e("./_parse-float");n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},{"./_export":50,"./_parse-float":99}],215:[function(e,t,r){var n=e("./_export"),i=e("./_parse-int");n(n.G+n.F*(parseInt!=i),{parseInt:i})},{"./_export":50,"./_parse-int":100}],216:[function(e,t,r){"use strict";var n,i,o,a=e("./_library"),s=e("./_global"),u=e("./_ctx"),c=e("./_classof"),l=e("./_export"),f=e("./_is-object"),h=e("./_a-function"),d=e("./_an-instance"),p=e("./_for-of"),v=e("./_species-constructor"),_=e("./_task").set,g=e("./_microtask")(),y="Promise",b=s.TypeError,m=s.process,w=s[y],m=s.process,E="process"==c(m),x=function(){},T=!!function(){try{var t=w.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(x,x)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof r}catch(e){}}(),O=function(e,t){return e===t||e===w&&t===o},A=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},S=function(e){return O(w,e)?new I(e):new i(e)},I=i=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw b("Bad Promise constructor");t=e,r=n}),this.resolve=h(t),this.reject=h(r)},R=function(e){try{e()}catch(e){return{error:e}}},M=function(e,t){if(!e._n){e._n=!0;var r=e._c;g(function(){for(var n=e._v,i=1==e._s,o=0,a=function(t){var r,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&j(e),e._h=1),a===!0?r=n:(c&&c.enter(),r=a(n),c&&c.exit()),r===t.promise?u(b("Promise-chain cycle")):(o=A(r))?o.call(r,s,u):s(r)):u(n)}catch(e){u(e)}};r.length>o;)a(r[o++]);e._c=[],e._n=!1,t&&!e._h&&k(e)})}},k=function(e){_.call(s,function(){var t,r,n,i=e._v;if(P(e)&&(t=R(function(){E?m.emit("unhandledRejection",i,e):(r=s.onunhandledrejection)?r({promise:e,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=E||P(e)?2:1),e._a=void 0,t)throw t.error})},P=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!P(t.promise))return!1;return!0},j=function(e){_.call(s,function(){var t;E?m.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},N=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},F=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw b("Promise can't be resolved itself");(t=A(e))?g(function(){var n={_w:r,_d:!1};try{t.call(e,u(F,n,1),u(N,n,1))}catch(e){N.call(n,e)}}):(r._v=e,r._s=1,M(r,!1))}catch(e){N.call({_w:r,_d:!1},e)}}};T||(w=function(e){
d(this,w,y,"_h"),h(e),n.call(this);try{e(u(F,this,1),u(N,this,1))}catch(e){N.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var r=S(v(this,w));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=E?m.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&M(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),I=function(){var e=new n;this.promise=e,this.resolve=u(F,e,1),this.reject=u(N,e,1)}),l(l.G+l.W+l.F*!T,{Promise:w}),e("./_set-to-string-tag")(w,y),e("./_set-species")(y),o=e("./_core")[y],l(l.S+l.F*!T,y,{reject:function(e){var t=S(this),r=t.reject;return r(e),t.promise}}),l(l.S+l.F*(a||!T),y,{resolve:function(e){if(e instanceof w&&O(e.constructor,this))return e;var t=S(this),r=t.resolve;return r(e),t.promise}}),l(l.S+l.F*!(T&&e("./_iter-detect")(function(e){w.all(e).catch(x)})),y,{all:function(e){var t=this,r=S(t),n=r.resolve,i=r.reject,o=R(function(){var r=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},i)}),--a||n(r)});return o&&i(o.error),r.promise},race:function(e){var t=this,r=S(t),n=r.reject,i=R(function(){p(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},{"./_a-function":21,"./_an-instance":24,"./_classof":35,"./_core":41,"./_ctx":43,"./_export":50,"./_for-of":55,"./_global":56,"./_is-object":67,"./_iter-detect":72,"./_library":76,"./_microtask":82,"./_redefine-all":104,"./_set-species":109,"./_set-to-string-tag":110,"./_species-constructor":113,"./_task":122,"./_wks":135}],217:[function(e,t,r){var n=e("./_export"),i=e("./_a-function"),o=e("./_an-object"),a=(e("./_global").Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!e("./_fails")(function(){a(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),u=o(r);return a?a(n,t,u):s.call(n,t,u)}})},{"./_a-function":21,"./_an-object":25,"./_export":50,"./_fails":52,"./_global":56}],218:[function(e,t,r){var n=e("./_export"),i=e("./_object-create"),o=e("./_a-function"),a=e("./_an-object"),s=e("./_is-object"),u=e("./_fails"),c=e("./_bind"),l=(e("./_global").Reflect||{}).construct,f=u(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),h=!u(function(){l(function(){})});n(n.S+n.F*(f||h),"Reflect",{construct:function(e,t){o(e),a(t);var r=arguments.length<3?e:o(arguments[2]);if(h&&!f)return l(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(c.apply(e,n))}var u=r.prototype,d=i(s(u)?u:Object.prototype),p=Function.apply.call(e,d,t);return s(p)?p:d}})},{"./_a-function":21,"./_an-object":25,"./_bind":34,"./_export":50,"./_fails":52,"./_global":56,"./_is-object":67,"./_object-create":84}],219:[function(e,t,r){var n=e("./_object-dp"),i=e("./_export"),o=e("./_an-object"),a=e("./_to-primitive");i(i.S+i.F*e("./_fails")(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){o(e),t=a(t,!0),o(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},{"./_an-object":25,"./_export":50,"./_fails":52,"./_object-dp":85,"./_to-primitive":128}],220:[function(e,t,r){var n=e("./_export"),i=e("./_object-gopd").f,o=e("./_an-object");n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(o(e),t);return!(r&&!r.configurable)&&delete e[t]}})},{"./_an-object":25,"./_export":50,"./_object-gopd":88}],221:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_an-object"),o=function(e){this._t=i(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};e("./_iter-create")(o,"Object",function(){var e,t=this,r=t._k;do if(t._i>=r.length)return{value:void 0,done:!0};while(!((e=r[t._i++])in t._t));return{value:e,done:!1}}),n(n.S,"Reflect",{enumerate:function(e){return new o(e)}})},{"./_an-object":25,"./_export":50,"./_iter-create":70}],222:[function(e,t,r){var n=e("./_object-gopd"),i=e("./_export"),o=e("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(o(e),t)}})},{"./_an-object":25,"./_export":50,"./_object-gopd":88}],223:[function(e,t,r){var n=e("./_export"),i=e("./_object-gpo"),o=e("./_an-object");n(n.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},{"./_an-object":25,"./_export":50,"./_object-gpo":92}],224:[function(e,t,r){function n(e,t){var r,s,l=arguments.length<3?e:arguments[2];return c(e)===l?e[t]:(r=i.f(e,t))?a(r,"value")?r.value:void 0!==r.get?r.get.call(l):void 0:u(s=o(e))?n(s,t,l):void 0}var i=e("./_object-gopd"),o=e("./_object-gpo"),a=e("./_has"),s=e("./_export"),u=e("./_is-object"),c=e("./_an-object");s(s.S,"Reflect",{get:n})},{"./_an-object":25,"./_export":50,"./_has":57,"./_is-object":67,"./_object-gopd":88,"./_object-gpo":92}],225:[function(e,t,r){var n=e("./_export");n(n.S,"Reflect",{has:function(e,t){return t in e}})},{"./_export":50}],226:[function(e,t,r){var n=e("./_export"),i=e("./_an-object"),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},{"./_an-object":25,"./_export":50}],227:[function(e,t,r){var n=e("./_export");n(n.S,"Reflect",{ownKeys:e("./_own-keys")})},{"./_export":50,"./_own-keys":98}],228:[function(e,t,r){var n=e("./_export"),i=e("./_an-object"),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},{"./_an-object":25,"./_export":50}],229:[function(e,t,r){var n=e("./_export"),i=e("./_set-proto");i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},{"./_export":50,"./_set-proto":108}],230:[function(e,t,r){function n(e,t,r){var u,h,d=arguments.length<4?e:arguments[3],p=o.f(l(e),t);if(!p){if(f(h=a(e)))return n(h,t,r,d);p=c(0)}return s(p,"value")?!(p.writable===!1||!f(d))&&(u=o.f(d,t)||c(0),u.value=r,i.f(d,t,u),!0):void 0!==p.set&&(p.set.call(d,r),!0)}var i=e("./_object-dp"),o=e("./_object-gopd"),a=e("./_object-gpo"),s=e("./_has"),u=e("./_export"),c=e("./_property-desc"),l=e("./_an-object"),f=e("./_is-object");u(u.S,"Reflect",{set:n})},{"./_an-object":25,"./_export":50,"./_has":57,"./_is-object":67,"./_object-dp":85,"./_object-gopd":88,"./_object-gpo":92,"./_property-desc":103}],231:[function(e,t,r){var n=e("./_global"),i=e("./_inherit-if-required"),o=e("./_object-dp").f,a=e("./_object-gopn").f,s=e("./_is-regexp"),u=e("./_flags"),c=n.RegExp,l=c,f=c.prototype,h=/a/g,d=/a/g,p=new c(h)!==h;if(e("./_descriptors")&&(!p||e("./_fails")(function(){return d[e("./_wks")("match")]=!1,c(h)!=h||c(d)==d||"/a/i"!=c(h,"i")}))){c=function(e,t){var r=this instanceof c,n=s(e),o=void 0===t;return!r&&n&&e.constructor===c&&o?e:i(p?new l(n&&!o?e.source:e,t):l((n=e instanceof c)?e.source:e,n&&o?u.call(e):t),r?this:f,c)};for(var v=(function(e){e in c||o(c,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})}),_=a(l),g=0;_.length>g;)v(_[g++]);f.constructor=c,c.prototype=f,e("./_redefine")(n,"RegExp",c)}e("./_set-species")("RegExp")},{"./_descriptors":46,"./_fails":52,"./_flags":54,"./_global":56,"./_inherit-if-required":61,"./_is-regexp":68,"./_object-dp":85,"./_object-gopn":90,"./_redefine":105,"./_set-species":109,"./_wks":135}],232:[function(e,t,r){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},{"./_descriptors":46,"./_flags":54,"./_object-dp":85}],233:[function(e,t,r){e("./_fix-re-wks")("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},{"./_fix-re-wks":53}],234:[function(e,t,r){e("./_fix-re-wks")("replace",2,function(e,t,r){return[function(n,i){"use strict";var o=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},{"./_fix-re-wks":53}],235:[function(e,t,r){e("./_fix-re-wks")("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},{"./_fix-re-wks":53}],236:[function(e,t,r){e("./_fix-re-wks")("split",2,function(t,r,n){"use strict";var i=e("./_is-regexp"),o=n,a=[].push,s="split",u="length",c="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var l=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return o.call(r,e,t);var n,s,f,h,d,p=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),_=0,g=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,v+"g");for(l||(n=new RegExp("^"+y.source+"$(?!\\s)",v));(s=y.exec(r))&&(f=s.index+s[0][u],!(f>_&&(p.push(r.slice(_,s.index)),!l&&s[u]>1&&s[0].replace(n,function(){for(d=1;d<arguments[u]-2;d++)void 0===arguments[d]&&(s[d]=void 0)}),s[u]>1&&s.index<r[u]&&a.apply(p,s.slice(1)),h=s[0][u],_=f,p[u]>=g)));)y[c]===s.index&&y[c]++;return _===r[u]?!h&&y.test("")||p.push(""):p.push(r.slice(_)),p[u]>g?p.slice(0,g):p}}else"0"[s](void 0,0)[u]&&(n=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(e,i){var o=t(this),a=void 0==e?void 0:e[r];return void 0!==a?a.call(e,o,i):n.call(String(o),e,i)},n]})},{"./_fix-re-wks":53,"./_is-regexp":68}],237:[function(e,t,r){"use strict";e("./es6.regexp.flags");var n=e("./_an-object"),i=e("./_flags"),o=e("./_descriptors"),a="toString",s=/./[a],u=function(t){e("./_redefine")(RegExp.prototype,a,t,!0)};e("./_fails")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?u(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):s.name!=a&&u(function(){return s.call(this)})},{"./_an-object":25,"./_descriptors":46,"./_fails":52,"./_flags":54,"./_redefine":105,"./es6.regexp.flags":232}],238:[function(e,t,r){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},{"./_collection":40,"./_collection-strong":37}],239:[function(e,t,r){"use strict";e("./_string-html")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},{"./_string-html":117}],240:[function(e,t,r){"use strict";e("./_string-html")("big",function(e){return function(){return e(this,"big","","")}})},{"./_string-html":117}],241:[function(e,t,r){"use strict";e("./_string-html")("blink",function(e){return function(){return e(this,"blink","","")}})},{"./_string-html":117}],242:[function(e,t,r){"use strict";e("./_string-html")("bold",function(e){return function(){return e(this,"b","","")}})},{"./_string-html":117}],243:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-at")(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},{"./_export":50,"./_string-at":115}],244:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-length"),o=e("./_string-context"),a="endsWith",s=""[a];n(n.P+n.F*e("./_fails-is-regexp")(a),"String",{endsWith:function(e){var t=o(this,e,a),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),u=void 0===r?n:Math.min(i(r),n),c=String(e);return s?s.call(t,c,u):t.slice(u-c.length,u)===c}})},{"./_export":50,"./_fails-is-regexp":51,"./_string-context":116,"./_to-length":126}],245:[function(e,t,r){"use strict";e("./_string-html")("fixed",function(e){return function(){return e(this,"tt","","")}})},{"./_string-html":117}],246:[function(e,t,r){"use strict";e("./_string-html")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},{"./_string-html":117}],247:[function(e,t,r){"use strict";e("./_string-html")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},{"./_string-html":117}],248:[function(e,t,r){var n=e("./_export"),i=e("./_to-index"),o=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,a=0;n>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return r.join("")}})},{"./_export":50,"./_to-index":123}],249:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-context"),o="includes";n(n.P+n.F*e("./_fails-is-regexp")(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},{"./_export":50,"./_fails-is-regexp":51,"./_string-context":116}],250:[function(e,t,r){"use strict";e("./_string-html")("italics",function(e){return function(){return e(this,"i","","")}})},{"./_string-html":117}],251:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":71,"./_string-at":115}],252:[function(e,t,r){"use strict";e("./_string-html")("link",function(e){return function(t){return e(this,"a","href",t)}})},{"./_string-html":117}],253:[function(e,t,r){var n=e("./_export"),i=e("./_to-iobject"),o=e("./_to-length");n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=o(t.length),n=arguments.length,a=[],s=0;r>s;)a.push(String(t[s++])),s<n&&a.push(String(arguments[s]));return a.join("")}})},{"./_export":50,"./_to-iobject":125,"./_to-length":126}],254:[function(e,t,r){var n=e("./_export");n(n.P,"String",{repeat:e("./_string-repeat")})},{"./_export":50,"./_string-repeat":119}],255:[function(e,t,r){"use strict";e("./_string-html")("small",function(e){return function(){return e(this,"small","","")}})},{"./_string-html":117}],256:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-length"),o=e("./_string-context"),a="startsWith",s=""[a];n(n.P+n.F*e("./_fails-is-regexp")(a),"String",{startsWith:function(e){var t=o(this,e,a),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return s?s.call(t,n,r):t.slice(r,r+n.length)===n}})},{"./_export":50,"./_fails-is-regexp":51,"./_string-context":116,"./_to-length":126}],257:[function(e,t,r){"use strict";e("./_string-html")("strike",function(e){return function(){return e(this,"strike","","")}})},{"./_string-html":117}],258:[function(e,t,r){"use strict";e("./_string-html")("sub",function(e){return function(){return e(this,"sub","","")}})},{"./_string-html":117}],259:[function(e,t,r){"use strict";e("./_string-html")("sup",function(e){return function(){return e(this,"sup","","")}})},{"./_string-html":117}],260:[function(e,t,r){"use strict";e("./_string-trim")("trim",function(e){return function(){return e(this,3)}})},{"./_string-trim":120}],261:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_has"),o=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),u=e("./_meta").KEY,c=e("./_fails"),l=e("./_shared"),f=e("./_set-to-string-tag"),h=e("./_uid"),d=e("./_wks"),p=e("./_wks-ext"),v=e("./_wks-define"),_=e("./_keyof"),g=e("./_enum-keys"),y=e("./_is-array"),b=e("./_an-object"),m=e("./_to-iobject"),w=e("./_to-primitive"),E=e("./_property-desc"),x=e("./_object-create"),T=e("./_object-gopn-ext"),O=e("./_object-gopd"),A=e("./_object-dp"),S=e("./_object-keys"),I=O.f,R=A.f,M=T.f,k=n.Symbol,P=n.JSON,j=P&&P.stringify,N="prototype",F=d("_hidden"),L=d("toPrimitive"),C={}.propertyIsEnumerable,D=l("symbol-registry"),U=l("symbols"),B=l("op-symbols"),G=Object[N],z="function"==typeof k,H=n.QObject,W=!H||!H[N]||!H[N].findChild,V=o&&c(function(){return 7!=x(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=I(G,t);n&&delete G[t],R(e,t,r),n&&e!==G&&R(G,t,n)}:R,Y=function(e){var t=U[e]=x(k[N]);return t._k=e,t},q=z&&"symbol"==typeof k.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof k},X=function(e,t,r){return e===G&&X(B,t,r),b(e),t=w(t,!0),b(r),i(U,t)?(r.enumerable?(i(e,F)&&e[F][t]&&(e[F][t]=!1),r=x(r,{enumerable:E(0,!1)})):(i(e,F)||R(e,F,E(1,{})),e[F][t]=!0),V(e,t,r)):R(e,t,r)},Z=function(e,t){b(e);for(var r,n=g(t=m(t)),i=0,o=n.length;o>i;)X(e,r=n[i++],t[r]);return e},K=function(e,t){return void 0===t?x(e):Z(x(e),t)},Q=function(e){var t=C.call(this,e=w(e,!0));return!(this===G&&i(U,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,F)&&this[F][e])||t)},$=function(e,t){if(e=m(e),t=w(t,!0),e!==G||!i(U,t)||i(B,t)){var r=I(e,t);return!r||!i(U,t)||i(e,F)&&e[F][t]||(r.enumerable=!0),r}},J=function(e){for(var t,r=M(m(e)),n=[],o=0;r.length>o;)i(U,t=r[o++])||t==F||t==u||n.push(t);return n},ee=function(e){for(var t,r=e===G,n=M(r?B:m(e)),o=[],a=0;n.length>a;)!i(U,t=n[a++])||r&&!i(G,t)||o.push(U[t]);return o};z||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===G&&t.call(B,r),i(this,F)&&i(this[F],e)&&(this[F][e]=!1),V(this,e,E(1,r))};return o&&W&&V(G,e,{configurable:!0,set:t}),Y(e)},s(k[N],"toString",function(){return this._k}),O.f=$,A.f=X,e("./_object-gopn").f=T.f=J,e("./_object-pie").f=Q,e("./_object-gops").f=ee,o&&!e("./_library")&&s(G,"propertyIsEnumerable",Q,!0),p.f=function(e){return Y(d(e))}),a(a.G+a.W+a.F*!z,{Symbol:k});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)d(te[re++]);for(var te=S(d.store),re=0;te.length>re;)v(te[re++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return i(D,e+="")?D[e]:D[e]=k(e)},keyFor:function(e){if(q(e))return _(D,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!z,"Object",{create:K,defineProperty:X,defineProperties:Z,getOwnPropertyDescriptor:$,getOwnPropertyNames:J,getOwnPropertySymbols:ee}),P&&a(a.S+a.F*(!z||c(function(){var e=k();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&y(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!q(t))return t}),n[1]=t,j.apply(P,n)}}}),k[N][L]||e("./_hide")(k[N],L,k[N].valueOf),f(k,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},{"./_an-object":25,"./_descriptors":46,"./_enum-keys":49,"./_export":50,"./_fails":52,"./_global":56,"./_has":57,"./_hide":58,"./_is-array":65,"./_keyof":75,"./_library":76,"./_meta":80,"./_object-create":84,"./_object-dp":85,"./_object-gopd":88,"./_object-gopn":90,"./_object-gopn-ext":89,"./_object-gops":91,"./_object-keys":94,"./_object-pie":95,"./_property-desc":103,"./_redefine":105,"./_set-to-string-tag":110,"./_shared":112,"./_to-iobject":125,"./_to-primitive":128,"./_uid":132,"./_wks":135,"./_wks-define":133,"./_wks-ext":134}],262:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_typed"),o=e("./_typed-buffer"),a=e("./_an-object"),s=e("./_to-index"),u=e("./_to-length"),c=e("./_is-object"),l=e("./_global").ArrayBuffer,f=e("./_species-constructor"),h=o.ArrayBuffer,d=o.DataView,p=i.ABV&&l.isView,v=h.prototype.slice,_=i.VIEW,g="ArrayBuffer";n(n.G+n.W+n.F*(l!==h),{ArrayBuffer:h}),n(n.S+n.F*!i.CONSTR,g,{isView:function(e){return p&&p(e)||c(e)&&_ in e}}),n(n.P+n.U+n.F*e("./_fails")(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(a(this),e);for(var r=a(this).byteLength,n=s(e,r),i=s(void 0===t?r:t,r),o=new(f(this,h))(u(i-n)),c=new d(this),l=new d(o),p=0;n<i;)l.setUint8(p++,c.getUint8(n++));return o}}),e("./_set-species")(g)},{"./_an-object":25,"./_export":50,"./_fails":52,"./_global":56,"./_is-object":67,"./_set-species":109,"./_species-constructor":113,"./_to-index":123,"./_to-length":126,"./_typed":131,"./_typed-buffer":130}],263:[function(e,t,r){var n=e("./_export");n(n.G+n.W+n.F*!e("./_typed").ABV,{DataView:e("./_typed-buffer").DataView})},{"./_export":50,"./_typed":131,"./_typed-buffer":130}],264:[function(e,t,r){e("./_typed-array")("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],265:[function(e,t,r){e("./_typed-array")("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],266:[function(e,t,r){e("./_typed-array")("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],267:[function(e,t,r){e("./_typed-array")("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],268:[function(e,t,r){e("./_typed-array")("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],269:[function(e,t,r){e("./_typed-array")("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],270:[function(e,t,r){e("./_typed-array")("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],271:[function(e,t,r){e("./_typed-array")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},{"./_typed-array":129}],272:[function(e,t,r){e("./_typed-array")("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},{"./_typed-array":129}],273:[function(e,t,r){"use strict";var n,i=e("./_array-methods")(0),o=e("./_redefine"),a=e("./_meta"),s=e("./_object-assign"),u=e("./_collection-weak"),c=e("./_is-object"),l=a.getWeak,f=Object.isExtensible,h=u.ufstore,d={},p=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(c(e)){var t=l(e);return t===!0?h(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(this,e,t)}},_=t.exports=e("./_collection")("WeakMap",p,v,u,!0,!0);7!=(new _).set((Object.freeze||Object)(d),7).get(d)&&(n=u.getConstructor(p),s(n.prototype,v),a.NEED=!0,i(["delete","has","get","set"],function(e){var t=_.prototype,r=t[e];o(t,e,function(t,i){if(c(t)&&!f(t)){this._f||(this._f=new n);var o=this._f[e](t,i);return"set"==e?this:o}return r.call(this,t,i)})}))},{"./_array-methods":30,"./_collection":40,"./_collection-weak":39,"./_is-object":67,"./_meta":80,"./_object-assign":83,"./_redefine":105}],274:[function(e,t,r){"use strict";var n=e("./_collection-weak");e("./_collection")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e,!0)}},n,!1,!0)},{"./_collection":40,"./_collection-weak":39}],275:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_array-includes")(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":23,"./_array-includes":29,"./_export":50}],276:[function(e,t,r){var n=e("./_export"),i=e("./_microtask")(),o=e("./_global").process,a="process"==e("./_cof")(o);n(n.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},{"./_cof":36,"./_export":50,"./_global":56,"./_microtask":82}],277:[function(e,t,r){var n=e("./_export"),i=e("./_cof");n(n.S,"Error",{isError:function(e){return"Error"===i(e)}})},{"./_cof":36,"./_export":50}],278:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":38,"./_export":50}],279:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,o=t>>>0,a=r>>>0;return o+(n>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},{"./_export":50}],280:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{imulh:function(e,t){var r=65535,n=+e,i=+t,o=n&r,a=i&r,s=n>>16,u=i>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>16)+((o*u>>>0)+(c&r)>>16)}})},{"./_export":50}],281:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,o=t>>>0,a=r>>>0;return o-(n>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},{"./_export":50}],282:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{umulh:function(e,t){var r=65535,n=+e,i=+t,o=n&r,a=i&r,s=n>>>16,u=i>>>16,c=(s*a>>>0)+(o*a>>>16);return s*u+(c>>>16)+((o*u>>>0)+(c&r)>>>16)}})},{"./_export":50}],283:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_a-function"),a=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},{"./_a-function":21,"./_descriptors":46,"./_export":50,"./_object-dp":85,"./_object-forced-pam":87,"./_to-object":127}],284:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_a-function"),a=e("./_object-dp");e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},{"./_a-function":21,"./_descriptors":46,"./_export":50,"./_object-dp":85,"./_object-forced-pam":87,"./_to-object":127}],285:[function(e,t,r){var n=e("./_export"),i=e("./_object-to-array")(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},{"./_export":50,"./_object-to-array":97}],286:[function(e,t,r){var n=e("./_export"),i=e("./_own-keys"),o=e("./_to-iobject"),a=e("./_object-gopd"),s=e("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r=o(e),n=a.f,u=i(r),c={},l=0;u.length>l;)s(c,t=u[l++],n(r,t));return c}})},{"./_create-property":42,"./_export":50,"./_object-gopd":88,"./_own-keys":98,"./_to-iobject":125}],287:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive"),a=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function(e){var t,r=i(this),n=o(e,!0);do if(t=s(r,n))return t.get;while(r=a(r))}})},{"./_descriptors":46,"./_export":50,"./_object-forced-pam":87,"./_object-gopd":88,"./_object-gpo":92,"./_to-object":127,"./_to-primitive":128}],288:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_to-object"),o=e("./_to-primitive"),a=e("./_object-gpo"),s=e("./_object-gopd").f;e("./_descriptors")&&n(n.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function(e){var t,r=i(this),n=o(e,!0);do if(t=s(r,n))return t.set;while(r=a(r))}})},{"./_descriptors":46,"./_export":50,"./_object-forced-pam":87,"./_object-gopd":88,"./_object-gpo":92,"./_to-object":127,"./_to-primitive":128}],289:[function(e,t,r){var n=e("./_export"),i=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return i(e)}})},{"./_export":50,"./_object-to-array":97}],290:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_global"),o=e("./_core"),a=e("./_microtask")(),s=e("./_wks")("observable"),u=e("./_a-function"),c=e("./_an-object"),l=e("./_an-instance"),f=e("./_redefine-all"),h=e("./_hide"),d=e("./_for-of"),p=d.RETURN,v=function(e){return null==e?void 0:u(e)},_=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,_(e))},b=function(e,t){c(e),this._c=void 0,this._o=e,e=new m(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:u(r),this._c=r)}catch(t){return void e.error(t)}g(this)&&_(this)};b.prototype=f({},{unsubscribe:function(){y(this)}});var m=function(e){this._s=e};m.prototype=f({},{next:function(e){var t=this._s;if(!g(t)){var r=t._o;try{var n=v(r.next);if(n)return n.call(r,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var r=t._o;t._o=void 0;try{var n=v(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{_(t)}finally{throw e}}return _(t),e},complete:function(e){var t=this._s;if(!g(t)){var r=t._o;t._o=void 0;try{var n=v(r.complete);e=n?n.call(r,e):void 0}catch(e){try{_(t)}finally{throw e}}return _(t),e}}});var w=function(e){l(this,w,"Observable","_f")._f=u(e)};f(w.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(r,n){u(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),f(w,{from:function(e){var t="function"==typeof this?this:w,r=v(c(e)[s]);if(r){var n=c(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return a(function(){if(!r){try{if(d(e,!1,function(e){if(t.next(e),r)return p})===p)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:w)(function(e){var t=!1;return a(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),h(w.prototype,s,function(){return this}),n(n.G,{Observable:w}),e("./_set-species")("Observable")},{"./_a-function":21,"./_an-instance":24,"./_an-object":25,"./_core":41,"./_export":50,"./_for-of":55,"./_global":56,"./_hide":58,"./_microtask":82,"./_redefine-all":104,"./_set-species":109,"./_wks":135}],291:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.key,a=n.set;n.exp({defineMetadata:function(e,t,r,n){a(e,t,i(r),o(n))}})},{"./_an-object":25,"./_metadata":81}],292:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.key,a=n.map,s=n.store;n.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:o(arguments[2]),n=a(i(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var u=s.get(t);return u.delete(r),!!u.size||s.delete(t)}})},{"./_an-object":25,"./_metadata":81}],293:[function(e,t,r){var n=e("./es6.set"),i=e("./_array-from-iterable"),o=e("./_metadata"),a=e("./_an-object"),s=e("./_object-gpo"),u=o.keys,c=o.key,l=function(e,t){var r=u(e,t),o=s(e);if(null===o)return r;var a=l(o,t);return a.length?r.length?i(new n(r.concat(a))):a:r};o.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:c(arguments[1]))}})},{"./_an-object":25,"./_array-from-iterable":28,"./_metadata":81,"./_object-gpo":92,"./es6.set":238}],294:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=e("./_object-gpo"),a=n.has,s=n.get,u=n.key,c=function(e,t,r){var n=a(e,t,r);if(n)return s(e,t,r);var i=o(t);return null!==i?c(e,i,r):void 0};n.exp({getMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:u(arguments[2]))}})},{"./_an-object":25,"./_metadata":81,"./_object-gpo":92}],295:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.keys,a=n.key;n.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},{"./_an-object":25,"./_metadata":81}],296:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.get,a=n.key;n.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":25,"./_metadata":81}],297:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=e("./_object-gpo"),a=n.has,s=n.key,u=function(e,t,r){var n=a(e,t,r);if(n)return!0;var i=o(t);return null!==i&&u(e,i,r)};n.exp({hasMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":25,"./_metadata":81,"./_object-gpo":92}],298:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=n.has,a=n.key;n.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":25,"./_metadata":81}],299:[function(e,t,r){var n=e("./_metadata"),i=e("./_an-object"),o=e("./_a-function"),a=n.key,s=n.set;n.exp({metadata:function(e,t){return function(r,n){s(e,t,(void 0!==n?i:o)(r),a(n))}}})},{"./_a-function":21,"./_an-object":25,"./_metadata":81}],300:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":38,"./_export":50}],301:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-at")(!0);n(n.P,"String",{at:function(e){return i(this,e)}})},{"./_export":50,"./_string-at":115}],302:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_defined"),o=e("./_to-length"),a=e("./_is-regexp"),s=e("./_flags"),u=RegExp.prototype,c=function(e,t){
this._r=e,this._s=t};e("./_iter-create")(c,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),n(n.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in u?String(e.flags):s.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=o(e.lastIndex),new c(n,t)}})},{"./_defined":45,"./_export":50,"./_flags":54,"./_is-regexp":68,"./_iter-create":70,"./_to-length":126}],303:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-pad");n(n.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":50,"./_string-pad":118}],304:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_string-pad");n(n.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":50,"./_string-pad":118}],305:[function(e,t,r){"use strict";e("./_string-trim")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},{"./_string-trim":120}],306:[function(e,t,r){"use strict";e("./_string-trim")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},{"./_string-trim":120}],307:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":133}],308:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":133}],309:[function(e,t,r){var n=e("./_export");n(n.S,"System",{global:e("./_global")})},{"./_export":50,"./_global":56}],310:[function(e,t,r){for(var n=e("./es6.array.iterator"),i=e("./_redefine"),o=e("./_global"),a=e("./_hide"),s=e("./_iterators"),u=e("./_wks"),c=u("iterator"),l=u("toStringTag"),f=s.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var p,v=h[d],_=o[v],g=_&&_.prototype;if(g){g[c]||a(g,c,f),g[l]||a(g,l,v),s[v]=f;for(p in n)g[p]||i(g,p,n[p],!0)}}},{"./_global":56,"./_hide":58,"./_iterators":74,"./_redefine":105,"./_wks":135,"./es6.array.iterator":148}],311:[function(e,t,r){var n=e("./_export"),i=e("./_task");n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":50,"./_task":122}],312:[function(e,t,r){var n=e("./_global"),i=e("./_export"),o=e("./_invoke"),a=e("./_partial"),s=n.navigator,u=!!s&&/MSIE .\./.test(s.userAgent),c=function(e){return u?function(t,r){return e(o(a,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),r)}:e};i(i.G+i.B+i.F*u,{setTimeout:c(n.setTimeout),setInterval:c(n.setInterval)})},{"./_export":50,"./_global":56,"./_invoke":62,"./_partial":101}],313:[function(e,t,r){e("./modules/es6.symbol"),e("./modules/es6.object.create"),e("./modules/es6.object.define-property"),e("./modules/es6.object.define-properties"),e("./modules/es6.object.get-own-property-descriptor"),e("./modules/es6.object.get-prototype-of"),e("./modules/es6.object.keys"),e("./modules/es6.object.get-own-property-names"),e("./modules/es6.object.freeze"),e("./modules/es6.object.seal"),e("./modules/es6.object.prevent-extensions"),e("./modules/es6.object.is-frozen"),e("./modules/es6.object.is-sealed"),e("./modules/es6.object.is-extensible"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.function.bind"),e("./modules/es6.function.name"),e("./modules/es6.function.has-instance"),e("./modules/es6.parse-int"),e("./modules/es6.parse-float"),e("./modules/es6.number.constructor"),e("./modules/es6.number.to-fixed"),e("./modules/es6.number.to-precision"),e("./modules/es6.number.epsilon"),e("./modules/es6.number.is-finite"),e("./modules/es6.number.is-integer"),e("./modules/es6.number.is-nan"),e("./modules/es6.number.is-safe-integer"),e("./modules/es6.number.max-safe-integer"),e("./modules/es6.number.min-safe-integer"),e("./modules/es6.number.parse-float"),e("./modules/es6.number.parse-int"),e("./modules/es6.math.acosh"),e("./modules/es6.math.asinh"),e("./modules/es6.math.atanh"),e("./modules/es6.math.cbrt"),e("./modules/es6.math.clz32"),e("./modules/es6.math.cosh"),e("./modules/es6.math.expm1"),e("./modules/es6.math.fround"),e("./modules/es6.math.hypot"),e("./modules/es6.math.imul"),e("./modules/es6.math.log10"),e("./modules/es6.math.log1p"),e("./modules/es6.math.log2"),e("./modules/es6.math.sign"),e("./modules/es6.math.sinh"),e("./modules/es6.math.tanh"),e("./modules/es6.math.trunc"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.trim"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.string.anchor"),e("./modules/es6.string.big"),e("./modules/es6.string.blink"),e("./modules/es6.string.bold"),e("./modules/es6.string.fixed"),e("./modules/es6.string.fontcolor"),e("./modules/es6.string.fontsize"),e("./modules/es6.string.italics"),e("./modules/es6.string.link"),e("./modules/es6.string.small"),e("./modules/es6.string.strike"),e("./modules/es6.string.sub"),e("./modules/es6.string.sup"),e("./modules/es6.date.now"),e("./modules/es6.date.to-json"),e("./modules/es6.date.to-iso-string"),e("./modules/es6.date.to-string"),e("./modules/es6.date.to-primitive"),e("./modules/es6.array.is-array"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.join"),e("./modules/es6.array.slice"),e("./modules/es6.array.sort"),e("./modules/es6.array.for-each"),e("./modules/es6.array.map"),e("./modules/es6.array.filter"),e("./modules/es6.array.some"),e("./modules/es6.array.every"),e("./modules/es6.array.reduce"),e("./modules/es6.array.reduce-right"),e("./modules/es6.array.index-of"),e("./modules/es6.array.last-index-of"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.array.species"),e("./modules/es6.array.iterator"),e("./modules/es6.regexp.constructor"),e("./modules/es6.regexp.to-string"),e("./modules/es6.regexp.flags"),e("./modules/es6.regexp.match"),e("./modules/es6.regexp.replace"),e("./modules/es6.regexp.search"),e("./modules/es6.regexp.split"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.typed.array-buffer"),e("./modules/es6.typed.data-view"),e("./modules/es6.typed.int8-array"),e("./modules/es6.typed.uint8-array"),e("./modules/es6.typed.uint8-clamped-array"),e("./modules/es6.typed.int16-array"),e("./modules/es6.typed.uint16-array"),e("./modules/es6.typed.int32-array"),e("./modules/es6.typed.uint32-array"),e("./modules/es6.typed.float32-array"),e("./modules/es6.typed.float64-array"),e("./modules/es6.reflect.apply"),e("./modules/es6.reflect.construct"),e("./modules/es6.reflect.define-property"),e("./modules/es6.reflect.delete-property"),e("./modules/es6.reflect.enumerate"),e("./modules/es6.reflect.get"),e("./modules/es6.reflect.get-own-property-descriptor"),e("./modules/es6.reflect.get-prototype-of"),e("./modules/es6.reflect.has"),e("./modules/es6.reflect.is-extensible"),e("./modules/es6.reflect.own-keys"),e("./modules/es6.reflect.prevent-extensions"),e("./modules/es6.reflect.set"),e("./modules/es6.reflect.set-prototype-of"),e("./modules/es7.array.includes"),e("./modules/es7.string.at"),e("./modules/es7.string.pad-start"),e("./modules/es7.string.pad-end"),e("./modules/es7.string.trim-left"),e("./modules/es7.string.trim-right"),e("./modules/es7.string.match-all"),e("./modules/es7.symbol.async-iterator"),e("./modules/es7.symbol.observable"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.values"),e("./modules/es7.object.entries"),e("./modules/es7.object.define-getter"),e("./modules/es7.object.define-setter"),e("./modules/es7.object.lookup-getter"),e("./modules/es7.object.lookup-setter"),e("./modules/es7.map.to-json"),e("./modules/es7.set.to-json"),e("./modules/es7.system.global"),e("./modules/es7.error.is-error"),e("./modules/es7.math.iaddh"),e("./modules/es7.math.isubh"),e("./modules/es7.math.imulh"),e("./modules/es7.math.umulh"),e("./modules/es7.reflect.define-metadata"),e("./modules/es7.reflect.delete-metadata"),e("./modules/es7.reflect.get-metadata"),e("./modules/es7.reflect.get-metadata-keys"),e("./modules/es7.reflect.get-own-metadata"),e("./modules/es7.reflect.get-own-metadata-keys"),e("./modules/es7.reflect.has-metadata"),e("./modules/es7.reflect.has-own-metadata"),e("./modules/es7.reflect.metadata"),e("./modules/es7.asap"),e("./modules/es7.observable"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/_core")},{"./modules/_core":41,"./modules/es6.array.copy-within":138,"./modules/es6.array.every":139,"./modules/es6.array.fill":140,"./modules/es6.array.filter":141,"./modules/es6.array.find":143,"./modules/es6.array.find-index":142,"./modules/es6.array.for-each":144,"./modules/es6.array.from":145,"./modules/es6.array.index-of":146,"./modules/es6.array.is-array":147,"./modules/es6.array.iterator":148,"./modules/es6.array.join":149,"./modules/es6.array.last-index-of":150,"./modules/es6.array.map":151,"./modules/es6.array.of":152,"./modules/es6.array.reduce":154,"./modules/es6.array.reduce-right":153,"./modules/es6.array.slice":155,"./modules/es6.array.some":156,"./modules/es6.array.sort":157,"./modules/es6.array.species":158,"./modules/es6.date.now":159,"./modules/es6.date.to-iso-string":160,"./modules/es6.date.to-json":161,"./modules/es6.date.to-primitive":162,"./modules/es6.date.to-string":163,"./modules/es6.function.bind":164,"./modules/es6.function.has-instance":165,"./modules/es6.function.name":166,"./modules/es6.map":167,"./modules/es6.math.acosh":168,"./modules/es6.math.asinh":169,"./modules/es6.math.atanh":170,"./modules/es6.math.cbrt":171,"./modules/es6.math.clz32":172,"./modules/es6.math.cosh":173,"./modules/es6.math.expm1":174,"./modules/es6.math.fround":175,"./modules/es6.math.hypot":176,"./modules/es6.math.imul":177,"./modules/es6.math.log10":178,"./modules/es6.math.log1p":179,"./modules/es6.math.log2":180,"./modules/es6.math.sign":181,"./modules/es6.math.sinh":182,"./modules/es6.math.tanh":183,"./modules/es6.math.trunc":184,"./modules/es6.number.constructor":185,"./modules/es6.number.epsilon":186,"./modules/es6.number.is-finite":187,"./modules/es6.number.is-integer":188,"./modules/es6.number.is-nan":189,"./modules/es6.number.is-safe-integer":190,"./modules/es6.number.max-safe-integer":191,"./modules/es6.number.min-safe-integer":192,"./modules/es6.number.parse-float":193,"./modules/es6.number.parse-int":194,"./modules/es6.number.to-fixed":195,"./modules/es6.number.to-precision":196,"./modules/es6.object.assign":197,"./modules/es6.object.create":198,"./modules/es6.object.define-properties":199,"./modules/es6.object.define-property":200,"./modules/es6.object.freeze":201,"./modules/es6.object.get-own-property-descriptor":202,"./modules/es6.object.get-own-property-names":203,"./modules/es6.object.get-prototype-of":204,"./modules/es6.object.is":208,"./modules/es6.object.is-extensible":205,"./modules/es6.object.is-frozen":206,"./modules/es6.object.is-sealed":207,"./modules/es6.object.keys":209,"./modules/es6.object.prevent-extensions":210,"./modules/es6.object.seal":211,"./modules/es6.object.set-prototype-of":212,"./modules/es6.object.to-string":213,"./modules/es6.parse-float":214,"./modules/es6.parse-int":215,"./modules/es6.promise":216,"./modules/es6.reflect.apply":217,"./modules/es6.reflect.construct":218,"./modules/es6.reflect.define-property":219,"./modules/es6.reflect.delete-property":220,"./modules/es6.reflect.enumerate":221,"./modules/es6.reflect.get":224,"./modules/es6.reflect.get-own-property-descriptor":222,"./modules/es6.reflect.get-prototype-of":223,"./modules/es6.reflect.has":225,"./modules/es6.reflect.is-extensible":226,"./modules/es6.reflect.own-keys":227,"./modules/es6.reflect.prevent-extensions":228,"./modules/es6.reflect.set":230,"./modules/es6.reflect.set-prototype-of":229,"./modules/es6.regexp.constructor":231,"./modules/es6.regexp.flags":232,"./modules/es6.regexp.match":233,"./modules/es6.regexp.replace":234,"./modules/es6.regexp.search":235,"./modules/es6.regexp.split":236,"./modules/es6.regexp.to-string":237,"./modules/es6.set":238,"./modules/es6.string.anchor":239,"./modules/es6.string.big":240,"./modules/es6.string.blink":241,"./modules/es6.string.bold":242,"./modules/es6.string.code-point-at":243,"./modules/es6.string.ends-with":244,"./modules/es6.string.fixed":245,"./modules/es6.string.fontcolor":246,"./modules/es6.string.fontsize":247,"./modules/es6.string.from-code-point":248,"./modules/es6.string.includes":249,"./modules/es6.string.italics":250,"./modules/es6.string.iterator":251,"./modules/es6.string.link":252,"./modules/es6.string.raw":253,"./modules/es6.string.repeat":254,"./modules/es6.string.small":255,"./modules/es6.string.starts-with":256,"./modules/es6.string.strike":257,"./modules/es6.string.sub":258,"./modules/es6.string.sup":259,"./modules/es6.string.trim":260,"./modules/es6.symbol":261,"./modules/es6.typed.array-buffer":262,"./modules/es6.typed.data-view":263,"./modules/es6.typed.float32-array":264,"./modules/es6.typed.float64-array":265,"./modules/es6.typed.int16-array":266,"./modules/es6.typed.int32-array":267,"./modules/es6.typed.int8-array":268,"./modules/es6.typed.uint16-array":269,"./modules/es6.typed.uint32-array":270,"./modules/es6.typed.uint8-array":271,"./modules/es6.typed.uint8-clamped-array":272,"./modules/es6.weak-map":273,"./modules/es6.weak-set":274,"./modules/es7.array.includes":275,"./modules/es7.asap":276,"./modules/es7.error.is-error":277,"./modules/es7.map.to-json":278,"./modules/es7.math.iaddh":279,"./modules/es7.math.imulh":280,"./modules/es7.math.isubh":281,"./modules/es7.math.umulh":282,"./modules/es7.object.define-getter":283,"./modules/es7.object.define-setter":284,"./modules/es7.object.entries":285,"./modules/es7.object.get-own-property-descriptors":286,"./modules/es7.object.lookup-getter":287,"./modules/es7.object.lookup-setter":288,"./modules/es7.object.values":289,"./modules/es7.observable":290,"./modules/es7.reflect.define-metadata":291,"./modules/es7.reflect.delete-metadata":292,"./modules/es7.reflect.get-metadata":294,"./modules/es7.reflect.get-metadata-keys":293,"./modules/es7.reflect.get-own-metadata":296,"./modules/es7.reflect.get-own-metadata-keys":295,"./modules/es7.reflect.has-metadata":297,"./modules/es7.reflect.has-own-metadata":298,"./modules/es7.reflect.metadata":299,"./modules/es7.set.to-json":300,"./modules/es7.string.at":301,"./modules/es7.string.match-all":302,"./modules/es7.string.pad-end":303,"./modules/es7.string.pad-start":304,"./modules/es7.string.trim-left":305,"./modules/es7.string.trim-right":306,"./modules/es7.symbol.async-iterator":307,"./modules/es7.symbol.observable":308,"./modules/es7.system.global":309,"./modules/web.dom.iterable":310,"./modules/web.immediate":311,"./modules/web.timers":312}],314:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===_(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===_(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===_(e)}function d(e){return"[object Error]"===_(e)||e instanceof Error}function p(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function _(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=a,r.isString=s,r.isSymbol=u,r.isUndefined=c,r.isRegExp=l,r.isObject=f,r.isDate=h,r.isError=d,r.isFunction=p,r.isPrimitive=v,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":399}],315:[function(e,t,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(e){var t=new n;t.pre=e.pre,t.body=e.body,t.post=e.post;var r=e.args.slice(0);t.argTypes=r;for(var i=0;i<r.length;++i){var a=r[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(t.argTypes[i]="array",t.arrayArgs.push(i),t.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),t.shimArgs.push("array"+i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(i),t.shimArgs.push("scalar"+i);else if("index"===a){if(t.indexArgs.push(i),i<t.pre.args.length&&t.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<t.post.args.length&&t.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(i),i<t.pre.args.length&&t.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<t.body.args.length&&t.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<t.post.args.length&&t.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[i]);t.argTypes[i]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(i)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,o(t)}var o=e("./lib/thunk.js");t.exports=i},{"./lib/thunk.js":317}],316:[function(e,t,r){"use strict";function n(e,t,r){var n,i,o=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,u=[],c=[],l=0,f=0;for(n=0;n<o;++n)c.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)f=l,l=e[n],0===n?c.push(["d",i,"s",n,"=t",i,"p",l].join("")):c.push(["d",i,"s",n,"=(t",i,"p",l,"-s",f,"*t",i,"p",f,")"].join(""));for(u.push("var "+c.join(",")),n=o-1;n>=0;--n)l=e[n],u.push(["for(i",n,"=0;i",n,"<s",l,";++i",n,"){"].join(""));for(u.push(r),n=0;n<o;++n){for(f=l,l=e[n],i=0;i<a;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",l,"]"].join(""))),u.push("}")}return u.join("\n")}function i(e,t,r,i){for(var o=t.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,c=[],l=0;l<a;++l)c.push(["var offset",l,"=p",l].join(""));for(var l=e;l<o;++l)c.push(["for(var j"+l+"=SS[",t[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",s,"){"].join("")),c.push(["s",t[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",t[l],"=",s].join("")),c.push(["j",l,"-=",s,"}"].join("")),u&&c.push(["index[",t[l],"]=j",l].join(""));for(var l=0;l<a;++l){for(var f=["offset"+l],h=e;h<o;++h)f.push(["j",h,"*t",l,"p",t[h]].join(""));c.push(["p",l,"=(",f.join("+"),")"].join(""))}c.push(n(t,r,i));for(var l=e;l<o;++l)c.push("}");return c.join("\n")}function o(e){for(var t=0,r=e[0].length;t<r;){for(var n=1;n<e.length;++n)if(e[n][t]!==e[0][t])return t;++t}return t}function a(e,t,r){for(var n=e.body,i=[],o=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),c="",l=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a),h=t.offsetArgs[f];l=h.array,c="+q"+f;case"array":c="p"+l+c;var d="l"+a,p="a"+l;if(0===t.arrayBlockIndices[l])1===s.count?"generic"===r[l]?s.lvalue?(i.push(["var ",d,"=",p,".get(",c,")"].join("")),n=n.replace(u,d),o.push([p,".set(",c,",",d,")"].join(""))):n=n.replace(u,[p,".get(",c,")"].join("")):n=n.replace(u,[p,"[",c,"]"].join("")):"generic"===r[l]?(i.push(["var ",d,"=",p,".get(",c,")"].join("")),n=n.replace(u,d),s.lvalue&&o.push([p,".set(",c,",",d,")"].join(""))):(i.push(["var ",d,"=",p,"[",c,"]"].join("")),n=n.replace(u,d),s.lvalue&&o.push([p,"[",c,"]=",d].join("")));else{for(var v=[s.name],_=[c],g=0;g<Math.abs(t.arrayBlockIndices[l]);g++)v.push("\\s*\\[([^\\]]+)\\]"),_.push("$"+(g+1)+"*t"+l+"b"+g);if(u=new RegExp(v.join(""),"g"),c=_.join("+"),"generic"===r[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[p,"[",c,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+t.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),r=!0,n=0;n<e.length;++n){var i=e[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?t[n]="u"+i.charAt(1)+o:t[n]=i.charAt(0)+o,n>0&&(r=r&&t[n]===t[n-1])}return r?t[0]:t.join("")}function u(e,t){for(var r=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,u=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),f=0;f<e.arrayArgs.length;++f)l[f]=t[2*f],u[f]=t[2*f+1];for(var h=[],d=[],p=[],v=[],_=[],f=0;f<e.arrayArgs.length;++f){e.arrayBlockIndices[f]<0?(p.push(0),v.push(r),h.push(r),d.push(r+e.arrayBlockIndices[f])):(p.push(e.arrayBlockIndices[f]),v.push(e.arrayBlockIndices[f]+r),h.push(0),d.push(e.arrayBlockIndices[f]));for(var g=[],y=0;y<u[f].length;y++)p[f]<=u[f][y]&&u[f][y]<v[f]&&g.push(u[f][y]-p[f]);_.push(g)}for(var b=["SS"],m=["'use strict'"],w=[],y=0;y<r;++y)w.push(["s",y,"=SS[",y,"]"].join(""));for(var f=0;f<e.arrayArgs.length;++f){b.push("a"+f),b.push("t"+f),b.push("p"+f);for(var y=0;y<r;++y)w.push(["t",f,"p",y,"=t",f,"[",p[f]+y,"]"].join(""));for(var y=0;y<Math.abs(e.arrayBlockIndices[f]);++y)w.push(["t",f,"b",y,"=t",f,"[",h[f]+y,"]"].join(""))}for(var f=0;f<e.scalarArgs.length;++f)b.push("Y"+f);if(e.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var E=new Array(r),f=0;f<r;++f)E[f]="0";w.push(["index=[",E.join(","),"]"].join(""))}for(var f=0;f<e.offsetArgs.length;++f){for(var x=e.offsetArgs[f],T=[],y=0;y<x.offset.length;++y)0!==x.offset[y]&&(1===x.offset[y]?T.push(["t",x.array,"p",y].join("")):T.push([x.offset[y],"*t",x.array,"p",y].join("")));0===T.length?w.push("q"+f+"=0"):w.push(["q",f,"=",T.join("+")].join(""))}var O=c([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));w=w.concat(O),m.push("var "+w.join(","));for(var f=0;f<e.arrayArgs.length;++f)m.push("p"+f+"|=0");e.pre.body.length>3&&m.push(a(e.pre,e,l));var A=a(e.body,e,l),S=o(_);S<r?m.push(i(S,_[0],e,A)):m.push(n(_[0],e,A)),e.post.body.length>3&&m.push(a(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+m.join("\n")+"\n----------");var I=[e.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",S,s(l)].join(""),R=new Function(["function ",I,"(",b.join(","),"){",m.join("\n"),"} return ",I].join(""));return R()}var c=e("uniq");t.exports=u},{uniq:545}],317:[function(e,t,r){"use strict";function n(e){var t=["'use strict'","var CACHED={}"],r=[],n=e.funcName+"_cwise_thunk";t.push(["return function ",n,"(",e.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],u=[],c=[],l=0;l<e.arrayArgs.length;++l){var f=e.arrayArgs[l];r.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),l>0&&(u.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[l]))),c.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[l])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var l=0;l<e.scalarArgs.length;++l)s.push("scalar"+e.scalarArgs[l]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),t.push("var "+r.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------");var h=new Function("compile",t.join("\n"));return h(i.bind(void 0,e))}var i=e("./compile.js");t.exports=n},{"./compile.js":316}],318:[function(e,t,r){(function(e){function r(t){if(!/^data\:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");var r=t.indexOf(",");if(-1===r||r<=4)throw new TypeError("malformed data: URI");for(var n=t.substring(5,r).split(";"),i=!1,o="US-ASCII",a=0;a<n.length;a++)"base64"==n[a]?i=!0:0==n[a].indexOf("charset=")&&(o=n[a].substring(8));var s=unescape(t.substring(r+1)),u=i?"base64":"ascii",c=new e(s,u);return c.type=n[0]||"text/plain",c.charset=o,c}t.exports=r}).call(this,e("buffer").Buffer)},{buffer:11}],319:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./reflection-effect");Object.defineProperty(r,"ReflectionEffect",{enumerable:!0,get:function(){return n(i).default}})},{"./reflection-effect":320}],320:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./reflection-effect");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./reflection-effect":321}],321:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("luma.gl"),c=e("../../../shader-utils"),l=e("../../lib"),f=(e("path"),function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2;n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.reflectivity=e,r.framebuffer=null,r.setNeedsRedraw(),r}return o(t,e),s(t,[{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME reflection-effect-vs\n\nattribute vec3 vertices;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  uv = vertices.xy;\n  gl_Position = vec4(2. * vertices.xy - vec2(1., 1.), 1., 1.);\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME reflection-effect-fs\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D reflectionTexture;\nuniform float reflectivity;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_FragColor = texture2D(reflectionTexture, vec2(uv.x, 1. - uv.y));\n  gl_FragColor.a *= reflectivity;\n}\n'}}},{key:"initialize",value:function(e){var t=e.gl;e.layerManager;this.model=new u.Model(a({gl:t},(0,c.assembleShaders)(t,this.getShaders()),{geometry:new u.Geometry({drawMode:u.GL.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])})})),this.framebuffer=new u.Framebuffer(t)}},{key:"preDraw",value:function(e){var t=e.gl,r=e.layerManager,n=r.context.viewport,i="undefined"!=typeof window&&window.devicePixelRatio||1;this.framebuffer.resize({width:i*n.width,height:i*n.height});var o=n.pitch;this.framebuffer.bind(),r.setContext(a({},n,{pitch:-180-o})),t.clear(u.GL.COLOR_BUFFER_BIT|u.GL.DEPTH_BUFFER_BIT),r.drawLayers(),r.setContext(a({},n,{pitch:o})),t.bindFramebuffer(t.FRAMEBUFFER,null)}},{key:"draw",value:function(e){e.gl,e.layerManager;this.model.render({reflectionTexture:this.framebuffer.texture,reflectivity:this.reflectivity})}},{key:"finalize",value:function(e){e.gl,e.layerManager}}]),t}(l.Effect));r.default=f},{"../../../shader-utils":360,"../../lib":324,"luma.gl":428,path:505}],322:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){
var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){var r=t.gl,i=t.layerManager;n(this,e),this.gl=r,this.layerManager=i,this._effects=[]}return i(e,[{key:"addEffect",value:function(e){this._effects.push(e),this._sortEffects(),e.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function(e){var t=this._effects.indexOf(e);return t>=0&&(e.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(t,1),!0)}},{key:"preDraw",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this._effects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}},{key:"draw",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=this._effects[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}},{key:"_sortEffects",value:function(){this._effects.sort(function(e,t){return e.priority>t.priority?-1:e.priority<t.priority?1:e.count-t.count})}}]),e}();r.default=o},{}],323:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=0,a=function(){function e(){n(this,e),this.count=o++,this.visible=!0,this.priority=0,this.needsRedraw=!1}return i(e,[{key:"initialize",value:function(e){e.gl,e.layerManager}},{key:"finalize",value:function(e){e.gl,e.layerManager}},{key:"preDraw",value:function(e){e.gl,e.layerManager}},{key:"draw",value:function(e){e.gl,e.layerManager}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=e}}]),e}();r.default=a},{}],324:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./effect");Object.defineProperty(r,"Effect",{enumerable:!0,get:function(){return n(i).default}});var o=e("./effect-manager");Object.defineProperty(r,"EffectManager",{enumerable:!0,get:function(){return n(o).default}})},{"./effect":323,"./effect-manager":322}],325:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./lib");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./experimental/lib");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./viewport");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./shader-utils");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("./layers/core");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var u=e("./layers/fp64");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})});var c=e("./experimental/effects");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})})},{"./experimental/effects":319,"./experimental/lib":324,"./layers/core":330,"./layers/fp64":343,"./lib":349,"./shader-utils":360,"./viewport":365}],326:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,c,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("../../.."),d=e("luma.gl"),p=(e("path"),[0,0,255,255]),v=function(e){return e.sourcePosition},_=function(e){return e.targetPosition},g=function(e){return e.color},y=(c=u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.strokeWidth,n=void 0===r?1:r,s=e.getSourcePosition,u=void 0===s?v:s,c=e.getTargetPosition,f=void 0===c?_:c,h=e.getSourceColor,d=void 0===h?g:h,p=e.getTargetColor,y=void 0===p?g:p,b=i(e,["strokeWidth","getSourcePosition","getTargetPosition","getSourceColor","getTargetColor"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l({strokeWidth:n,getSourcePosition:u,getTargetPosition:f,getSourceColor:d,getTargetColor:y},b)))}return s(t,e),f(t,[{key:"initializeState",value:function(){var e=this.context.gl;this.setState({model:this._createModel(e)});var t=this.state.attributeManager;t.addInstanced({instancePositions:{size:4,update:this.calculateInstancePositions},instanceSourceColors:{type:d.GL.UNSIGNED_BYTE,size:4,update:this.calculateInstanceSourceColors},instanceTargetColors:{type:d.GL.UNSIGNED_BYTE,size:4,update:this.calculateInstanceTargetColors}})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.gl,n=this.screenToDevicePixels(this.props.strokeWidth);r.lineWidth(n),this.state.model.render(t),r.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-vertex-shader\n\nconst float N = 49.0;\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvoid main(void) {\n  vec2 source = preproject(instancePositions.xy);\n  vec2 target = preproject(instancePositions.zw);\n\n  float segmentRatio = smoothstep(0.0, 1.0, positions.x / N);\n\n  float vertex_height = paraboloid(source, target, segmentRatio);\n  if (vertex_height < 0.0) vertex_height = 0.0;\n  vec3 p = vec3(\n    // xy: linear interpolation of source & target\n    mix(source, target, segmentRatio),\n    // z: paraboloid interpolate of source & target\n    sqrt(vertex_height)\n  );\n\n  gl_Position = project(vec4(p, 1.0));\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n\n  vColor = mix(\n    vec4(color.rgb, color.a * opacity),\n    vec4(instancePickingColors / 255., 1.),\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"_createModel",value:function(e){for(var t=[],r=50,i=0;i<r;i++)t=[].concat(n(t),[i,i,i]);return new d.Model(l({gl:e},(0,h.assembleShaders)(e,this.getShaders()),{geometry:new d.Geometry({drawMode:d.GL.LINE_STRIP,positions:new Float32Array(t)}),isInstanced:!0}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,r=t.data,n=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,c=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,p=n(d),v=i(d);o[s+0]=p[0],o[s+1]=p[1],o[s+2]=v[0],o[s+3]=v[1],s+=a}}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}},{key:"calculateInstanceSourceColors",value:function(e){var t=this.props,r=t.data,n=t.getSourceColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h)||p;i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],i[a+3]=isNaN(d[3])?p[3]:d[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetColors",value:function(e){var t=this.props,r=t.data,n=t.getTargetColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h)||p;i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],i[a+3]=isNaN(d[3])?p[3]:d[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),t}(h.Layer),u.layerName="ArcLayer",c);r.default=y},{"../../..":325,"luma.gl":428,path:505}],327:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./arc-layer");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./arc-layer":326}],328:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=(0,E.default)(e),r=[];return t.features.map(function(e,t){var n=c(e);n.forEach(function(e){e.featureIndex=t}),r.push.apply(r,i(n))}),r}function c(e){var t=e.geometry,r=t.coordinates,n=t.type,i=void 0;switch(n){case"MultiPolygon":i=r;break;case"Polygon":i=[r];break;case"LineString":i=[[r]];break;case"MultiLineString":i=r.map(function(e){return[e]});break;default:i=[]}return i.map(function(e){return e.map(function(e){return e.map(function(e){return[e[0],e[1],e[2]||0]})})})}function l(e){var t=0;return e.reduce(function(e,r){for(var n=r.length,o=[].concat(i(e),[t]),a=1;a<n-1;a++)o.push(a+t,a+t);return o.push(t+n-1),t+=n,o},[])}function f(e){var t=null;return e.length>1&&(t=e.reduce(function(e,t){return[].concat(i(e),[e[e.length-1]+t.length])},[0]).slice(1,e.length)),(0,T.default)((0,m.default)(e),t,3)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h,d,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},g=e("../../.."),y=e("luma.gl"),b=e("lodash.flattendeep"),m=n(b),w=e("geojson-normalize"),E=n(w),x=e("earcut"),T=n(x),O=(e("path"),[0,0,255,255]),A=function(e){return e.properties.color},S=(d=h=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,p({getColor:A,drawCountour:!1,strokeWidth:1},e)))}return s(t,e),v(t,[{key:"initializeState",value:function(){var e=this.context.gl,t=this.state.attributeManager;t.addDynamic({indices:{size:1,update:this.calculateIndices,isIndexed:!0},positions:{size:3,update:this.calculatePositions},colors:{type:y.GL.UNSIGNED_BYTE,size:4,update:this.calculateColors},pickingColors:{type:y.GL.UNSIGNED_BYTE,size:3,update:this.calculatePickingColors,noAlloc:!0}});var r=e.getExtension("OES_element_index_uint")?Uint32Array:Uint16Array;this.setState({model:this.getModel(e),numInstances:0,IndexType:r})}},{key:"updateState",value:function(e){var t=e.oldProps,r=e.props,n=e.changeFlags,i=this.state.attributeManager;n.dataChanged&&(this.state.choropleths=u(r.data),i.invalidateAll()),t.opacity!==r.opacity&&this.setUniforms({opacity:r.opacity})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.gl,n=this.screenToDevicePixels(this.props.strokeWidth);r.lineWidth(n),this.state.model.render(t),r.lineWidth(1)}},{key:"pick",value:function(e){_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pick",this).call(this,e);var r=e.info,n=this.decodePickingColor(r.color),i=n>=0?this.props.data.features[n]:null;r.feature=i,r.object=i}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\nuniform vec3 selectedPickingColor;\n\n// PICKING\nuniform float pickingEnabled;\nvarying vec4 vPickingColor;\nvoid picking_setPickColor(vec3 pickingColor) {\n  vPickingColor = vec4(pickingColor,  1.);\n}\nvec4 picking_setNormalAndPickColors(vec4 color, vec3 pickingColor) {\n  vec4 pickingColor4 = vec4(pickingColor.rgb, 1.);\n  vPickingColor = mix(color, pickingColor4, pickingEnabled);\n  return vPickingColor;\n}\n\n// PICKING\n// vec4 getColor(vec4 color, float opacity, vec3 pickingColor, float renderPickingBuffer) {\n//   vec4 color4 = vec4(color.xyz / 255., color.w / 255. * opacity);\n//   vec4 pickingColor4 = vec4(pickingColor / 255., 1.);\n//   return mix(color4, pickingColor4, renderPickingBuffer);\n// }\n\nvoid main(void) {\n\n  vec4 color = vec4(colors.rgb, colors.a * opacity) / 255.;\n\n  picking_setNormalAndPickColors(\n    color,\n    pickingColors / 255.\n  );\n\n  vec3 p = project_position(positions);\n  gl_Position = project_to_clipspace(vec4(p, 1.));\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// PICKING\n// uniform bool pickingEnabled;\nvarying vec4 vPickingColor;\nvec4 picking_getColor() {\n  return vPickingColor;\n}\n// PICKING\n\nvoid main(void) {\n  gl_FragColor = picking_getColor();\n}\n'}}},{key:"getModel",value:function(e){return new y.Model(p({gl:e,id:this.props.id},(0,g.assembleShaders)(e,this.getShaders()),{geometry:new y.Geometry({drawMode:this.props.drawContour?y.GL.LINES:y.GL.TRIANGLES}),vertexCount:0,isIndexed:!0}))}},{key:"calculateIndices",value:function(e){var t=this,r=this.state.choropleths.reduce(function(e,t){return[].concat(i(e),[e[e.length-1]+t.reduce(function(e,t){return e+t.length},0)])},[0]),n=this.state.IndexType;if(n===Uint16Array&&r[r.length-1]>65535)throw new Error("Vertex count exceeds browser's limit");var o=this.state.choropleths.map(function(e,n){return t.props.drawContour?l(e).map(function(e){return e+r[n]}):f(e).map(function(e){return e+r[n]})});e.value=new n((0,m.default)(o)),e.target=y.GL.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(e.value.length/e.size)}},{key:"calculatePositions",value:function(e){var t=(0,m.default)(this.state.choropleths);e.value=new Float32Array(t)}},{key:"calculateColors",value:function(e){var t=this.props,r=t.data.features,n=t.getColor,i=this.state.choropleths.map(function(e,t){var i=r[e.featureIndex],o=n(i)||O;return isNaN(o[3])&&(o[3]=O[3]),e.map(function(e){return e.map(function(e){return o})})});e.value=new Uint8Array((0,m.default)(i))}},{key:"calculatePickingColors",value:function(e){var t=this,r=this.state.choropleths.map(function(e,r){var n=e.featureIndex,i=t.props.drawContour?[0,0,0]:[(n+1)%256,Math.floor((n+1)/256)%256,Math.floor((n+1)/256/256)%256];return e.map(function(e){return e.map(function(e){return i})})});e.value=new Uint8Array((0,m.default)(r))}}]),t}(g.Layer),h.layerName="ChoroplethLayer",d);r.default=S},{"../../..":325,earcut:369,"geojson-normalize":372,"lodash.flattendeep":404,"luma.gl":428,path:505}],329:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./choropleth-layer");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./choropleth-layer":328}],330:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./arc-layer");Object.defineProperty(r,"ArcLayer",{enumerable:!0,get:function(){return n(i).default}});var o=e("./choropleth-layer");Object.defineProperty(r,"ChoroplethLayer",{enumerable:!0,get:function(){return n(o).default}});var a=e("./line-layer");Object.defineProperty(r,"LineLayer",{enumerable:!0,get:function(){return n(a).default}});var s=e("./scatterplot-layer");Object.defineProperty(r,"ScatterplotLayer",{enumerable:!0,get:function(){return n(s).default}});var u=e("./screen-grid-layer");Object.defineProperty(r,"ScreenGridLayer",{enumerable:!0,get:function(){return n(u).default}})},{"./arc-layer":327,"./choropleth-layer":329,"./line-layer":331,"./scatterplot-layer":333,"./screen-grid-layer":335}],331:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./line-layer");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./line-layer":332}],332:[function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,u,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("../../.."),h=e("luma.gl"),d=(e("path"),[0,255,0,255]),p=function(e){return e.sourcePosition},v=function(e){return e.targetPosition},_=function(e){return e.color||d},g=(u=s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.getSourcePosition,a=void 0===r?p:r,s=e.getTargetPosition,u=void 0===s?v:s,l=e.getColor,f=void 0===l?_:l,h=e.strokeWidth,d=void 0===h?1:h,g=n(e,["getSourcePosition","getTargetPosition","getColor","strokeWidth"]);return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c({getSourcePosition:a,getTargetPosition:u,getColor:f,strokeWidth:d},g)))}return a(t,e),l(t,[{key:"initializeState",value:function(){var e=this.context.gl;this.setState({model:this.createModel(e)});var t=this.state.attributeManager;t.addInstanced({instanceSourcePositions:{size:3,update:this.calculateInstanceSourcePositions},instanceTargetPositions:{size:3,update:this.calculateInstanceTargetPositions},instanceColors:{type:h.GL.UNSIGNED_BYTE,size:4,update:this.calculateInstanceColors}})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.gl,n=this.screenToDevicePixels(this.props.strokeWidth);r.lineWidth(n),this.state.model.render(t),r.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  // Position\n  vec3 source = project_position(instanceSourcePositions);\n  vec3 target = project_position(instanceTargetPositions);\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec3 p = mix(source, target, segmentIndex);\n\n  gl_Position = project_to_clipspace(vec4(p, 1.));\n\n  // Color\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n#define SHADER_NAME line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"createModel",value:function(e){var t=[0,0,0,1,1,1];return new h.Model(c({gl:e,id:this.props.id},(0,f.assembleShaders)(e,this.getShaders()),{geometry:new h.Geometry({drawMode:h.GL.LINE_STRIP,positions:new Float32Array(t)}),isInstanced:!0}))}},{key:"calculateInstanceSourcePositions",value:function(e){var t=this.props,r=t.data,n=t.getSourcePosition,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h);i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2]||0,a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetPositions",value:function(e){var t=this.props,r=t.data,n=t.getTargetPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h);i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2]||0,a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,r=t.data,n=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=n(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?d[3]:p[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),t}(f.Layer),s.layerName="LineLayer",u);r.default=g},{"../../..":325,"luma.gl":428,path:505}],333:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./scatterplot-layer");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./scatterplot-layer":334}],334:[function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,u,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){
return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},h=e("../../.."),d=e("luma.gl"),p=(e("path"),[255,0,255,255]),v=function(e){return e.position},_=function(e){return e.radius},g=function(e){return e.color||p},y=(u=s=function(e){function t(e){var r=e.getPosition,a=void 0===r?v:r,s=e.getRadius,u=void 0===s?_:s,l=e.getColor,f=void 0===l?g:l,h=e.radius,d=void 0===h?30:h,p=e.radiusMinPixels,y=void 0===p?0:p,b=e.radiusMaxPixels,m=void 0===b?Number.MAX_SAFE_INTEGER:b,w=e.drawOutline,E=void 0!==w&&w,x=e.strokeWidth,T=void 0===x?1:x,O=n(e,["getPosition","getRadius","getColor","radius","radiusMinPixels","radiusMaxPixels","drawOutline","strokeWidth"]);return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c({getPosition:a,getRadius:u,getColor:f,drawOutline:E,strokeWidth:T,radius:d,radiusMinPixels:y,radiusMaxPixels:m},O)))}return a(t,e),l(t,[{key:"initializeState",value:function(){var e=this.context.gl,t=this._getModel(e);this.setState({model:t});var r=this.state.attributeManager;r.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceRadius:{size:1,update:this.calculateInstanceRadius},instanceColors:{type:d.GL.UNSIGNED_BYTE,size:4,update:this.calculateInstanceColors}})}},{key:"updateState",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateState",this).call(this,e);var r=e.props,n=e.oldProps;r.drawOutline!==n.drawOutline&&(this.state.model.geometry.drawMode=r.drawOutline?d.GL.LINE_LOOP:d.GL.TRIANGLE_FAN)}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.gl,n=this.screenToDevicePixels(this.props.strokeWidth);r.lineWidth(n),this.state.model.render(c({},t,{radius:this.props.radius,radiusMinPixels:this.props.radiusMinPixels,radiusMaxPixels:this.props.radiusMaxPixels})),r.lineWidth(1)}},{key:"getShaders",value:function(e){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radius;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec3 center = project_position(instancePositions);\n  float radiusPixels = clamp(\n    project_scale(radius * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  vec3 vertex = positions * radiusPixels;\n  gl_Position = project_to_clipspace(vec4(center + vertex, 1.0));\n\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"_getModel",value:function(e){for(var t=16,r=[],n=0;n<t;n++)r.push(Math.cos(2*Math.PI*n/t),Math.sin(2*Math.PI*n/t),0);var i=(0,h.assembleShaders)(e,this.getShaders()),o=new d.Model(c({gl:e,id:"scatterplot"},i,{geometry:new d.Geometry({drawMode:d.GL.TRIANGLE_FAN,positions:new Float32Array(r)}),isInstanced:!0}));return o}},{key:"calculateInstancePositions",value:function(e){var t=this.props,r=t.data,n=t.getPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h);i[a+0]=d[0]||0,i[a+1]=d[1]||0,i[a+2]=d[2]||0,a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceRadius",value:function(e){var t=this.props,r=t.data,n=t.getRadius,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h);i[a+0]=isNaN(d)?0:d,a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,r=t.data,n=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h);i[a+0]=d[0]||0,i[a+1]=d[1]||0,i[a+2]=d[2]||0,i[a+3]=isNaN(d[3])?p[3]:d[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),t}(h.Layer),s.layerName="ScatterplotLayer",u);r.default=y},{"../../..":325,"luma.gl":428,path:505}],335:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./screen-grid-layer");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./screen-grid-layer":336}],336:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a,s,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../../.."),f=e("luma.gl"),h=(e("path"),s=a=function(e){function t(e){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({unitWidth:100,unitHeight:100,minColor:[0,0,0,255],maxColor:[0,255,0,255],getPosition:function(e){return e.position},getWeight:function(e){return 1}},e)))}return o(t,e),c(t,[{key:"initializeState",value:function(){var e=this.state.attributeManager;e.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCount:{size:1,update:this.calculateInstanceCount}});var t=this.context.gl;this.setState({model:this.getModel(t)})}},{key:"updateState",value:function(e){var t=e.oldProps,r=e.props,n=e.changeFlags,i=r.unitWidth!==t.unitWidth||r.unitHeight!==t.unitHeight;(i||n.viewportChanged)&&this.updateCell()}},{key:"draw",value:function(e){var t=e.uniforms,r=this.props,n=r.minColor,i=r.maxColor,o=this.state,a=o.model,s=o.cellScale,c=o.maxCount,l=this.context.gl;l.depthMask(!0),a.render(u({},t,{minColor:n,maxColor:i,cellScale:s,maxCount:c}))}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME grid-layer-vs\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute float instanceCount;\nattribute vec3 instancePickingColors;\n\nuniform float maxCount;\nuniform float opacity;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float renderPickingBuffer;\nuniform vec3 cellScale;\nuniform vec3 selectedPickingColor;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 color = mix(minColor, maxColor, instanceCount / maxCount) / 255.;\n\n  vColor = mix(\n    vec4(color.rgb, color.a * opacity),\n    vec4(instancePickingColors / 255., 1.),\n    renderPickingBuffer\n  );\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* fragment shader for the grid-layer */\n#define SHADER_NAME grid-layer-fs\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"getModel",value:function(e){return new f.Model(u({gl:e,id:this.props.id},(0,l.assembleShaders)(e,this.getShaders()),{geometry:new f.Geometry({drawMode:f.GL.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}),isInstanced:!0}))}},{key:"updateCell",value:function(){var e=this.context.viewport,t=e.width,r=e.height,n=this.props,i=n.unitWidth,o=n.unitHeight,a=2,s=new Float32Array([(i-a)/t*2,-(o-a)/r*2,1]),u=Math.ceil(t/i),c=Math.ceil(r/o);this.setState({cellScale:s,numCol:u,numRow:c,numInstances:u*c});var l=this.state.attributeManager;l.invalidateAll()}},{key:"calculateInstancePositions",value:function(e,t){for(var r=t.numInstances,n=this.context.viewport,i=n.width,o=n.height,a=this.props,s=a.unitWidth,u=a.unitHeight,c=this.state.numCol,l=e.value,f=e.size,h=0;h<r;h++){var d=h%c,p=Math.floor(h/c);l[h*f+0]=d*s/i*2-1,l[h*f+1]=1-p*u/o*2,l[h*f+2]=0}}},{key:"calculateInstanceCount",value:function(e){var t=this.props,r=t.data,n=t.unitWidth,i=t.unitHeight,o=t.getPosition,a=t.getWeight,s=this.state,u=s.numCol,c=s.numRow,l=e.value,f=0;l.fill(0);var h=!0,d=!1,p=void 0;try{for(var v,_=r[Symbol.iterator]();!(h=(v=_.next()).done);h=!0){var g=v.value,y=this.project(o(g)),b=Math.floor(y[0]/n),m=Math.floor(y[1]/i);if(b>=0&&b<u&&m>=0&&m<c){var w=b+m*u;l[w]+=a(g),l[w]>f&&(f=l[w])}}}catch(e){d=!0,p=e}finally{try{!h&&_.return&&_.return()}finally{if(d)throw p}}this.setState({maxCount:f})}}]),t}(l.Layer),a.layerName="ScreenGridLayer",s);r.default=h},{"../../..":325,"luma.gl":428,path:505}],337:[function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,c,l=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=e("../../.."),p=e("../../../lib/utils/fp64"),v=e("luma.gl"),_=(e("path"),[0,0,255,255]),g=function(e){return e.sourcePosition},y=function(e){return e.targetPosition},b=function(e){return e.color},m=(c=u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.getSourcePosition,n=void 0===r?g:r,s=e.getTargetPosition,u=void 0===s?y:s,c=e.getSourceColor,l=void 0===c?b:c,h=e.getTargetColor,d=void 0===h?b:h,p=e.strokeWidth,v=void 0===p?1:p,_=i(e,["getSourcePosition","getTargetPosition","getSourceColor","getTargetColor","strokeWidth"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f({getSourcePosition:n,getTargetPosition:u,getSourceColor:l,getTargetColor:d,strokeWidth:v},_)))}return s(t,e),h(t,[{key:"initializeState",value:function(){var e=this.context.gl,t=this.state.attributeManager;t.addInstanced({instanceSourcePositionsFP64:{size:4,update:this.calculateInstanceSourcePositions},instanceTargetPositionsFP64:{size:4,update:this.calculateInstanceTargetPositions},instanceSourceColors:{size:4,type:v.GL.UNSIGNED_BYTE,update:this.calculateInstanceSourceColors},instanceTargetColors:{size:4,type:v.GL.UNSIGNED_BYTE,update:this.calculateInstanceTargetColors}}),this.setState({model:this.createModel(e)})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.gl,n=this.screenToDevicePixels(this.props.strokeWidth);r.lineWidth(n),this.state.model.render(t),r.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-64-vertex-shader\n\nconst float N = 49.0;\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceSourcePositionsFP64;\nattribute vec4 instanceTargetPositionsFP64;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\nvoid main(void) {\n  vec2 projectedSourceCoord[2];\n  project_position_fp64(instanceSourcePositionsFP64, projectedSourceCoord);\n  vec2 projectedTargetCoord[2];\n  project_position_fp64(instanceTargetPositionsFP64, projectedTargetCoord);\n\n  float segmentRatio = smoothstep(0.0, 1.0, positions.x / N);\n\n  vec2 mixed_temp[2];\n\n  vec2_mix_fp64(projectedSourceCoord, projectedTargetCoord, segmentRatio, mixed_temp);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = mixed_temp[0];\n  vertex_pos_modelspace[1] = mixed_temp[1];\n\n  vec2 vertex_height = paraboloid_fp64(projectedSourceCoord, projectedTargetCoord, segmentRatio);\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) vertex_height = vec2(0.0, 0.0);\n\n  vertex_pos_modelspace[2] = sqrt_fp64(vertex_height);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n\n  vColor = mix(\n    vec4(color.rgb, color.a * opacity),\n    vec4(instancePickingColors / 255., 1.),\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',fp64:!0,project64:!0}}},{key:"createModel",value:function(e){for(var t=[],r=50,i=0;i<r;i++)t=[].concat(n(t),[i,i,i]);return new v.Model(f({gl:e,id:this.props.id},(0,d.assembleShaders)(e,this.getShaders()),{geometry:new v.Geometry({drawMode:v.GL.LINE_STRIP,positions:new Float32Array(t)}),isInstanced:!0}))}},{key:"calculateInstanceSourcePositions",value:function(e){var t=this.props,r=t.data,n=t.getSourcePosition,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var f,h=r[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,v=n(d),_=(0,p.fp64ify)(v[0]),g=l(_,2);i[a+0]=g[0],i[a+1]=g[1];var y=(0,p.fp64ify)(v[1]),b=l(y,2);i[a+2]=b[0],i[a+3]=b[1],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetPositions",value:function(e){var t=this.props,r=t.data,n=t.getTargetPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var f,h=r[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,v=n(d),_=(0,p.fp64ify)(v[0]),g=l(_,2);i[a+0]=g[0],i[a+1]=g[1];var y=(0,p.fp64ify)(v[1]),b=l(y,2);i[a+2]=b[0],i[a+3]=b[1],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw c}}}},{key:"calculateInstanceSourceColors",value:function(e){var t=this.props,r=t.data,n=t.getSourceColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h)||_;i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],i[a+3]=isNaN(d[3])?_[3]:d[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetColors",value:function(e){var t=this.props,r=t.data,n=t.getTargetColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h)||_;i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],i[a+3]=isNaN(d[3])?_[3]:d[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),t}(d.Layer),u.layerName="ArcLayer64",c);r.default=m},{"../../..":325,"../../../lib/utils/fp64":355,"luma.gl":428,path:505}],338:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./arc-layer-64");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./arc-layer-64":337}],339:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=(0,T.default)(e),r=[];return t.features.map(function(e,t){var n=c(e);n.forEach(function(e){e.featureIndex=t}),r.push.apply(r,i(n))}),r}function c(e){var t=e.geometry,r=t.coordinates,n=t.type,i=void 0;switch(n){case"MultiPolygon":i=r;break;case"Polygon":i=[r];break;case"LineString":i=[[r]];break;case"MultiLineString":i=r.map(function(e){return[e]});break;default:i=[]}return i.map(function(e){return e.map(function(e){return e.map(function(e){return[e[0],e[1],e[2]||0]})})})}function l(e){var t=0;return e.reduce(function(e,r){for(var n=r.length,o=[].concat(i(e),[t]),a=1;a<n-1;a++)o.push(a+t,a+t);return o.push(t+n-1),t+=n,o},[])}function f(e){var t=null;return e.length>1&&(t=e.reduce(function(e,t){return[].concat(i(e),[e[e.length-1]+t.length])},[0]).slice(1,e.length)),(0,A.default)((0,E.default)(e),t,3)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var h,d,p=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),g=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},y=e("../../.."),b=e("../../../lib/utils/fp64"),m=e("luma.gl"),w=e("lodash.flattendeep"),E=n(w),x=e("geojson-normalize"),T=n(x),O=e("earcut"),A=n(O),S=(e("path"),[0,0,255,255]),I=function(e){return e.properties.color},R=(d=h=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,v({getColor:I,drawCountour:!1,strokeWidth:1},e)))}return s(t,e),_(t,[{key:"initializeState",value:function(){var e=this.context.gl,t=this.state.attributeManager;t.addDynamic({indices:{size:1,update:this.calculateIndices,isIndexed:!0},positionsFP64:{size:4,update:this.calculatePositionsFP64},heightsFP64:{size:2,update:this.calculateHeightsFP64},colors:{size:4,type:m.GL.UNSIGNED_BYTE,update:this.calculateColors},pickingColors:{size:3,update:this.calculatePickingColors,noAlloc:!0}});var r=e.getExtension("OES_element_index_uint")?Uint32Array:Uint16Array;this.setState({model:this.getModel(e),numInstances:0,IndexType:r})}},{key:"updateState",value:function(e){var t=e.oldProps,r=e.props,n=e.changeFlags,i=this.state.attributeManager;n.dataChanged&&(this.state.choropleths=u(r.data),i.invalidateAll()),t.opacity!==r.opacity&&this.setUniforms({opacity:r.opacity})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.gl,n=this.screenToDevicePixels(this.props.strokeWidth);r.lineWidth(n),this.state.model.render(t),r.lineWidth(1)}},{key:"pick",value:function(e){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pick",this).call(this,e);var r=e.info,n=this.decodePickingColor(r.color),i=n>=0?this.props.data.features[n]:null;r.feature=i,r.object=i}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-64-vertex-shader\n\nattribute vec4 positionsFP64;\nattribute vec2 heightsFP64;\n\nattribute vec3 positions;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\nuniform vec3 selectedPickingColor;\n\nvarying vec4 vColor;\n\nvec4 getColor(vec4 color, float opacity, vec3 pickingColor, float renderPickingBuffer) {\n  vec4 color4 = vec4(color.xyz / 255., color.w / 255. * opacity);\n  vec4 pickingColor4 = vec4(pickingColor / 255., 1.);\n  return mix(color4, pickingColor4, renderPickingBuffer);\n}\n\nvoid main(void) {\n  // For some reason, need to add one to elevation to show up in untilted mode\n  vec2 projectedCoord[2];\n  project_position_fp64(positionsFP64, projectedCoord);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = projectedCoord[0];\n  vertex_pos_modelspace[1] = projectedCoord[1];\n  vertex_pos_modelspace[2] = heightsFP64;\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 color = vec4(colors.rgb, colors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(pickingColors / 255., 1.);\n\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',
fp64:!0,project64:!0}}},{key:"getModel",value:function(e){return new m.Model(v({gl:e,id:this.props.id},(0,y.assembleShaders)(e,this.getShaders()),{geometry:new m.Geometry({drawMode:this.props.drawContour?m.GL.LINES:m.GL.TRIANGLES}),vertexCount:0,isIndexed:!0}))}},{key:"calculateIndices",value:function(e){var t=this,r=this.state.choropleths.reduce(function(e,t){return[].concat(i(e),[e[e.length-1]+t.reduce(function(e,t){return e+t.length},0)])},[0]),n=this.state.IndexType;if(n===Uint16Array&&r[r.length-1]>65535)throw new Error("Vertex count exceeds browser's limit");var o=this.state.choropleths.map(function(e,n){return t.props.drawContour?l(e).map(function(e){return e+r[n]}):f(e).map(function(e){return e+r[n]})});e.value=new n((0,E.default)(o)),e.target=m.GL.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(e.value.length/e.size)}},{key:"calculatePositionsFP64",value:function(e){var t=(0,E.default)(this.state.choropleths);e.value=new Float32Array(t.length/3*4);for(var r=0;r<t.length/3;r++){var n=(0,b.fp64ify)(t[3*r]),i=p(n,2);e.value[4*r]=i[0],e.value[4*r+1]=i[1];var o=(0,b.fp64ify)(t[3*r+1]),a=p(o,2);e.value[4*r+2]=a[0],e.value[4*r+3]=a[1]}}},{key:"calculateHeightsFP64",value:function(e){var t=(0,E.default)(this.state.choropleths);e.value=new Float32Array(t.length/3*2);for(var r=0;r<t.length/3;r++){var n=(0,b.fp64ify)(t[3*r+2]),i=p(n,2);e.value[2*r]=i[0],e.value[2*r+1]=i[1]}}},{key:"calculateColors",value:function(e){var t=this.props,r=t.data.features,n=t.getColor,i=this.state.choropleths.map(function(e,t){var i=r[e.featureIndex],o=n(i)||S;return isNaN(o[3])&&(o[3]=S[3]),e.map(function(e){return e.map(function(e){return o})})});e.value=new Uint8Array((0,E.default)(i))}},{key:"calculatePickingColors",value:function(e){var t=this,r=this.state.choropleths.map(function(e,r){var n=e.featureIndex,i=t.props.drawContour?t.nullPickingColor():t.encodePickingColor(n);return e.map(function(e){return e.map(function(e){return i})})});e.value=new Uint8Array((0,E.default)(r))}}]),t}(y.Layer),h.layerName="ChoroplethLayer64",d);r.default=R},{"../../..":325,"../../../lib/utils/fp64":355,earcut:369,"geojson-normalize":372,"lodash.flattendeep":404,"luma.gl":428,path:505}],340:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./choropleth-layer-64");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./choropleth-layer-64":339}],341:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(e[0]===t[0]&&e[1]===t[1])return[1,0,0];var r=Math.PI/180,n=r*e[0],i=r*t[0],o=r*e[1],a=r*t[1],s=Math.sin(i-n)*Math.cos(a),u=Math.cos(o)*Math.sin(a)-Math.sin(o)*Math.cos(a)*Math.cos(i-n);return T.vec3.normalize([],[u,0,-s])}function l(e){return e.reduce(function(e,t){return e+t.length},0)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var f,h,d=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},g=e("../../.."),y=e("../../../lib/utils/fp64"),b=e("luma.gl"),m=e("lodash.flattendeep"),w=n(m),E=e("earcut"),x=n(E),T=e("gl-matrix"),O=(e("path"),[180,180,200]),A=[255,255,255],S=.1,I=[40.4406,-79.9959,100],R=[255,255,255],M=1,k=[255,255,255],P=1,j=(h=f=function(e){function t(e){var r=e.opacity,n=void 0===r?1:r,i=e.elevation,u=void 0===i?1:i,c=o(e,["opacity","elevation"]);return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,p({opacity:n,elevation:u},c)))}return u(t,e),v(t,[{key:"initializeState",value:function(){var e=this.state.attributeManager;e.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices},positions:{size:4,update:this.calculatePositions},heights:{size:2,update:this.calculateHeights},normals:{size:3,update:this.calculateNormals},colors:{size:3,update:this.calculateColors}});var t=this.context.gl;this.setState({numInstances:0,model:this.getModel(t)})}},{key:"updateState",value:function(e){var t=e.changeFlags,r=this.state.attributeManager;t.dataChanged&&(this.extractExtrudedChoropleth(),r.invalidateAll());var n=this.props,i=n.elevation,o=n.color,a=n.ambientColor,s=n.pointLightColor,u=n.pointLightLocation,c=n.pointLightAmbientCoefficient,l=n.pointLightAttenuation,f=n.materialSpecularColor,h=n.materialShininess;this.setUniforms({elevation:Number.isFinite(i)?i:1,colors:o||O,uAmbientColor:a||A,uPointLightAmbientCoefficient:c||S,uPointLightLocation:u||I,uPointLightColor:s||R,uPointLightAttenuation:l||M,uMaterialSpecularColor:f||k,uMaterialShininess:h||P})}},{key:"draw",value:function(e){var t=e.uniforms;this.state.model.render(p({},t))}},{key:"pick",value:function(e){_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pick",this).call(this,e);var r=e.info,n=this.decodePickingColor(r.color),i=n>=0?this.props.data.features[n]:null;r.feature=i,r.object=i}},{key:"getShaders",value:function(){return{vs:"// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME extruded-choropleths-layer-vertex-shader\n\n// import MATH_FP64 from '../shaderlib/fp64/math-fp64';\n// import PROJECT from '../shaderlib/project';\n// import LIGHTING from '../shaderlib/lighting';\n\nuniform float opacity;\nuniform vec3 colors;\nuniform float elevation;\n\nuniform vec3 uAmbientColor;\nuniform float uPointLightAmbientCoefficient;\nuniform vec3 uPointLightLocation;\nuniform vec3 uPointLightColor;\nuniform float uPointLightAttenuation;\n\nuniform vec3 uMaterialSpecularColor;\nuniform float uMaterialShininess;\n\nattribute vec4 positions;\nattribute vec2 heights;\nattribute vec3 normals;\n\nvarying vec4 vColor;\n\nvec3 applyLighting(vec3 position_modelspace, vec3 normal_modelspace, vec3 color) {\n\n  vec3 pointLightLocation_modelspace = vec3(project_position(uPointLightLocation));\n  vec3 lightDirection = normalize(pointLightLocation_modelspace - position_modelspace);\n\n  vec3 ambient = uPointLightAmbientCoefficient * color / 255.0 * uAmbientColor / 255.0;\n\n  float diffuseCoefficient = max(dot(normal_modelspace, lightDirection), 0.0);\n  vec3 diffuse = diffuseCoefficient * uPointLightColor / 255. * color / 255.;\n\n  return ambient + uPointLightAttenuation * diffuse;\n}\n\nvoid main(void) {\n  vec2 projected_xy[2];\n  project_position_fp64(positions, projected_xy);\n  vec2 scaled_height = mul_fp64(heights, vec2(projectionPixelsPerUnit.x * elevation, 0.0));\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_xy[0];\n  vertex_pos_modelspace[1] = projected_xy[1];\n  vertex_pos_modelspace[2] = sum_fp64(scaled_height, vec2(1.0, 0.0));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec3 color = applyLighting(\n  \tvec3(\n  \t  vertex_pos_modelspace[0].x,\n  \t  vertex_pos_modelspace[1].x,\n  \t  vertex_pos_modelspace[2].x),\n  \tnormals,\n  \tcolors\n  );\n  vColor = vec4(color, opacity);\n}\n// `;\n",fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* fragment shader for the building-layer */\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n// `;\n',fp64:!0,project64:!0}}},{key:"getModel",value:function(e){if(!e.getExtension("OES_element_index_uint"))throw new Error("Extruded choropleth layer needs 32 bit indices");return e.enable(b.GL.DEPTH_TEST),e.depthFunc(b.GL.LEQUAL),new b.Model(p({gl:e,id:this.props.id},(0,g.assembleShaders)(e,this.getShaders()),{geometry:new b.Geometry({drawMode:this.props.drawWireframe?b.GL.LINES:b.GL.TRIANGLES}),vertexCount:0,isIndexed:!0}))}},{key:"calculatePositions",value:function(e){var t=this,r=this.state.positions;r||(r=(0,w.default)(this.state.groupedVertices.map(function(e){var r=Array.prototype.concat.apply([],e),n=r.map(function(e){return[e[0],e[1],0]});return t.props.drawWireframe?[r,n]:[r,r,r,n,n]}))),e.value=new Float32Array(r.length/3*4);for(var n=0;n<r.length/3;n++){var i=(0,y.fp64ify)(r[3*n+0]),o=d(i,2);e.value[4*n+0]=o[0],e.value[4*n+1]=o[1];var a=(0,y.fp64ify)(r[3*n+1]),s=d(a,2);e.value[4*n+2]=s[0],e.value[4*n+3]=s[1]}}},{key:"calculateHeights",value:function(e){var t=this,r=this.state.positions;r||(r=(0,w.default)(this.state.groupedVertices.map(function(e){var r=Array.prototype.concat.apply([],e),n=r.map(function(e){return[e[0],e[1],0]});return t.props.drawWireframe?[r,n]:[r,r,r,n,n]}))),e.value=new Float32Array(r.length/3*2);for(var n=0;n<r.length/3;n++){var i=(0,y.fp64ify)(r[3*n+2]+.1),o=d(i,2);e.value[2*n+0]=o[0],e.value[2*n+1]=o[1]}}},{key:"calculateNormals",value:function(e){var t=this,r=[0,1,0],n=this.state.groupedVertices.map(function(e,n){var i=new Array(l(e)).fill(r),o=e.map(function(e){return t.calculateSideNormals(e)}),a=o.map(function(e){return e[0]}),s=o.map(function(e){return e[1]});return t.props.drawWireframe?[i,i]:[i,a,s,a,s]});e.value=new Float32Array((0,w.default)(n))}},{key:"calculateSideNormals",value:function(e){for(var t=e.length,r=[],n=0;n<t-1;n++){var i=c(e[n],e[n+1]);r.push(i)}return[[].concat(r,[r[0]]),[r[0]].concat(r)]}},{key:"calculateIndices",value:function(e){var t=this,r=this.props.drawWireframe?2:5,n=this.state.groupedVertices.reduce(function(e,t){return[].concat(i(e),[e[e.length-1]+l(t)*r])},[0]),o=this.state.groupedVertices.map(function(e,r){return t.props.drawWireframe?t.calculateContourIndices(e,n[r]):t.calculateSurfaceIndices(e,n[r])});e.value=new Uint32Array((0,w.default)(o)),e.target=b.GL.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(e.value.length/e.size)}},{key:"calculateColors",value:function(e){var t=this,r=this.state.groupedVertices.map(function(e,r){var n=t.props.color,i=Array.isArray(n)?n[0]:n,o=Array.isArray(n)?n[n.length-1]:n,a=l(e),s=new Array(a).fill(o),u=new Array(a).fill(i);return t.props.drawWireframe?[s,u]:[s,s,s,u,u]});e.value=new Float32Array((0,w.default)(r))}},{key:"extractExtrudedChoropleth",value:function(){var e=this,t=this.props.data;this.state.buildings=[];var r=!0,n=!1,o=void 0;try{for(var a,s=function(){var t,r=a.value,n=r.properties,o=r.geometry,s=o.coordinates,u=o.type;switch(n.height||(n.height=1e3*Math.random()),u){case"MultiPolygon":var c=s.map(function(e){return{coordinates:e,properties:n}});(t=e.state.buildings).push.apply(t,i(c));break;case"Polygon":e.state.buildings.push({coordinates:s,properties:n})}},u=t.features[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s()}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}this.state.groupedVertices=this.state.buildings.map(function(e){return e.coordinates.map(function(t){return t.map(function(t){return[t[0],t[1],e.properties.height||10]})})})}},{key:"calculateContourIndices",value:function(e,t){var r=l(e);return e.map(function(e){for(var n=[t],i=e.length,o=1;o<i-1;o++)n.push(o+t,o+t);n.push(t);for(var a=0;a<i-1;a++)n.push(a+t,a+r+t);return t+=i,n})}},{key:"calculateSurfaceIndices",value:function(e,t){function r(e){return a.map(function(r){return e+r[0]+n*r[1]+t})}var n=l(e),o=null,a=[[0,1],[0,3],[1,2],[1,2],[0,3],[1,4]];e.length>1&&(o=e.reduce(function(e,t){return[].concat(i(e),[e[e.length-1]+t.length])},[0]).slice(1,e.length));var s=(0,x.default)((0,w.default)(e),o,3).map(function(e){return e+t}),u=e.map(function(e){for(var n=e.length,o=[],a=0;a<n-1;a++)o.push.apply(o,i(r(a)));return t+=n,o});return[s,u]}}]),t}(g.Layer),f.layerName="ExtrudedChoroplethLayer64",h);r.default=j},{"../../..":325,"../../../lib/utils/fp64":355,earcut:369,"gl-matrix":385,"lodash.flattendeep":404,"luma.gl":428,path:505}],342:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./extruded-choropleth-layer-64");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./extruded-choropleth-layer-64":341}],343:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=e("./scatterplot-layer"),o=n(i),a=e("./arc-layer"),s=n(a),u=e("./choropleth-layer"),c=n(u),l=e("./extruded-choropleth-layer"),f=n(l),h=e("./line-layer"),d=n(h);t.exports={ScatterplotLayer64:o.default,ArcLayer64:s.default,ChoroplethLayer64:c.default,ExtrudedChoroplethLayer64:f.default,LineLayer64:d.default}},{"./arc-layer":338,"./choropleth-layer":340,"./extruded-choropleth-layer":342,"./line-layer":344,"./scatterplot-layer":346}],344:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./line-layer-64");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./line-layer-64":345}],345:[function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,u,c=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("../../.."),d=e("../../../lib/utils/fp64"),p=e("luma.gl"),v=(e("path"),[0,255,0,255]),_=function(e){return e.sourcePosition},g=function(e){return e.targetPosition},y=function(e){return e.color||v},b=(u=s=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.getSourcePosition,a=void 0===r?_:r,s=e.getTargetPosition,u=void 0===s?g:s,c=e.getColor,f=void 0===c?y:c,h=e.strokeWidth,d=void 0===h?1:h,p=n(e,["getSourcePosition","getTargetPosition","getColor","strokeWidth"]);return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l({strokeWidth:d,getSourcePosition:a,getTargetPosition:u,getColor:f},p)))}return a(t,e),f(t,[{key:"initializeState",value:function(){var e=this.context.gl;this.setState({model:this.createModel(e)});var t=this.state.attributeManager;t.addInstanced({instanceSourcePositionsFP64:{size:4,update:this.calculateInstanceSourcePositions},instanceTargetPositionsFP64:{size:4,update:this.calculateInstanceTargetPositions},instanceElevations:{size:2,update:this.calculateInstanceElevations},instanceColors:{size:4,type:p.GL.UNSIGNED_BYTE,update:this.calculateInstanceColors}})}},{key:"draw",value:function(e){var t=e.uniforms,r=this.context.gl,n=this.screenToDevicePixels(this.props.strokeWidth);r.lineWidth(n),this.state.model.render(t),r.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME line-layer-64-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourcePositionsFP64;\nattribute vec4 instanceTargetPositionsFP64;\nattribute vec2 instanceElevations;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  // Position\n  vec2 projectedSourceCoord[2];\n  project_position_fp64(instanceSourcePositionsFP64, projectedSourceCoord);\n  vec2 projectedTargetCoord[2];\n  project_position_fp64(instanceTargetPositionsFP64, projectedTargetCoord);\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec2 mixed_temp[2];\n\n  vec2_mix_fp64(projectedSourceCoord, projectedTargetCoord, segmentIndex, mixed_temp);\n\n  float mixedElevation =\n    mix(instanceElevations.x, instanceElevations.y, segmentIndex);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = mixed_temp[0];\n  vertex_pos_modelspace[1] = mixed_temp[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(mixedElevation), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  // Color\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n#define SHADER_NAME line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',fp64:!0,project64:!0}}},{key:"createModel",value:function(e){var t=[0,0,0,1,1,1];return new p.Model(l({gl:e,id:this.props.id},(0,h.assembleShaders)(e,this.getShaders()),{geometry:new p.Geometry({drawMode:p.GL.LINE_STRIP,positions:new Float32Array(t)}),isInstanced:!0}))}},{key:"calculateInstanceSourcePositions",value:function(e){var t=this.props,r=t.data,n=t.getSourcePosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,v=n(p),_=(0,d.fp64ify)(v[0]),g=c(_,2);i[a+0]=g[0],i[a+1]=g[1];var y=(0,d.fp64ify)(v[1]),b=c(y,2);i[a+2]=b[0],i[a+3]=b[1],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateInstanceTargetPositions",value:function(e){var t=this.props,r=t.data,n=t.getTargetPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,v=n(p),_=(0,d.fp64ify)(v[0]),g=c(_,2);i[a+0]=g[0],i[a+1]=g[1];var y=(0,d.fp64ify)(v[1]),b=c(y,2);i[a+2]=b[0],i[a+3]=b[1],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateInstanceElevations",value:function(e){var t=this.props,r=t.data,n=t.getSourcePosition,i=t.getTargetPosition,o=e.value,a=e.size,s=0,u=!0,c=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value,p=n(d),v=i(d);o[s+0]=p[2]||0,o[s+1]=v[2]||0,s+=a}}catch(e){c=!0,l=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,r=t.data,n=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h);i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],i[a+3]=isNaN(d[3])?v[3]:d[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),t}(h.Layer),s.layerName="LineLayer64",u);r.default=b},{"../../..":325,"../../../lib/utils/fp64":355,"luma.gl":428,path:505}],346:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./scatterplot-layer-64");Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./scatterplot-layer-64":347}],347:[function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s,u,c=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("../../.."),d=e("../../../lib/utils/fp64"),p=e("luma.gl"),v=(e("path"),[255,0,255,255]),_=function(e){return e.position},g=function(e){return e.radius},y=function(e){return e.color||v},b=(u=s=function(e){function t(e){var r=e.getPosition,a=void 0===r?_:r,s=e.getRadius,u=void 0===s?g:s,c=e.getColor,f=void 0===c?y:c,h=e.radius,d=void 0===h?30:h,p=e.radiusMinPixels,v=void 0===p?0:p,b=e.radiusMaxPixels,m=void 0===b?Number.MAX_SAFE_INTEGER:b,w=e.drawOutline,E=void 0!==w&&w,x=e.strokeWidth,T=void 0===x?1:x,O=n(e,["getPosition","getRadius","getColor","radius","radiusMinPixels","radiusMaxPixels","drawOutline","strokeWidth"]);return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l({getPosition:a,getRadius:u,getColor:f,radius:d,drawOutline:E,strokeWidth:T,radiusMinPixels:v,radiusMaxPixels:m},O)))}return a(t,e),f(t,[{key:"initializeState",value:function(){var e=this.context.gl,t=this.state.attributeManager;this.setState({model:this.getModel(e)}),t.addInstanced({instancePositionsFP64:{size:4,update:this.calculateInstancePositions},instanceRadius:{size:1,update:this.calculateInstanceRadius},layerHeight:{size:2,update:this.calculateLayerHeight},instanceColors:{size:4,type:p.GL.UNSIGNED_BYTE,update:this.calculateInstanceColors}})}},{key:"draw",value:function(e){var t=e.uniforms;this.calculateZoomRadius(),this.state.model.render(l({},t,{radiusMinPixels:this.props.radiusMinPixels,radiusMaxPixels:this.props.radiusMaxPixels,zoomRadiusFP64:this.state.zoomRadiusFP64}))}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-64-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instancePositionsFP64;\nattribute vec2 layerHeight;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Only one-dimensional arrays may be declared in GLSL ES 1.0. specs p.24\nuniform float opacity;\nuniform vec2 zoomRadiusFP64;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  // For some reason, need to add one to elevation to show up in untilted mode\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositionsFP64, projected_coord_xy);\n\n  vec2 pos_mul_radius[4];\n  vec4_fp64(vec4(positions * instanceRadius, 0.0), pos_mul_radius);\n\n  vec2 vertex_pos_localspace[4];\n  vec4_scalar_mul_fp64(pos_mul_radius, zoomRadiusFP64, vertex_pos_localspace);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vertex_pos_localspace[0], projected_coord_xy[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vertex_pos_localspace[1], projected_coord_xy[1]);\n  vertex_pos_modelspace[2] = sum_fp64(vertex_pos_localspace[2], vec2(layerHeight.x + 1.0, layerHeight.y));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n\n',
fp64:!0,project64:!0}}},{key:"getModel",value:function(e){for(var t=16,r=[],n=0;n<t;n++)r.push(Math.cos(2*Math.PI*n/t),Math.sin(2*Math.PI*n/t),0);return new p.Model(l({gl:e,id:this.props.id},(0,h.assembleShaders)(e,this.getShaders()),{geometry:new p.Geometry({drawMode:p.GL.TRIANGLE_FAN,positions:new Float32Array(r)}),isInstanced:!0}))}},{key:"calculateInstancePositions",value:function(e){var t=this.props,r=t.data,n=t.getPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,v=n(p),_=(0,d.fp64ify)(v[0]),g=c(_,2);i[a+0]=g[0],i[a+1]=g[1];var y=(0,d.fp64ify)(v[1]),b=c(y,2);i[a+2]=b[0],i[a+3]=b[1],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateLayerHeight",value:function(e){var t=this.props,r=t.data,n=t.getPosition,i=e.value,o=e.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=r[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,v=n(p),_=(0,d.fp64ify)(v[2]),g=c(_,2);i[a+0]=g[0],i[a+1]=g[1],a+=o}}catch(e){u=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateInstanceRadius",value:function(e){var t=this.props,r=t.data,n=t.getRadius,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h)||1;i[a+0]=d,a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceColors",value:function(e){var t=this.props,r=t.data,n=t.getColor,i=e.value,o=e.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=n(h);i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],i[a+3]=isNaN(d[3])?v[3]:d[3],a+=o}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateZoomRadius",value:function(){var e=this.projectFlat([-122,37.5]),t=this.projectFlat([-122,37.5002]),r=e[0]-t[0],n=e[1]-t[1],i=Math.max(Math.sqrt(r*r+n*n),2);this.state.zoomRadiusFP64=(0,d.fp64ify)(i)}}]),t}(h.Layer),s.layerName="ScatterplotLayer64",u);r.default=b},{"../../..":325,"../../../lib/utils/fp64":355,"luma.gl":428,path:505}],348:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("luma.gl"),l=e("./utils"),f=e("assert"),h=n(f),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=void 0===r?"attribute-manager":r;i(t,["id"]);o(this,e),this.id=n,this.attributes={},this.allocedInstances=-1,this.needsRedraw=!0,this.userData={},this.onUpdateStart=a,this.onUpdateEnd=a,this.onLog=this._defaultLog,Object.seal(this)}return u(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t)}},{key:"invalidate",value:function(e){var t=this.attributes,r=t[e];if(!r){var n="invalidating non-existent attribute "+e+" for "+this.id+"\n";n+="Valid attributes: "+Object.keys(t).join(", "),(0,h.default)(r,n)}r.needsUpdate=!0,this.onLog(1,"invalidated attribute "+e+" for "+this.id)}},{key:"invalidateAll",value:function(){var e=this.attributes;for(var t in e)this.invalidate(t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.numInstances,n=e.buffers,o=void 0===n?{}:n,a=e.props,s=void 0===a?{}:a,u=e.context,c=void 0===u?{}:u,l=i(e,["data","numInstances","buffers","props","context"]);this._checkExternalBuffers(o,l),this._setExternalBuffers(o),this._analyzeBuffers({numInstances:r})&&(this.onUpdateStart(this.id),this._updateBuffers({numInstances:r,data:t,props:s,context:c}),this.onUpdateEnd(this.id))}},{key:"setLogFunctions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,r=e.onUpdateStart,n=e.onUpdateEnd;this.onLog=void 0!==t?t:this.onLog,this.onUpdateStart=void 0!==r?r:this.onUpdateStart,this.onUpdateEnd=void 0!==n?n:this.onUpdateEnd}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(e){var t=e.clearChangedFlags,r=void 0!==t&&t,n=this.attributes,i={};for(var o in n){var a=n[o];a.changed&&(a.changed=a.changed&&!r,i[o]=a)}return i}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,r=void 0!==t&&t,n=this.needsRedraw;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!r,n}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"addDynamic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t)}},{key:"addInstanced",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t,{instanced:1})}},{key:"_defaultLog",value:function(e,t){l.log.log(e,t)}},{key:"_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};for(var i in e){i in t&&(e[i]=s({},e[i],t[i]));var o=e[i];this._validate(i,o);var a=s({target:void 0,isIndexed:!1,userData:{}},o,{isExternalBuffer:!1,needsAlloc:!1,needsUpdate:!1,changed:!1,size:o.size,value:o.value||null},r);Object.seal(a),this.attributes[i]=a}Object.assign(this.attributes,n)}},{key:"_validate",value:function(e,t){(0,h.default)("number"==typeof t.size,"Attribute definition for "+e+" missing size"),(0,h.default)("function"==typeof t.update||t.noAlloc,"Attribute updater for "+e+" missing update method")}},{key:"_checkExternalBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.attributes;for(var n in e){var i=r[n];if(!i&&!t.ignoreUnknownAttributes)throw new Error("Unknown attribute prop "+n)}}},{key:"_setExternalBuffers",value:function(e){var t=this.attributes,r=this.numInstances;for(var n in t){var i=t[n],o=e[n];if(i.isExternalBuffer=!1,o){if(!(o instanceof Float32Array))throw new Error("Attribute properties must be of type Float32Array");if(i.auto&&o.length<=r*i.size)throw new Error("Attribute prop array must match length and size");i.isExternalBuffer=!0,i.needsUpdate=!1,i.value!==o&&(i.value=o,i.changed=!0,this.needsRedraw=!0)}}}},{key:"_analyzeBuffers",value:function(e){var t=e.numInstances,r=this.attributes;(0,h.default)(void 0!==t,"numInstances not defined");var n=!1;for(var i in r){var o=r[i];if(!o.isExternalBuffer){var a=null===o.value||o.value.length/o.size<t;a&&o.update&&(o.needsAlloc=!0,n=!0),o.needsUpdate&&(n=!0)}}return n}},{key:"_updateBuffers",value:function(e){var t=e.numInstances,r=e.data,n=e.props,i=e.context,o=this.attributes,a=Math.max(t,1);for(var s in o){var u=o[s];if(u.needsAlloc){var l=(0,c.glArrayFromType)(u.type||c.GL.FLOAT);u.value=new l(u.size*a),this.onLog(2,this.id+":"+s+" allocated "+a),u.needsAlloc=!1,u.needsUpdate=!0}if(u.needsUpdate){var f=u.update;f?(this.onLog(2,this.id+":"+s+" updating "+t),f.call(i,u,{data:r,props:n,numInstances:t})):this.onLog(2,this.id+":"+s+" missing update function"),u.needsUpdate=!1,u.changed=!0,this.needsRedraw=!0}}this.allocedInstances=a}}]),e}();r.default=d},{"./utils":356,assert:2,"luma.gl":428}],349:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.LayerManager=r.AttributeManager=r.Layer=void 0;var i=e("./layer");Object.defineProperty(r,"Layer",{enumerable:!0,get:function(){return n(i).default}});var o=e("./attribute-manager");Object.defineProperty(r,"AttributeManager",{enumerable:!0,get:function(){return n(o).default}});var a=e("./layer-manager");Object.defineProperty(r,"LayerManager",{enumerable:!0,get:function(){return n(a).default}});var s=e("./utils/object-iterator");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})}),e("./init")},{"./attribute-manager":348,"./init":350,"./layer":352,"./layer-manager":351,"./utils/object-iterator":358}],350:[function(e,t,r){"use strict";var n=e("../../package.json"),i="set deck.log.priority=2 to trace attribute updates";console.log("deck.gl "+n.version+" - "+i)},{"../../package.json":368}],351:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e instanceof u.default?""+e:e?"invalid layer":"null layer"}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./layer"),u=n(s),c=e("../viewport"),l=e("./utils"),f=e("assert"),h=n(f),d=e("./pick-layers"),p=e("luma.gl"),v=function(){function e(t){var r=t.gl;i(this,e),this.prevLayers=[],this.layers=[],this.drewLayers=!1,this.oldContext={},this.context={gl:r,uniforms:{},viewport:null,viewportChanged:!0,pickingFBO:null},this.redrawNeeded=!0,Object.seal(this.context)}return a(e,[{key:"setContext",value:function(e){var t=e.width,r=e.height,n=e.latitude,i=e.longitude,o=e.zoom,a=e.pitch,s=e.bearing,u=e.altitude,f=this.context.viewport,h=!f||t!==f.width||r!==f.height||n!==f.latitude||i!==f.longitude||o!==f.zoom||s!==f.bearing||a!==f.pitch||u!==f.altitude;if(h||!this.context.viewport){Object.assign(this.oldContext,this.context);var d=new c.Viewport({width:t,height:r,latitude:n,longitude:i,zoom:o,pitch:a,bearing:s,altitude:u,tileSize:512});this.context.viewport=d,this.context.viewportChanged=h,this.context.uniforms={},(0,l.log)(4,d,n,i,o)}return this}},{key:"updateLayers",value:function(e){var t=e.newLayers;(0,h.default)(this.context.viewport,"LayerManager.updateLayers: viewport not set"),t=t.filter(function(e){return null!==e});var r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;s.context=this.context}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}this.prevLayers=this.layers;var u=this._updateLayers({oldLayers:this.prevLayers,newLayers:t}),c=u.error,l=u.generatedLayers;if(this.layers=l,c)throw c;return this}},{key:"drawLayers",value:function(){(0,h.default)(this.context.viewport,"LayerManager.drawLayers: viewport not set");var e=this.context.uniforms,t=0,r=!0,n=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;s.props.visible&&(s.drawLayer({uniforms:e,layerIndex:t}),t++)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return this}},{key:"pickLayer",value:function(e){var t=e.x,r=e.y,n=e.mode,i=this.context,o=i.gl,a=i.uniforms;return null!==this.context.pickingFBO&&o.canvas.width===this.context.pickingFBO.width&&o.canvas.height===this.context.pickingFBO.height||(this.context.pickingFBO=new p.FramebufferObject(o,{width:o.canvas.width,height:o.canvas.height})),(0,d.pickLayers)(o,{x:t,y:r,uniforms:a,layers:this.layers,mode:n,pickingFBO:this.context.pickingFBO})}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,r=void 0!==t&&t;if(!this.context.viewport)return!1;var n=!1;if(0===this.layers.length&&this.drewLayers)return n=!0,!0;this.redrawNeeded&&(this.redrawNeeded=!1,n=!0);var i=!0,o=!1,a=void 0;try{for(var s,u=this.layers[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;n=n||c.getNeedsRedraw({clearRedrawFlags:r}),this.drewLayers=!0}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return n}},{key:"_updateLayers",value:function(e){var t=e.oldLayers,r=e.newLayers,n={},i=!0,a=!1,s=void 0;try{for(var u,c=t[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value;n[f.id]?l.log.once(0,"Multipe old layers with same id "+o(f)):n[f.id]=f}}catch(e){a=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}var h=[],d=this._matchSublayers({newLayers:r,oldLayerMap:n,generatedLayers:h}),p=this._finalizeOldLayers(t),v=d||p;return{error:v,generatedLayers:h}}},{key:"_matchSublayers",value:function(e){var t=e.newLayers,r=e.oldLayerMap,n=e.generatedLayers;t=t.filter(function(e){return null!==e});var i=null,a=!0,s=!1,u=void 0;try{for(var c,f=t[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=c.value;h.context=this.context;try{var d=r[h.id];r[h.id]=null,null===d&&l.log.once(0,"Multipe new layers with same id "+o(h)),d?((0,l.log)(3,"matched "+o(h),d,"=>",h),this._transferLayerState(d,h),this._updateLayer(h)):this._initializeNewLayer(h),n.push(h);var p=h.renderLayers();p&&(p=Array.isArray(p)?p:[p],this._matchSublayers({newLayers:p,oldLayerMap:r,generatedLayers:n}))}catch(e){l.log.once(0,"deck.gl error during matching of "+o(h)+" "+e,e),i=i||e}}}catch(e){s=!0,u=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}return i}},{key:"_transferLayerState",value:function(e,t){var r=e.state,n=e.props;(0,h.default)(r,"deck.gl sanity check - Matching layer has no state"),(0,h.default)(e!==t,"deck.gl sanity check - Matching layer is same"),t.state=r,r.layer=t,r.model&&(r.model.userData.layer=t),t.oldProps=n,e.state=null}},{key:"_finalizeOldLayers",value:function(e){var t=null,r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;s.state&&(t=t||this._finalizeLayer(s))}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return t}},{key:"_initializeNewLayer",value:function(e){var t=null;if(!e.state){(0,l.log)(1,"initializing "+o(e));try{e.initializeLayer({oldProps:{},props:e.props,oldContext:this.oldContext,context:this.context,changeFlags:e.diffProps({},e.props,this.context)})}catch(r){l.log.once(0,"deck.gl error during initialization of "+o(e)+" "+r,r),t=t||r}e.state&&(e.state.layer=e),e.state&&e.state.model&&(e.state.model.userData.layer=e)}return t}},{key:"_updateLayer",value:function(e){var t=e.oldProps,r=e.props,n=null;if(t){try{e.updateLayer({oldProps:t,props:r,context:this.context,oldContext:this.oldContext,changeFlags:e.diffProps(t,e.props,this.context)})}catch(t){l.log.once(0,"deck.gl error during update of "+o(e),t),n=t}(0,l.log)(2,"updating "+o(e))}return n}},{key:"_finalizeLayer",value:function(e){var t=null,r=e.state;if(r){try{e.finalizeLayer()}catch(r){l.log.once(0,"deck.gl error during finalization of "+o(e),r),t=r}e.state=null,(0,l.log)(1,"finalizing "+o(e))}return t}}]),e}();r.default=v},{"../viewport":365,"./layer":352,"./pick-layers":353,"./utils":356,assert:2,"luma.gl":428}],352:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./attribute-manager"),l=n(c),f=e("luma.gl"),h=e("./utils"),d=e("assert"),p=n(d),v={data:[],dataIterator:null,dataComparator:null,numInstances:void 0,visible:!0,pickable:!1,opacity:.8,onHover:function(){},onClick:function(){},getValue:function(e){return e},updateTriggers:{}},_=0,g=function(){function e(t){o(this,e),t=s({},v,t,{data:t.data||[],id:t.id||this.constructor.layerName}),this.id=t.id,this.count=_++,this.props=t,this.oldProps=null,this.state=null,this.context=null,Object.seal(this),this.validateRequiredProp("id",function(e){return"string"==typeof e}),this.validateRequiredProp("data"),t.data&&((0,h.addIterator)(t.data),t.data[Symbol.iterator]||h.log.once(0,"data prop must have iterator")),this._validateDeprecatedProps()}return u(e,[{key:"toString",value:function(){var e=this.constructor.name;return e!==this.props.id?"<"+e+":'"+this.props.id+"'>":"<"+e+">"}},{key:"initializeState",value:function(){throw new Error("Layer "+this+" has not defined initializeState")}},{key:"finalizeState",value:function(){}},{key:"shouldUpdateState",value:function(e){var t=(e.oldProps,e.props,e.oldContext,e.context,e.changeFlags);return t.somethingChanged}},{key:"updateState",value:function(e){var t=(e.oldProps,e.props,e.oldContext,e.context,e.changeFlags);t.dataChanged&&this.state.attributeManager&&this.state.attributeManager.invalidateAll()}},{key:"renderLayers",value:function(){return null}},{key:"draw",value:function(e){var t=e.uniforms,r=void 0===t?{}:t;this.state.model&&this.state.model.render(r)}},{key:"pick",value:function(e){var t=e.info,r=e.uniforms,n=e.pickEnableUniforms,i=e.pickDisableUniforms,o=e.mode,s=this.context.gl,u=this.state.model;if(u){u.setUniforms(n),u.render(r),u.setUniforms(i);var c=a(t.devicePixel,2),l=c[0],h=c[1],d=new Uint8Array(4);if(s.readPixels(l,h,1,1,f.GL.RGBA,f.GL.UNSIGNED_BYTE,d),t.index=this.decodePickingColor(d),t.color=d,"hover"===o){var p=new Float32Array(3);p[0]=d[0],p[1]=d[1],p[2]=d[2],this.setUniforms({selectedPickingColor:p})}}}},{key:"setState",value:function(e){Object.assign(this.state,e),this.state.needsRedraw=!0}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.state&&(this.state.needsRedraw=e)}},{key:"project",value:function(e){var t=this.context.viewport;return(0,p.default)(Array.isArray(e),"Layer.project needs [lng,lat]"),t.project(e)}},{key:"unproject",value:function(e){var t=this.context.viewport;return(0,p.default)(Array.isArray(e),"Layer.unproject needs [x,y]"),t.unproject(e)}},{key:"projectFlat",value:function(e){var t=this.context.viewport;return(0,p.default)(Array.isArray(e),"Layer.project needs [lng,lat]"),t.projectFlat(e)}},{key:"unprojectFlat",value:function(e){var t=this.context.viewport;return(0,p.default)(Array.isArray(e),"Layer.unproject needs [x,y]"),t.unprojectFlat(e)}},{key:"screenToDevicePixels",value:function(e){var t="undefined"!=typeof window?window.devicePixelRatio:1;return e*t}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){return[(e+1)%256,Math.floor((e+1)/256)%256,Math.floor((e+1)/256/256)%256]}},{key:"decodePickingColor",value:function(e){(0,p.default)(e instanceof Uint8Array);var t=a(e,3),r=t[0],n=t[1],i=t[2],o=r+256*n+65536*i-1;return o}},{key:"calculateInstancePickingColors",value:function(e,t){for(var r=t.numInstances,n=e.value,i=e.size,o=0;o<r;o++){var a=this.encodePickingColor(o);n[o*i+0]=a[0],n[o*i+1]=a[1],n[o*i+2]=a[2]}}},{key:"getFirstObject",value:function(){var e=this.props.data,t=!0,r=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;return a}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return null}},{key:"getNumInstances",value:function(e){if(e=e||this.props,this.state&&void 0!==this.state.numInstances)return this.state.numInstances;if(void 0!==e.numInstances)return e.numInstances;var t=e,r=t.data;if(r&&"function"==typeof r.count)return r.count();if(r&&void 0!==r.size)return r.size;if(r&&void 0!==r.length)return r.length;throw new Error("Could not deduce numInstances")}},{key:"initializeLayer",value:function(e){(0,p.default)(this.context.gl,"Layer context missing gl"),(0,p.default)(!this.state,"Layer missing state"),this.state={},this.setState({attributeManager:new l.default({id:this.props.id}),model:null,needsRedraw:!0,dataChanged:!0}),this.state.attributeManager.setLogFunctions(this.props);var t=this.state.attributeManager;t.addInstanced({instancePickingColors:{type:f.GL.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.initializeState(),this.updateState(e),this._updateAttributes(this.props),this._updateBaseUniforms();var r=this.state.model;r&&(r.setInstanceCount(this.getNumInstances()),r.id=this.props.id,r.program.id=this.props.id+"-program",r.geometry.id=this.props.id+"-geometry",r.setAttributes(t.getAttributes()))}},{key:"updateLayer",value:function(t){this.shouldUpdate&&h.log.once(0,"deck.gl v3 shouldUpdate deprecated. Use shouldUpdateState in "+this);var r=this.shouldUpdateState(t);if(r){var n=this.willReceiveProps&&this.willReceiveProps!==e.prototype.willReceiveProps;if(n){h.log.once(0,"deck.gl v3 willReceiveProps deprecated. Use updateState in "+this);var i=t.oldProps,o=t.props,a=t.changeFlags;this.setState(a),this.willReceiveProps(i,o,a),this.setState({dataChanged:!1,viewportChanged:!1})}this.updateState(t),this._updateAttributes(t.newProps),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())}}},{key:"finalizeLayer",value:function(){this.finalizeState()}},{key:"drawLayer",value:function(e){var t=e.uniforms,r=void 0===t?{}:t,n=e.layerIndex,i=void 0===n?0:n;(0,p.default)(this.context.viewport,"Layer missing context.viewport");var o=this.context.viewport.getUniforms(this.props);r=s({},r,o,{layerIndex:i}),this.draw({uniforms:r})}},{key:"pickLayer",value:function(e){var t=e.uniforms,r=void 0===t?{}:t,n=i(e,["uniforms"]),o=this.context.viewport.getUniforms(this.props);return r=s({},r,o,{renderPickingBuffer:!0}),this.pick(s({uniforms:r},n))}},{key:"diffProps",value:function(e,t,r){var n=(0,h.compareProps)({newProps:t,oldProps:e,ignoreProps:{data:null,updateTriggers:null}}),i=this._diffDataProps(e,t),o=Boolean(n),a=Boolean(i),s=r.viewportChanged,u=o||a||s;return a?h.log.log(1,"dataChanged: "+a):this._diffUpdateTriggers(e,t),{propsChanged:o,dataChanged:a,viewportChanged:s,somethingChanged:u,reason:i||n}}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,r=void 0!==t&&t;if(!this.state)return!1;var n=!1;n=n||this.state.needsRedraw,this.state.needsRedraw=this.state.needsRedraw&&!r;var i=this.state,o=i.attributeManager,a=i.model;return n=n||o&&o.getNeedsRedraw({clearRedrawFlags:r}),n=n||a&&a.getNeedsRedraw({clearRedrawFlags:r})}},{key:"_diffDataProps",value:function(e,t){var r=t.dataComparator;if(r){if(!r(t.data,e.data))return"Data comparator detected a change"}else if(t.data!==e.data)return"A new data container was supplied";return null}},{key:"_diffUpdateTriggers",value:function(e,t){var r=this.state.attributeManager;if(!r)return!1;var n=!1;for(var i in t.updateTriggers){var o=e.updateTriggers[i],a=t.updateTriggers[i],s=(0,h.compareProps)({oldProps:o,newProps:a});s&&("all"===i?(h.log.log(1,"updateTriggers invalidating all attributes: "+s),r.invalidateAll(),n=!0):(h.log.log(1,"updateTriggers invalidating attribute "+i+": "+s),r.invalidate(i),n=!0))}return n}},{key:"validateRequiredProp",value:function(e,t){var r=this.props[e];if(void 0===r)throw new Error("Property "+e+" undefined in layer "+this);if(t&&!t(r))throw new Error("Bad property "+e+" in layer "+this)}},{key:"_updateAttributes",value:function(e){var t=this.state,r=t.attributeManager,n=t.model;if(r){var i=this.getNumInstances(e);if(r.update({numInstances:i,bufferMap:e,context:this,ignoreUnknownAttributes:!0}),n){var o=r.getChangedAttributes({clearChangedFlags:!0});n.setAttributes(o)}}}},{key:"_updateBaseUniforms",value:function(){this.setUniforms({opacity:Math.pow(this.props.opacity,1/2.2),ONE:1})}},{key:"willReceiveProps",value:function(){}},{key:"setUniforms",value:function(e){this.state.model&&this.state.model.setUniforms(e),this.state.needsRedraw=!0,(0,h.log)(3,"layer.setUniforms",e)}},{key:"_validateDeprecatedProps",value:function(){void 0!==this.props.isPickable&&h.log.once(0,"No isPickable prop in deckgl v3 - use pickable instead");var e=void 0!==this.props.latitude||void 0!==this.props.longitude||void 0!==this.props.zoom||void 0!==this.props.pitch||void 0!==this.props.bearing;e&&h.log.once(0,"deck.gl v3 no longer needs viewport props in Layer "+this)}}]),e}();r.default=g},{"./attribute-manager":348,"./utils":356,assert:2,"luma.gl":428}],353:[function(e,t,r){"use strict";function n(e,t){var r=t.layers,n=t.pickingFBO,a=t.uniforms,s=void 0===a?{}:a,u=t.x,c=t.y,l=t.mode,f="undefined"!=typeof window?window.devicePixelRatio:1,h=u*f,d=e.canvas.height-c*f,p=[];(0,o.glContextWithState)(e,{frameBuffer:n,framebuffer:n,scissorTest:{x:h,y:d,w:1,h:1}},function(){for(var t=0,n=r.length-1;n>=0;--n){var a=r[n];if(a.props.visible&&a.props.pickable){e.clear(o.GL.COLOR_BUFFER_BIT|o.GL.DEPTH_BUFFER_BIT);var v=i({layer:a,pixel:[u,c],devicePixel:[h,d],pixelRatio:f});a.pickLayer({info:v,uniforms:s,pickEnableUniforms:{renderPickingBuffer:1,pickingEnabled:1},pickDisableUniforms:{renderPickingBuffer:0,pickingEnabled:0},deviceX:h,deviceY:d,mode:l}),v.index>=0&&(v.picked=!0,v.zOrder=t++,Array.isArray(a.props.data)&&(v.object=a.props.data[v.index])),p.push(v)}}});var v=[],_=!0,g=!1,y=void 0;try{for(var b,m=p[Symbol.iterator]();!(_=(b=m.next()).done);_=!0){var w=b.value,E=null;switch(l){case"click":E=w.layer.props.onClick(w);break;case"hover":E=w.layer.props.onHover(w);break;default:throw new Error("unknown pick type")}E||v.push(w)}}catch(e){g=!0,y=e}finally{try{!_&&m.return&&m.return()}finally{if(g)throw y}}return v}function i(e){var t=(e.info,e.layer),r=e.pixel,n=e.devicePixel,i=e.pixelRatio;return{layer:t,index:-1,picked:!1,x:r[0],y:r[1],pixel:r,devicePixel:n,pixelRatio:i,lngLat:t.unproject(r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.pickLayers=n;var o=e("luma.gl")},{"luma.gl":428}],354:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.oldProps,r=e.newProps,n=e.ignoreProps,i=void 0===n?{}:n;if((0,u.default)(void 0!==t&&void 0!==r,"compareProps args"),t===r)return null;if("object"!==("undefined"==typeof t?"undefined":a(t))||null===t)return"old props is not an object";if("object"!==("undefined"==typeof r?"undefined":a(r))||null===r)return"new props is not an object";for(var o in t)if(!(o in i)){if(!r.hasOwnProperty(o))return"prop "+o+" dropped: "+t[o]+" -> (undefined)";if(t[o]!==r[o])return"prop "+o+" changed: "+t[o]+" -> "+r[o]}for(var s in r)if(!(s in i||t.hasOwnProperty(s)))return"prop "+s+" added: (undefined) -> "+r[s];return null}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.ignore,i=void 0===n?{}:n;if(e===t)return!0;if("object"!==("undefined"==typeof e?"undefined":a(e))||null===e||"object"!==("undefined"==typeof t?"undefined":a(t))||null===t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(!(o in i||o in t&&e[o]===t[o]))return!1;for(var s in t)if(!(s in i||s in e))return!1;return!0}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.compareProps=i,r.areEqualShallow=o;var s=e("assert"),u=n(s)},{assert:2}],355:[function(e,t,r){"use strict";function n(e){var t=Math.fround(e),r=e-Math.fround(e);return[t,r]}Object.defineProperty(r,"__esModule",{value:!0}),r.fp64ify=n},{}],356:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./object-iterator");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./compare-objects");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./log");Object.defineProperty(r,"log",{enumerable:!0,get:function(){return n(a).default}});var s=e("./fp64");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})},{"./compare-objects":354,"./fp64":355,"./log":357,"./object-iterator":358}],357:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if((0,s.default)(Number.isFinite(e),"log priority must be a number"),e<=i.priority){for(var t,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=console).debug.apply(t,n)}}function o(e,t){if(!u[t]){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];i.apply(void 0,[e,t].concat(n))}u[t]=!0}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var a=e("assert"),s=n(a),u={};i.priority=0,i.log=i,i.once=o,"undefined"!=typeof window&&(window.deck=window.deck||{log:i})},{assert:2}],358:[function(e,t,r){"use strict";function n(e){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=regeneratorRuntime.keys(e);case 1:if((r.t1=r.t0()).done){r.next=8;break}if(t=r.t1.value,!e.hasOwnProperty(t)){r.next=6;break}return r.next=6,e[t];case 6:r.next=1;break;case 8:case"end":return r.stop()}},s[0],this)}function i(e){o(e)&&!e[Symbol.iterator]&&(e[Symbol.iterator]=function(){return n(e)})}function o(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":a(e))&&e.constructor===Object}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.makeObjectValueIterator=n,r.addIterator=i,r.isPlainObject=o;var s=[n].map(regeneratorRuntime.mark)},{}],359:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){var r=e.vendor,n=e.renderer,i=void 0;switch(t){case"nvidia":i=r.match(/NVIDIA/i)||n.match(/NVIDIA/i);break;case"intel":i=r.match(/INTEL/i)||n.match(/INTEL/i);break;case"amd":i=r.match(/AMD/i)||n.match(/AMD/i)||r.match(/ATI/i)||n.match(/ATI/i);break;default:i=!1}return i}function a(e){var t="",r=(0,l.glGetDebugInfo)(e);return t+=o(r,"nvidia")?"#define NVIDIA_GPU\n#define NVIDIA_FP64_WORKAROUND 1\n#define NVIDIA_EQUATION_WORKAROUND 1\n":o(r,"intel")?"#define INTEL_GPU\n#define INTEL_FP64_WORKAROUND 1\n#define NVIDIA_EQUATION_WORKAROUND 1\n #define INTEL_TAN_WORKAROUND 1\n":o(r,"amd")?"#define AMD_GPU\n":"#define DEFAULT_GPU\n"}function s(e,t){var r=t.vs,n=(t.fs,t.fp64),o=void 0!==n&&n,s=t.project,u=void 0===s||s,l=t.project64,f=void 0!==l&&l,d=i(t,["vs","fs","fp64","project","project64"]);f===!0&&(o=!0);var p=a(e)+"\n";d=c({},d,{project:u,project64:f,fp64:o});var v=!0,_=!1,g=void 0;try{for(var y,b=Object.keys(h.default)[Symbol.iterator]();!(v=(y=b.next()).done);v=!0){
var m=y.value;d[m]&&(p+=h.default[m].source+"\n")}}catch(e){_=!0,g=e}finally{try{!v&&b.return&&b.return()}finally{if(_)throw g}}return p+=r}function u(e,t){var r=t.vs,n=t.fs,o=i(t,["vs","fs"]);return{gl:e,vs:s(e,c({},o,{vs:r})),fs:n}}Object.defineProperty(r,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.checkRendererVendor=o,r.getPlatformShaderDefines=a,r.assembleShaders=u;var l=e("luma.gl"),f=e("./shader-chunks"),h=n(f)},{"./shader-chunks":361,"luma.gl":428}],360:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./assemble-shaders");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})})},{"./assemble-shaders":359}],361:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=e("../../dist/shaderlib/fp64"),a=n(o),s=e("../../dist/shaderlib/project"),u=n(s),c=e("../../dist/shaderlib/project64"),l=n(c);t.exports=i({},a.default,u.default,l.default)},{"../../dist/shaderlib/fp64":362,"../../dist/shaderlib/project":364,"../../dist/shaderlib/project64":363}],362:[function(e,t,r){"use strict";t.exports={fp64:{interface:"fp64",source:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nuniform float ONE;\n\nconst vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n  return vec2(a_hi, a_lo);\n}\n#else\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n  return vec2(a_hi, a_lo);\n}\n#endif\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 quickTwoSum(float a, float b) {\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n  return vec2(sum, err);\n}\n#else\nvec2 quickTwoSum(float a, float b) {\n  float sum = a + b;\n  float err = b - (sum - a);\n  return vec2(sum, err);\n}\n#endif\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 twoSum(float a, float b) {\n  float s = (a + b) * ONE;\n  float v = (s - a);\n  float err = (a - (s - v) * ONE) * ONE + (b - v);\n  return vec2(s, err);\n}\n#else\nvec2 twoSum(float a, float b) {\n  float s = a + b;\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n  return vec2(s, err);\n}\n#endif\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 twoSub(float a, float b) {\n  float s = (a - b) * ONE;\n  float v = (s - a);\n  float err = (a - (s - v) * ONE) * ONE - (b + v);\n  return vec2(s, err);\n}\n#else\nvec2 twoSub(float a, float b) {\n  float s = a - b;\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n  return vec2(s, err);\n}\n#endif\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x * a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n  return vec2(prod, err);\n}\n#else\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n  return vec2(prod, err);\n}\n#endif\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n  prod.y += a.y * b.x;\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n  vec2 yn = a * xn;\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n  return sum_fp64(vec2(yn, 0.0), prod);\n}\n\nvec2 exp_fp64(vec2 a) {\n  const float k = 512.0;\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  // Range reduction using assume a = kr + m * log(2), k and m being integers.\n  // Set k = 9 (we can choose other k to trade accuracy with performance.\n  // we only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n\n  // We can add more iterations here and increase k.\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(1.0, 0.0) * ONE);\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), vec2(1.0, 0.0));\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else if (k == 3) {\n        t = sub_fp64(t, PI_16_3_FP64);\n    } else if (k == -3) {\n        t = sum_fp64(t, PI_16_3_FP64);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else if (k == 3) {\n        t = sub_fp64(t, PI_16_3_FP64);\n    } else if (k == -3) {\n        t = sum_fp64(t, PI_16_3_FP64);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can\'t get PI/16 * 3.0 very accurately.\n    // so let\'s just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else if (k == 3) {\n        t = sub_fp64(t, PI_16_3_FP64);\n    } else if (k == -3) {\n        t = sum_fp64(t, PI_16_3_FP64);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return div_fp64(mul_fp64(degree, PI_FP64), vec2(180.0, 0.0));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])), mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n'}}},{}],363:[function(e,t,r){"use strict";t.exports={project64:{interface:"project64",source:"const vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 projectionScaleFP64;\nuniform vec2 projectionFP64[16];\n\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) { //longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\n\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n  out_val[1] = sub_fp64(PI_FP64, log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], projectionScaleFP64);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], projectionScaleFP64);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(projectionFP64, vertex_pos_modelspace, vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n"}}},{}],364:[function(e,t,r){"use strict";t.exports={project:{interface:"project",source:"const float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\n\nconst float PROJECT_LINEAR = 0.;\nconst float PROJECT_MERCATOR = 1.;\nconst float PROJECT_MERCATOR_OFFSETS = 2.;\n\nuniform float projectionMode;\nuniform float projectionScale;\nuniform vec4 projectionCenter;\nuniform vec3 projectionPixelsPerUnit;\nuniform mat4 projectionMatrix;\nuniform mat4 projectionMatrixUncentered;\n\n#ifdef INTEL_TAN_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\n//\n// Scaling offsets\n//\n\nfloat project_scale(float meters) {\n  return meters * projectionPixelsPerUnit.x;\n}\n\nvec2 project_scale(vec2 meters) {\n  return vec2(\n    meters.x * projectionPixelsPerUnit.x,\n    meters.y * projectionPixelsPerUnit.x\n  );\n}\n\nvec3 project_scale(vec3 meters) {\n  return vec3(\n    meters.x * projectionPixelsPerUnit.x,\n    meters.y * projectionPixelsPerUnit.x,\n    meters.z * projectionPixelsPerUnit.x\n  );\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(\n    meters.x * projectionPixelsPerUnit.x,\n    meters.y * projectionPixelsPerUnit.x,\n    meters.z * projectionPixelsPerUnit.x,\n    meters.w\n  );\n}\n\n//\n// Projecting positions\n//\n\n// non-linear projection: lnglats => unit tile [0-1, 0-1]\nvec2 project_mercator_(vec2 lnglat) {\n  return vec2(\n    radians(lnglat.x) + PI,\n#ifdef INTEL_TAN_WORKAROUND\n        PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n#else\n        PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n#endif\n  );\n}\n\nvec2 project_position(vec2 position) {\n  if (projectionMode == PROJECT_LINEAR) {\n    return (position + vec2(TILE_SIZE / 2.0)) * projectionScale;\n  }\n  if (projectionMode == PROJECT_MERCATOR_OFFSETS) {\n    return project_scale(position);\n  }\n  // Covers projectionMode == PROJECT_MERCATOR\n  return project_mercator_(position) * WORLD_SCALE * projectionScale;\n}\n\nvec3 project_position(vec3 position) {\n  return vec3(project_position(position.xy), project_scale(position.z) + .1);\n}\n\nvec4 project_position(vec4 position) {\n  return vec4(project_position(position.xyz), position.w);\n}\n\n//\n\nvec4 project_to_clipspace(vec4 position) {\n  if (projectionMode == PROJECT_MERCATOR_OFFSETS) {\n    return projectionMatrix * vec4(position.xyz, 0.0) + projectionCenter;\n  }\n  return projectionMatrix * position;\n}\n\n// Backwards compatibility\n\nfloat scale(float position) {\n  return project_scale(position);\n}\n\nvec2 scale(vec2 position) {\n  return project_scale(position);\n}\n\nvec3 scale(vec3 position) {\n  return project_scale(position);\n}\n\nvec4 scale(vec4 position) {\n  return project_scale(position);\n}\n\nvec2 preproject(vec2 position) {\n  return project_position(position);\n}\n\nvec3 preproject(vec3 position) {\n  return project_position(position);\n}\n\nvec4 preproject(vec4 position) {\n  return project_position(position);\n}\n\nvec4 project(vec4 position) {\n  return project_to_clipspace(position);\n}\n"}}},{}],365:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./viewport");Object.keys(i).forEach(function(e){
"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})}),Object.defineProperty(r,"Viewport",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(i).default}})},{"./viewport":366}],366:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function u(e){var t=Math.fround(e),r=e-Math.fround(e);return[t,r]}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.COORDINATE_SYSTEM=void 0;var c,l=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=e("viewport-mercator-project/perspective");Object.defineProperty(r,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return h.COORDINATE_SYSTEM}});var d=n(h),p=e("autobind-decorator"),v=n(p),_=e("gl-matrix"),g=(c=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._calculateWebGLMatrices(),r}return a(t,e),f(t,[{key:"getProjectionMatrix",value:function(){return this.glProjectionMatrix}},{key:"getProjectionMatrixFP64",value:function(){return this.glProjectionMatrixFP64}},{key:"getProjectionMatrixUncentered",value:function(){return this.glProjectionMatrixUncentered}},{key:"getWebGLMatrices",value:function(){return{projectionMatrix:this.glProjectionMatrix,projectionFP64:this.glProjectionMatrixFP64}}},{key:"getUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.projectionMode,r=void 0===t?h.COORDINATE_SYSTEM.LNGLAT:t,n=e.positionOrigin,i=void 0===n?[0,0]:n,o=e.modelMatrix,a=void 0===o?null:o,s=this.projectFlat(i),c=[s[0],s[1],0,1],l=this.getProjections(),f=l.viewProjectionMatrix,d=_.vec4.transformMat4([],c,f);return a&&_.mat4.multiply(f,f,a),{projectionMode:r,projectionCenter:d,projectionMatrix:this.glProjectionMatrix,projectionFP64:this.glProjectionMatrixFP64,projectionPixelsPerUnit:this.pixelsPerMeter,projectionScale:this.scale,projectionScaleFP64:u(this.scale),mercatorScale:Math.pow(2,this.zoom),mercatorCenter:this.center}}},{key:"_calculateWebGLMatrices",value:function(){this.glProjectionMatrix=new Float32Array(this.viewProjectionMatrix),this.glProjectionMatrixFP64=new Float32Array(32),this._dy64ifyProjectionMatrix()}},{key:"_dy64ifyProjectionMatrix",value:function(){for(var e=0;e<4;++e)for(var t=0;t<4;++t){var r=u(this.viewProjectionMatrix[4*t+e]),n=l(r,2);this.glProjectionMatrixFP64[2*(4*e+t)]=n[0],this.glProjectionMatrixFP64[2*(4*e+t)+1]=n[1]}}}]),t}(d.default),s(c.prototype,"getProjectionMatrix",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"getProjectionMatrix"),c.prototype),s(c.prototype,"getProjectionMatrixFP64",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"getProjectionMatrixFP64"),c.prototype),s(c.prototype,"getProjectionMatrixUncentered",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"getProjectionMatrixUncentered"),c.prototype),c);r.default=g},{"autobind-decorator":3,"gl-matrix":385,"viewport-mercator-project/perspective":551}],367:[function(e,t,r){t.exports=e("./dist/index")},{"./dist/index":325}],368:[function(e,t,r){t.exports={name:"deck.gl",description:"A suite of 3D-enabled data visualization overlays, suitable for react-map-gl",license:"MIT",version:"3.1.1",keywords:["webgl","visualization","overlay","layer"],repository:{type:"git",url:"https://github.com/uber/deck.gl.git"},main:"index.js",files:["dist","shaderlib","src","index.js","react.js","viewport.js","samples.js","experimental.js"],dependencies:{"autobind-decorator":"^1.3.3","babel-polyfill":"^6.1.19",earcut:"^2.0.6","extrude-polyline":"^1.0.6","geojson-normalize":"0.0.1","get-pixels":"^3.3.0","gl-matrix":"^2.3.2","lodash.flattendeep":"^4.4.0","save-pixels":"^2.3.0","viewport-mercator-project":"3.0.0-beta3"},devDependencies:{"babel-cli":"^6.3.15","babel-core":"^6.7.7","babel-eslint":"^6.0.0","babel-plugin-static-fs":"^1.1.0","babel-plugin-transform-decorators-legacy":"^1.3.4","babel-preset-es2015":"^6.3.13","babel-preset-react":"^6.3.13","babel-preset-stage-2":"^6.3.13","babel-runtime":"^6.11.6",babelify:"^7.2.0","brfs-babel":"^1.0.0",browserify:"^13.0.0",budo:"^9.0.0","d3-color":"^1.0.1","d3-request":"^1.0.2","d3-scale":"^1.0.3",discify:"^1.2.0",electron:"^1.4.7",envify:"^3.4.0",eslint:"^2.0.0","eslint-config-uber-es2015":"^2.0.0","eslint-config-uber-jsx":"^2.0.0","eslint-plugin-react":"^6.0.0",faucet:"0.0.1",gl:"^4.0.1","highlight.js":"^9.7.0",immutable:"^3.7.5","luma.gl":"^2.10.3",marked:"^0.3.6",react:"^15.3.2","react-addons-test-utils":"^15.0.2","react-dom":"^15.3.2","react-map-gl":"^1.7.2","react-redux":"^4.4.5","react-router":"^2.8.1","react-stats":"0.0.5",redux:"^3.6.0","redux-thunk":"^2.1.0",sassify:"^2.0.0","stats.js":"^0.17.0","tap-browser-color":"^0.1.2",tape:"^4.6.0","tape-catch":"^1.0.4",testron:"^1.2.0","tween.js":"^16.3.5","uglify-js":"^2.6.1"},peerDependencies:{react:"0.14.x - 15.x","react-dom":"0.14.x - 15.x","luma.gl":"^2.10.3"},scripts:{build:"npm run build-dist && npm run build-script","build-clean":"rm -fr dist/*","build-dist":"npm run build-clean && npm run build-src && npm run build-shaderlib","build-src":"babel src -d dist --source-maps inline --copy-files","build-shaderlib":"babel shaderlib -d dist/shaderlib --source-maps inline --copy-files","build-script":"browserify src/bundle.js -t babelify -t brfs-babel | uglifyjs > dist/deckgl.min.js","build-watch":"npm run build-clean && npm run build-src-watch && npm run build-shaderlib-watch","build-src-watch":"babel src -d dist --source-maps inline --copy-files --watch &","build-shaderlib-watch":"babel shaderlib -d dist/shaderlib --source-maps inline --copy-files --watch &","demo-start":"npm run demo-build-copy && budo demo/src/javascripts/main.js:main.min.js --dir dist-demo/ --open -- -t babelify -t sassify -t brfs-babel","demo-build":"npm run demo-build-clean && npm run demo-build-copy && npm run demo-build-script","demo-build-clean":"rm -fr dist-demo && mkdir -p dist-demo","demo-build-copy":" mkdir -p dist-demo/docs && cp -R demo/src/static/* dist-demo/ && cp -R docs dist-demo","demo-build-script":"NODE_ENV=production browserify demo/src/javascripts/main.js -o -t babelify -t sassify -t brfs-babel | uglifyjs > dist-demo/main.min.js","demo-gh-pages":"git subtree push --prefix dist-demo origin gh-pages","demo-gh-pages-force":"git push origin `git subtree split --prefix dist-demo master`:gh-pages --force","demo-publish":"npm run build && npm run demo-build && git add dist-demo -f && git commit -m 'UPDATE DOCS' --no-verify && npm run demo-gh-pages","demo-publish-force":"npm run build && npm run demo-build && git add dist-demo -f && git commit -m 'UPDATE DOCS' --no-verify && npm run demo-gh-pages-force",lint:"eslint src",precommit:"npm test",mypublish:"npm run build && npm run test-fast && npm publish",test:"npm run lint && npm run build-dist && npm run test-headless","test-fast":"npm run lint && npm run test-headless","test-headless":"node dist/test/headless.js","test-headless-src":"babel-node --only=deck.gl/test,deck.gl/src,deck.gl/shaderlib src/test/headless.js","test-browser":"budo src/test/browser.js:build/test-bundle.js --dir test --live --open --port 3001 --watch-glob '**/*.{html,css,scss,js,glsl}' -- -t babelify -t brfs-babel","test-electron":"browserify dist/test/electron.js | testron | faucet","test-shader":"npm run build-dist && budo src/test/shader.js:build/test-bundle.js --dir test --live --open --port 3001 --watch-glob '**/*.{html,css,scss,js,glsl}' -- -t babelify -t brfs-babel","profile-disc":"browserify src/bundle.js --full-paths -t babelify -t brfs-babel | uglifyjs | discify --open",start:"npm run build-watch && budo example/main.js:example/bundle.js --live --open --port 3000 --css example/main.css --title 'deck.gl' --watch-glob '**/*.{html,css,js,glsl}' -- -t brfs-babel -t babelify -t envify"}}},{}],369:[function(e,t,r){"use strict";function n(e,t,r){r=r||2;var n=t&&t.length,o=n?t[0]*r:e.length,s=i(e,0,o,r,!0),u=[];if(!s)return u;var c,l,h,d,p,v,_;if(n&&(s=f(e,t,s,r)),e.length>80*r){c=h=e[0],l=d=e[1];for(var g=r;g<o;g+=r)p=e[g],v=e[g+1],p<c&&(c=p),v<l&&(l=v),p>h&&(h=p),v>d&&(d=v);_=Math.max(h-c,d-l)}return a(s,u,r,c,l,_),u}function i(e,t,r,n,i){var o,a;if(i===k(e,t,r,n)>0)for(o=t;o<r;o+=n)a=I(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=I(o,e[o],e[o+1],a);return a&&E(a,a.next)&&(R(a),a=a.next),a}function o(e,t){if(!e)return e;t||(t=e);var r,n=e;do if(r=!1,n.steiner||!E(n,n.next)&&0!==w(n.prev,n,n.next))n=n.next;else{if(R(n),n=t=n.prev,n===n.next)return null;r=!0}while(r||n!==t);return t}function a(e,t,r,n,i,f,h){if(e){!h&&f&&v(e,n,i,f);for(var d,p,_=e;e.prev!==e.next;)if(d=e.prev,p=e.next,f?u(e,n,i,f):s(e))t.push(d.i/r),t.push(e.i/r),t.push(p.i/r),R(e),e=p.next,_=p.next;else if(e=p,e===_){h?1===h?(e=c(e,t,r),a(e,t,r,n,i,f,2)):2===h&&l(e,t,r,n,i,f):a(o(e),t,r,n,i,f,1);break}}}function s(e){var t=e.prev,r=e,n=e.next;if(w(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(b(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&w(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,r,n){var i=e.prev,o=e,a=e.next;if(w(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=g(s,u,t,r,n),h=g(c,l,t,r,n),d=e.nextZ;d&&d.z<=h;){if(d!==e.prev&&d!==e.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&b(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function c(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!E(i,o)&&x(i,n,n.next,o)&&O(i,o)&&O(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),R(n),R(n.next),n=e=o),n=n.next}while(n!==e);return n}function l(e,t,r,n,i,s){var u=e;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&m(u,c)){var l=S(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,t,r,n,i,s),void a(l,t,r,n,i,s)}c=c.next}u=u.next}while(u!==e)}function f(e,t,r,n){var a,s,u,c,l,f=[];for(a=0,s=t.length;a<s;a++)u=t[a]*n,c=a<s-1?t[a+1]*n:e.length,l=i(e,u,c,n,!1),l===l.next&&(l.steiner=!0),f.push(y(l));for(f.sort(h),a=0;a<f.length;a++)d(f[a],r),r=o(r,r.next);return r}function h(e,t){return e.x-t.x}function d(e,t){if(t=p(e,t)){var r=S(t,e);o(r,r.next)}}function p(e,t){var r,n=t,i=e.x,o=e.y,a=-(1/0);do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var u,c=r,l=r.x,f=r.y,h=1/0;for(n=r.next;n!==c;)i>=n.x&&n.x>=l&&b(o<f?i:a,o,l,f,o<f?a:i,o,n.x,n.y)&&(u=Math.abs(o-n.y)/(i-n.x),(u<h||u===h&&n.x>r.x)&&O(n,e)&&(r=n,h=u)),n=n.next;return r}function v(e,t,r,n){var i=e;do null===i.z&&(i.z=g(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,_(i)}function _(e){var t,r,n,i,o,a,s,u,c=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<c&&(s++,n=n.nextZ,n);t++);for(u=c;s>0||u>0&&n;)0===s?(i=n,n=n.nextZ,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,c*=2}while(a>1);return e}function g(e,t,r,n,i){return e=32767*(e-r)/i,t=32767*(t-n)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,r=e;do t.x<r.x&&(r=t),t=t.next;while(t!==e);return r}function b(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function m(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!T(e,t)&&O(e,t)&&O(t,e)&&A(e,t)}function w(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function E(e,t){return e.x===t.x&&e.y===t.y}function x(e,t,r,n){return!!(E(e,t)&&E(r,n)||E(e,n)&&E(r,t))||w(e,t,r)>0!=w(e,t,n)>0&&w(r,n,e)>0!=w(r,n,t)>0}function T(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&x(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function O(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function A(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function S(e,t){var r=new M(e.i,e.x,e.y),n=new M(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function I(e,t,r,n){var i=new M(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function R(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}t.exports=n,n.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(k(e,0,o,r));if(i)for(var s=0,u=t.length;s<u;s++){var c=t[s]*r,l=s<u-1?t[s+1]*r:e.length;a-=Math.abs(k(e,c,l,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},n.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},{}],370:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),c=r.slice(),n=c.length,u=0;u<n;u++)c[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],371:[function(e,t,r){var n=n||function(e){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,o=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=e.webkitRequestFileSystem,s=e.requestFileSystem||a||e.mozRequestFileSystem,u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},c="application/octet-stream",l=0,f=500,h=function(t){var n=function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()};e.chrome?n():setTimeout(n,f)},d=function(e,t,r){t=[].concat(t);for(var n=t.length;n--;){var i=e["on"+t[n]];if("function"==typeof i)try{i.call(e,r||e)}catch(e){u(e)}}},p=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e},v=function(t,u,f){f||(t=p(t));var v,_,g,y=this,b=t.type,m=!1,w=function(){d(y,"writestart progress write writeend".split(" "))},E=function(){if(!m&&v||(v=r().createObjectURL(t)),_)_.location.href=v;else{var n=e.open(v,"_blank");void 0==n&&"undefined"!=typeof safari&&(e.location.href=v)}y.readyState=y.DONE,w(),h(v)},x=function(e){return function(){if(y.readyState!==y.DONE)return e.apply(this,arguments)}},T={create:!0,exclusive:!1};return y.readyState=y.INIT,u||(u="download"),i?(v=r().createObjectURL(t),n.href=v,n.download=u,void setTimeout(function(){o(n),w(),h(v),y.readyState=y.DONE})):(e.chrome&&b&&b!==c&&(g=t.slice||t.webkitSlice,t=g.call(t,0,t.size,c),m=!0),a&&"download"!==u&&(u+=".download"),(b===c||a)&&(_=e),s?(l+=t.size,void s(e.TEMPORARY,l,x(function(e){e.root.getDirectory("saved",T,x(function(e){var r=function(){e.getFile(u,T,x(function(e){e.createWriter(x(function(r){r.onwriteend=function(t){_.location.href=e.toURL(),y.readyState=y.DONE,d(y,"writeend",t),h(e)},r.onerror=function(){var e=r.error;e.code!==e.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach(function(e){r["on"+e]=y["on"+e]}),r.write(t),y.abort=function(){r.abort(),y.readyState=y.DONE},y.readyState=y.WRITING}),E)}),E)};e.getFile(u,{create:!1},x(function(e){e.remove(),r()}),x(function(e){e.code===e.NOT_FOUND_ERR?r():E()}))}),E)}),E)):void E())},_=v.prototype,g=function(e,t,r){return new v(e,t,r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return r||(e=p(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(_.abort=function(){var e=this;e.readyState=e.DONE,d(e,"abort")},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof t&&t.exports?t.exports.saveAs=n:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return n})},{}],372:[function(e,t,r){function n(e){if(!e||!e.type)return null;var t=i[e.type];return t?"geometry"===t?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===t?{type:"FeatureCollection",features:[e]}:"featurecollection"===t?e:void 0:null}t.exports=n;var i={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],373:[function(e,t,r){(function(r,n){"use strict";function i(e,t){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0);var i=n.getImageData(0,0,r.width,r.height);t(null,l(new Uint8Array(i.data),[r.width,r.height,4],[4,4*r.width,1],0))},r.onerror=function(e){t(e)},r.src=e}function o(e,t){var r;try{r=new f(e)}catch(e){return void t(e)}if(r.numFrames()>0){var n=[r.numFrames(),r.height,r.width,4],i=new Uint8Array(n[0]*n[1]*n[2]*n[3]),o=l(i,n);try{for(var a=0;a<r.numFrames();++a)r.decodeAndBlitFrameRGBA(a,i.subarray(o.index(a,0,0,0),o.index(a+1,0,0,0)))}catch(e){return void t(e)}t(null,o.transpose(0,2,1))}else{var n=[r.height,r.width,4],i=new Uint8Array(n[0]*n[1]*n[2]),o=l(i,n);try{r.decodeAndBlitFrameRGBA(0,i)}catch(e){return void t(e)}t(null,o.transpose(1,0))}}function a(e,t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("application/binary"),r.onerror=function(e){t(e)},r.onload=function(){if(4===r.readyState){var e=new Uint8Array(r.response);o(e,t)}},r.send()}function s(e){if(void 0===e[0]){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;++n)r[n]=e.get(n);return r}return new Uint8Array(e)}function u(e,t){n.nextTick(function(){try{var r=h(e);r?o(s(r),t):t(new Error("Error parsing data URI"))}catch(e){t(e)}})}var c=e("path"),l=e("ndarray"),f=e("omggif").GifReader,h=(e("ndarray-pack"),e("through"),e("data-uri-to-buffer"));t.exports=function(e,t,n){n||(n=t,t="");var o=c.extname(e);switch(t||o.toUpperCase()){case".GIF":a(e,n);break;default:r.isBuffer(e)&&(e="data:"+t+";base64,"+e.toString("base64")),0===e.indexOf("data:image/gif;")?u(e,n):i(e,n)}}}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":399,_process:528,"data-uri-to-buffer":318,ndarray:492,"ndarray-pack":490,omggif:493,path:505,through:544}],374:[function(e,t,r){(function(r){function n(e){o.call(this,e),this.okayToPush=!0,this.resetData()}function i(e,t,r){function i(){a.flushData()}r=r||{};var o=r.highWaterMark;n.call(this,{highWaterMark:o||0===o?o:65536}),this.width=~~e,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=[],this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10;var a=this;this.on("writeHeader#stop",i),this.on("frame#stop",i),this.on("finish#stop",function(){i(),a.push(null)})}var o=(e("assert"),e("events").EventEmitter,e("readable-stream")),a=e("util"),s=e("./TypedNeuQuant.js"),u=e("./LZWEncoder.js");a.inherits(n,o),n.prototype._read=function(){this.okayToPush=!0},n.prototype.resetData=function(){this.data=[]},n.prototype.flushData=function(){if(!this.okayToPush){var e=new Error("GIF memory limit exceeded. Please `read` from GIF before writing additional frames/information.");return this.emit("error",e)}var t=new r(this.data);this.resetData(),this.okayToPush=this.push(t)},n.prototype.writeByte=function(e){this.data.push(e)},n.prototype.writeUTFBytes=function(e){for(var t=e.length,r=0;r<t;r++)this.writeByte(e.charCodeAt(r))},n.prototype.writeBytes=function(e,t,r){for(var n=r||e.length,i=t||0;i<n;i++)this.writeByte(e[i])},a.inherits(i,n),i.prototype.setDelay=function(e){this.delay=Math.round(e/10)},i.prototype.setFrameRate=function(e){this.delay=Math.round(100/e)},i.prototype.setDispose=function(e){e>=0&&(this.dispose=e)},i.prototype.setRepeat=function(e){this.repeat=e},i.prototype.setTransparent=function(e){this.transparent=e},i.prototype.analyzeImage=function(e){this.setImagePixels(this.removeAlphaChannel(e)),this.analyzePixels()},i.prototype.writeImageInfo=function(){this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.firstFrame=!1},i.prototype.outputImage=function(){this.writePixels()},i.prototype.addFrame=function(e){this.emit("frame#start"),this.analyzeImage(e),this.writeImageInfo(),this.outputImage(),this.emit("frame#stop")},i.prototype.finish=function(){this.emit("finish#start"),this.writeByte(59),this.emit("finish#stop")},i.prototype.setQuality=function(e){e<1&&(e=1),this.sample=e},i.prototype.writeHeader=function(){this.emit("writeHeader#start"),this.writeUTFBytes("GIF89a"),this.emit("writeHeader#stop")},i.prototype.analyzePixels=function(){var e=this.pixels.length,t=e/3;this.indexedPixels=new Uint8Array(t);var r=new s(this.pixels,this.sample);r.buildColormap(),this.colorTab=r.getColormap();for(var n=0,i=0;i<t;i++){var o=r.lookupRGB(255&this.pixels[n++],255&this.pixels[n++],255&this.pixels[n++]);this.usedEntry[o]=!0,this.indexedPixels[i]=o}this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent))},i.prototype.findClosest=function(e){if(null===this.colorTab)return-1;for(var t=(16711680&e)>>16,r=(65280&e)>>8,n=255&e,i=0,o=16777216,a=this.colorTab.length,s=0;s<a;){var u=t-(255&this.colorTab[s++]),c=r-(255&this.colorTab[s++]),l=n-(255&this.colorTab[s]),f=u*u+c*c+l*l,h=s/3;this.usedEntry[h]&&f<o&&(o=f,i=h),s++}return i},i.prototype.removeAlphaChannel=function(e){for(var t=this.width,r=this.height,n=new Uint8Array(t*r*3),i=0,o=0;o<r;o++)for(var a=0;a<t;a++){var s=o*t*4+4*a;n[i++]=e[s],n[i++]=e[s+1],n[i++]=e[s+2]}return n},i.prototype.setImagePixels=function(e){this.pixels=e},i.prototype.writeGraphicCtrlExt=function(){this.writeByte(33),this.writeByte(249),this.writeByte(4);var e,t;null===this.transparent?(e=0,t=0):(e=1,t=2),this.dispose>=0&&(t=7&dispose),t<<=2,this.writeByte(0|t|0|e),this.writeShort(this.delay),this.writeByte(this.transIndex),this.writeByte(0)},i.prototype.writeImageDesc=function(){this.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.writeByte(0):this.writeByte(128|this.palSize)},i.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.writeByte(240|this.palSize),this.writeByte(0),this.writeByte(0)},i.prototype.writeNetscapeExt=function(){this.writeByte(33),this.writeByte(255),this.writeByte(11),this.writeUTFBytes("NETSCAPE2.0"),this.writeByte(3),this.writeByte(1),this.writeShort(this.repeat),this.writeByte(0)},i.prototype.writePalette=function(){this.writeBytes(this.colorTab);for(var e=768-this.colorTab.length,t=0;t<e;t++)this.writeByte(0)},i.prototype.writeShort=function(e){this.writeByte(255&e),this.writeByte(e>>8&255)},i.prototype.writePixels=function(){var e=new u(this.width,this.height,this.indexedPixels,this.colorDepth);e.encode(this)},i.prototype.stream=function(){return this},i.ByteCapacitor=n,t.exports=i}).call(this,e("buffer").Buffer)},{"./LZWEncoder.js":375,"./TypedNeuQuant.js":376,assert:2,buffer:11,events:370,"readable-stream":383,util:549}],375:[function(e,t,r){function n(e,t,r,n){function u(e,t){S[y++]=e,y>=254&&d(t)}function c(e){l(a),k=T+2,P=!0,_(T,e)}function l(e){for(var t=0;t<e;++t)I[t]=-1}function f(e,t){var r,n,s,u,f,h,d;for(x=e,P=!1,E=x,b=p(E),T=1<<e-1,O=T+1,k=T+2,y=0,u=v(),d=0,r=a;r<65536;r*=2)++d;d=8-d,h=a,l(h),_(T,t);e:for(;(n=v())!=i;)if(r=(n<<o)+u,s=n<<d^u,I[s]!==r){if(I[s]>=0){f=h-s,0===s&&(f=1);do if((s-=f)<0&&(s+=h),I[s]===r){u=R[s];continue e}while(I[s]>=0)}_(u,t),u=n,k<1<<o?(R[s]=k++,I[s]=r):c(t)}else u=R[s];_(u,t),_(O,t)}function h(r){r.writeByte(A),m=e*t,w=0,f(A+1,r),r.writeByte(0)}function d(e){y>0&&(e.writeByte(y),e.writeBytes(S,0,y),y=0)}function p(e){return(1<<e)-1}function v(){if(0===m)return i;--m;var e=r[w++];return 255&e}function _(e,t){for(g&=s[M],M>0?g|=e<<M:g=e,M+=E;M>=8;)u(255&g,t),g>>=8,M-=8;if((k>b||P)&&(P?(b=p(E=x),P=!1):(++E,b=E==o?1<<o:p(E))),e==O){for(;M>0;)u(255&g,t),g>>=8,M-=8;d(t)}}var g,y,b,m,w,E,x,T,O,A=Math.max(2,n),S=new Uint8Array(256),I=new Int32Array(a),R=new Int32Array(a),M=0,k=0,P=!1;this.encode=h}var i=-1,o=12,a=5003,s=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=n},{}],376:[function(e,t,r){function n(e,t){function r(){j=[],N=new Int32Array(256),F=new Int32Array(o),L=new Int32Array(o),C=new Int32Array(o>>3);var e,t;for(e=0;e<o;e++)t=(e<<s+8)/o,j[e]=new Float64Array([t,t,t,0]),L[e]=c/o,F[e]=0}function n(){for(var e=0;e<o;e++)j[e][0]>>=s,j[e][1]>>=s,j[e][2]>>=s,j[e][3]=e}function p(e,t,r,n,i){j[t][0]-=e*(j[t][0]-r)/m,j[t][1]-=e*(j[t][1]-n)/m,j[t][2]-=e*(j[t][2]-i)/m}function _(e,t,r,n,i){for(var a,s,u=Math.abs(t-e),c=Math.min(t+e,o),l=t+1,f=t-1,h=1;l<c||f>u;)s=C[h++],l<c&&(a=j[l++],a[0]-=s*(a[0]-r)/T,a[1]-=s*(a[1]-n)/T,a[2]-=s*(a[2]-i)/T),f>u&&(a=j[f--],a[0]-=s*(a[0]-r)/T,a[1]-=s*(a[1]-n)/T,a[2]-=s*(a[2]-i)/T)}function b(e,t,r){var n,i,a,c,p,v=~(1<<31),_=v,g=-1,y=g;for(n=0;n<o;n++)i=j[n],a=Math.abs(i[0]-e)+Math.abs(i[1]-t)+Math.abs(i[2]-r),a<v&&(v=a,g=n),c=a-(F[n]>>u-s),c<_&&(_=c,y=n),p=L[n]>>f,L[n]-=p,F[n]+=p<<l;return L[g]+=h,F[g]-=d,y}function w(){var e,t,r,n,i,s,u=0,c=0;for(e=0;e<o;e++){for(r=j[e],i=e,s=r[1],t=e+1;t<o;t++)n=j[t],n[1]<s&&(i=t,s=n[1]);if(n=j[i],e!=i&&(t=n[0],n[0]=r[0],r[0]=t,t=n[1],n[1]=r[1],r[1]=t,t=n[2],n[2]=r[2],r[2]=t,t=n[3],n[3]=r[3],r[3]=t),s!=u){for(N[u]=c+e>>1,t=u+1;t<s;t++)N[t]=e;u=s,c=e}}for(N[u]=c+a>>1,t=u+1;t<256;t++)N[t]=a}function x(e,t,r){for(var n,i,a,s=1e3,u=-1,c=N[t],l=c-1;c<o||l>=0;)c<o&&(i=j[c],a=i[1]-t,a>=s?c=o:(c++,a<0&&(a=-a),n=i[0]-e,n<0&&(n=-n),a+=n,a<s&&(n=i[2]-r,n<0&&(n=-n),a+=n,a<s&&(s=a,u=i[3])))),l>=0&&(i=j[l],a=t-i[1],a>=s?l=-1:(l--,a<0&&(a=-a),n=i[0]-e,n<0&&(n=-n),a+=n,a<s&&(n=i[2]-r,n<0&&(n=-n),a+=n,a<s&&(s=a,u=i[3]))));return u}function M(){var r,n=e.length,o=30+(t-1)/3,a=n/(3*t),u=~~(a/i),c=m,l=g,f=l>>v;for(f<=1&&(f=0),r=0;r<f;r++)C[r]=c*((f*f-r*r)*E/(f*f));var h;n<R?(t=1,h=3):h=n%O!==0?3*O:n%A!==0?3*A:n%S!==0?3*S:3*I;
var d,w,x,T,M=0;for(r=0;r<a;)if(d=(255&e[M])<<s,w=(255&e[M+1])<<s,x=(255&e[M+2])<<s,T=b(d,w,x),p(c,T,d,w,x),0!==f&&_(f,T,d,w,x),M+=h,M>=n&&(M-=n),r++,0===u&&(u=1),r%u===0)for(c-=c/o,l-=l/y,f=l>>v,f<=1&&(f=0),T=0;T<f;T++)C[T]=c*((f*f-T*T)*E/(f*f))}function k(){r(),M(),n(),w()}function P(){for(var e=[],t=[],r=0;r<o;r++)t[j[r][3]]=r;for(var n=0,i=0;i<o;i++){var a=t[i];e[n++]=j[a][0],e[n++]=j[a][1],e[n++]=j[a][2]}return e}var j,N,F,L,C;this.buildColormap=k,this.getColormap=P,this.lookupRGB=x}var i=100,o=256,a=o-1,s=4,u=16,c=1<<u,l=10,f=10,h=c>>f,d=c<<l-f,p=o>>3,v=6,_=1<<v,g=p*_,y=30,b=10,m=1<<b,w=8,E=1<<w,x=b+w,T=1<<x,O=499,A=491,S=487,I=503,R=3*I;t.exports=n},{}],377:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{dup:13}],378:[function(e,t,r){arguments[4][14][0].apply(r,arguments)},{"./_stream_readable":380,"./_stream_writable":382,_process:528,"core-util-is":314,dup:14,inherits:397}],379:[function(e,t,r){arguments[4][15][0].apply(r,arguments)},{"./_stream_transform":381,"core-util-is":314,dup:15,inherits:397}],380:[function(e,t,r){(function(r){function n(t,r){var n=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(I||(I=e("string_decoder/").StringDecoder),this.decoder=new I(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");return this instanceof i?(this._readableState=new n(t,this),this.readable=!0,void A.call(this)):new i(t)}function o(e,t,r,n,i){var o=c(t,r);if(o)e.emit("error",o);else if(S.isNullOrUndefined(r))t.reading=!1,t.ended||l(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else!t.decoder||i||n||(r=t.decoder.write(r)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&f(e)),d(e,t);else i||(t.reading=!1);return a(t)}function a(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function s(e){if(e>=M)e=M;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||S.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=s(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var r=null;return S.isBuffer(t)||S.isString(t)||S.isNullOrUndefined(t)||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,f(e)}function f(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(function(){h(e)}):h(e))}function h(e){R("emit readable"),e.emit("readable"),y(e)}function d(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&O.listenerCount(e,"data")&&(t.flowing=!0,y(e))}}function _(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(function(){g(e,t)}))}function g(e,t){t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(R("flow",t.flowing),t.flowing)do var r=e.read();while(null!==r&&t.flowing)}function b(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,a=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(a)r=n.shift();else if(!e||e>=i)r=o?n.join(""):T.concat(n,i),n.length=0;else if(e<n[0].length){var s=n[0];r=s.slice(0,e),n[0]=s.slice(e)}else if(e===n[0].length)r=n.shift();else{r=o?"":new T(e);for(var u=0,c=0,l=n.length;c<l&&u<e;c++){var s=n[0],f=Math.min(e-u,s.length);o?r+=s.slice(0,f):s.copy(r,u,0,f),f<s.length?n[0]=s.slice(f):n.shift(),u+=f}}return r}function m(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function E(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=i;var x=e("isarray"),T=e("buffer").Buffer;i.ReadableState=n;var O=e("events").EventEmitter;O.listenerCount||(O.listenerCount=function(e,t){return e.listeners(t).length});var A=e("stream"),S=e("core-util-is");S.inherits=e("inherits");var I,R=e("util");R=R&&R.debuglog?R.debuglog("stream"):function(){},S.inherits(i,A),i.prototype.push=function(e,t){var r=this._readableState;return S.isString(e)&&!r.objectMode&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=new T(e,t),t="")),o(this,r,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){return I||(I=e("string_decoder/").StringDecoder),this._readableState.decoder=new I(t),this._readableState.encoding=t,this};var M=8388608;i.prototype.read=function(e){R("read",e);var t=this._readableState,r=e;if((!S.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?m(this):f(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&m(this),null;var n=t.needReadable;R("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,R("length less than watermark",n)),(t.ended||t.reading)&&(n=!1,R("reading or ended",n)),n&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t));var i;return i=e>0?b(e,t):null,S.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&m(this),S.isNull(i)||this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){R("onunpipe"),e===f&&o()}function i(){R("onend"),e.end()}function o(){R("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",_),e.removeListener("error",s),e.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",a),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||_()}function a(t){R("ondata");var r=e.write(t);!1===r&&(R("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function s(t){R("onerror",t),l(),e.removeListener("error",s),0===O.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),l()}function c(){R("onfinish"),e.removeListener("close",u),l()}function l(){R("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,R("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,p=d?i:o;h.endEmitted?r.nextTick(p):f.once("end",p),e.on("unpipe",n);var _=v(f);return e.on("drain",_),f.on("data",a),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",u),e.once("finish",c),e.emit("pipe",f),h.flowing||(R("pipe resume"),f.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var i=E(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=A.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&f(this,i);else{var o=this;r.nextTick(function(){R("readable nexttick read 0"),o.read(0)})}}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,e.reading||(R("resume read 0"),this.read(0)),_(this,e)),this},i.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(R("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(R("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)S.isFunction(e[i])&&S.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){R("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=b}).call(this,e("_process"))},{"./_stream_duplex":378,_process:528,buffer:11,"core-util-is":314,events:370,inherits:397,isarray:377,stream:542,"string_decoder/":543,util:6}],381:[function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,u.isNullOrUndefined(r)||e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){a(t,e)}):a(t)})}function a(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;u.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":378,"core-util-is":314,inherits:397}],382:[function(e,t,r){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(t,r){var n=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=t.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(r,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(t,this),this.writable=!0,void x.call(this)):new o(t)}function a(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function s(e,t,n,i){var o=!0;if(!(E.isBuffer(n)||E.isString(n)||E.isNullOrUndefined(n)||t.objectMode)){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),r.nextTick(function(){i(a)}),o=!1}return o}function u(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&E.isString(t)&&(t=new w(t,r)),t}function c(e,t,r,i,o){r=u(t,r,i),E.isBuffer(r)&&(i="buffer");var a=t.objectMode?1:r.length;t.length+=a;var s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new n(r,i,o)):l(e,t,!1,a,r,i,o),s}function l(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function f(e,t,n,i,o){n?r.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(h(n),t)f(e,n,i,t,o);else{var a=g(e,n);a||n.corked||n.bufferProcessing||!n.buffer.length||_(e,n),i?r.nextTick(function(){p(e,n,a,o)}):p(e,n,a,o)}}function p(e,t,r,n){r||v(e,t),t.pendingcb--,n(),b(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var r=[],n=0;n<t.buffer.length;n++)r.push(t.buffer[n].callback);t.pendingcb++,l(e,t,!0,t.length,t.buffer,"",function(e){for(var n=0;n<r.length;n++)t.pendingcb--,r[n](e)}),t.buffer=[]}else{for(var n=0;n<t.buffer.length;n++){var i=t.buffer[n],o=i.chunk,a=i.encoding,s=i.callback,u=t.objectMode?1:o.length;if(l(e,t,!1,u,o,a,s),t.writing){n++;break}}n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}t.bufferProcessing=!1}function g(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function b(e,t){var r=g(e,t);return r&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),r}function m(e,t,n){t.ending=!0,b(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=i;var E=e("core-util-is");E.inherits=e("inherits");var x=e("stream");E.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return E.isFunction(t)&&(r=t,t=null),E.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),E.isFunction(r)||(r=function(){}),n.ended?a(this,n,r):s(this,n,e,r)&&(n.pendingcb++,i=c(this,n,e,t,r)),i},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||_(this,e))},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,r){var n=this._writableState;E.isFunction(e)?(r=e,e=null,t=null):E.isFunction(t)&&(r=t,t=null),E.isNullOrUndefined(e)||this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||m(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":378,_process:528,buffer:11,"core-util-is":314,inherits:397,stream:542}],383:[function(e,t,r){(function(n){r=t.exports=e("./lib/_stream_readable.js"),r.Stream=e("stream"),r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":378,"./lib/_stream_passthrough.js":379,"./lib/_stream_readable.js":380,"./lib/_stream_transform.js":381,"./lib/_stream_writable.js":382,_process:528,stream:542}],384:[function(e,t,r){t.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},{}],385:[function(e,t,r){r.glMatrix=e("./gl-matrix/common.js"),r.mat2=e("./gl-matrix/mat2.js"),r.mat2d=e("./gl-matrix/mat2d.js"),r.mat3=e("./gl-matrix/mat3.js"),r.mat4=e("./gl-matrix/mat4.js"),r.quat=e("./gl-matrix/quat.js"),r.vec2=e("./gl-matrix/vec2.js"),r.vec3=e("./gl-matrix/vec3.js"),r.vec4=e("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":386,"./gl-matrix/mat2.js":387,"./gl-matrix/mat2d.js":388,"./gl-matrix/mat3.js":389,"./gl-matrix/mat4.js":390,"./gl-matrix/quat.js":391,"./gl-matrix/vec2.js":392,"./gl-matrix/vec3.js":393,"./gl-matrix/vec4.js":394}],386:[function(e,t,r){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var i=Math.PI/180;n.toRadian=function(e){return e*i},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.exports=n},{}],387:[function(e,t,r){var n=e("./common.js"),i={};i.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},i.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},i.fromValues=function(e,t,r,i){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o},i.set=function(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e},i.transpose=function(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},i.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*o-i*n;return a?(a=1/a,e[0]=o*a,e[1]=-n*a,e[2]=-i*a,e[3]=r*a,e):null},i.adjoint=function(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e},i.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},i.multiply=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*s+o*u,e[1]=i*s+a*u,e[2]=n*c+o*l,e[3]=i*c+a*l,e},i.mul=i.multiply,i.rotate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+o*s,e[1]=i*u+a*s,e[2]=n*-s+o*u,e[3]=i*-s+a*u,e},i.scale=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],u=r[1];return e[0]=n*s,e[1]=i*s,e[2]=o*u,e[3]=a*u,e},i.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},i.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},i.LDU=function(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]},i.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},i.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},i.sub=i.subtract,i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},i.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},i.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},i.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},t.exports=i},{"./common.js":386}],388:[function(e,t,r){var n=e("./common.js"),i={};i.create=function(){var e=new n.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},i.clone=function(e){var t=new n.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},i.fromValues=function(e,t,r,i,o,a){var s=new n.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s[4]=o,s[5]=a,s},i.set=function(e,t,r,n,i,o,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e},i.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=r*o-n*i;return u?(u=1/u,e[0]=o*u,e[1]=-n*u,e[2]=-i*u,e[3]=r*u,e[4]=(i*s-o*a)*u,e[5]=(n*a-r*s)*u,e):null},i.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},i.multiply=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=r[0],l=r[1],f=r[2],h=r[3],d=r[4],p=r[5];return e[0]=n*c+o*l,e[1]=i*c+a*l,e[2]=n*f+o*h,e[3]=i*f+a*h,e[4]=n*d+o*p+s,e[5]=i*d+a*p+u,e},i.mul=i.multiply,i.rotate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=Math.sin(r),l=Math.cos(r);return e[0]=n*l+o*c,e[1]=i*l+a*c,e[2]=n*-c+o*l,e[3]=i*-c+a*l,e[4]=s,e[5]=u,e},i.scale=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n*c,e[1]=i*c,e[2]=o*l,e[3]=a*l,e[4]=s,e[5]=u,e},i.translate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=r[0],l=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=n*c+o*l+s,e[5]=i*c+a*l+u,e},i.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},i.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},i.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e},i.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e},i.sub=i.subtract,i.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e},i.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},i.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=t[0],l=t[1],f=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-f)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-h)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-p)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))},t.exports=i},{"./common.js":386}],389:[function(e,t,r){var n=e("./common.js"),i={};i.create=function(){var e=new n.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},i.clone=function(e){var t=new n.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.fromValues=function(e,t,r,i,o,a,s,u,c){var l=new n.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=r,l[3]=i,l[4]=o,l[5]=a,l[6]=s,l[7]=u,l[8]=c,l},i.set=function(e,t,r,n,i,o,a,s,u,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},i.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=l*a-s*c,h=-l*o+s*u,d=c*o-a*u,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-l*n+i*c)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(l*r-i*u)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-c*r+n*u)*p,e[8]=(a*r-n*o)*p,e):null},i.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=a*l-s*c,e[1]=i*c-n*l,e[2]=n*s-i*a,e[3]=s*u-o*l,e[4]=r*l-i*u,e[5]=i*o-r*s,e[6]=o*c-a*u,e[7]=n*u-r*c,e[8]=r*a-n*o,e},i.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*(c*o-a*u)+r*(-c*i+a*s)+n*(u*i-o*s);
},i.multiply=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],_=r[4],g=r[5],y=r[6],b=r[7],m=r[8];return e[0]=h*n+d*a+p*c,e[1]=h*i+d*s+p*l,e[2]=h*o+d*u+p*f,e[3]=v*n+_*a+g*c,e[4]=v*i+_*s+g*l,e[5]=v*o+_*u+g*f,e[6]=y*n+b*a+m*c,e[7]=y*i+b*s+m*l,e[8]=y*o+b*u+m*f,e},i.mul=i.multiply,i.translate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=h*n+d*a+c,e[7]=h*i+d*s+l,e[8]=h*o+d*u+f,e},i.rotate=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*u,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*u-h*o,e[6]=c,e[7]=l,e[8]=f,e},i.scale=function(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},i.fromRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},i.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},i.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,h=i*a,d=i*s,p=i*u,v=o*a,_=o*s,g=o*u;return e[0]=1-f-p,e[3]=l-g,e[6]=h+_,e[1]=l+g,e[4]=1-c-p,e[7]=d-v,e[2]=h-_,e[5]=d+v,e[8]=1-c-f,e},i.normalFromMat4=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],_=t[14],g=t[15],y=r*s-n*a,b=r*u-i*a,m=r*c-o*a,w=n*u-i*s,E=n*c-o*s,x=i*c-o*u,T=l*v-f*p,O=l*_-h*p,A=l*g-d*p,S=f*_-h*v,I=f*g-d*v,R=h*g-d*_,M=y*R-b*I+m*S+w*A-E*O+x*T;return M?(M=1/M,e[0]=(s*R-u*I+c*S)*M,e[1]=(u*A-a*R-c*O)*M,e[2]=(a*I-s*A+c*T)*M,e[3]=(i*I-n*R-o*S)*M,e[4]=(r*R-i*A+o*O)*M,e[5]=(n*A-r*I-o*T)*M,e[6]=(v*x-_*E+g*w)*M,e[7]=(_*m-p*x-g*b)*M,e[8]=(p*E-v*m+g*y)*M,e):null},i.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},i.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e},i.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e},i.sub=i.subtract,i.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e},i.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},i.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=t[0],d=t[1],p=t[2],v=t[3],_=t[4],g=t[5],y=e[6],b=t[7],m=t[8];return Math.abs(r-h)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-d)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-v)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-_)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(u-g)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-y)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-b)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(f-m)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))},t.exports=i},{"./common.js":386}],390:[function(e,t,r){var n=e("./common.js"),i={scalar:{},SIMD:{}};i.create=function(){var e=new n.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.clone=function(e){var t=new n.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.fromValues=function(e,t,r,i,o,a,s,u,c,l,f,h,d,p,v,_){var g=new n.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=r,g[3]=i,g[4]=o,g[5]=a,g[6]=s,g[7]=u,g[8]=c,g[9]=l,g[10]=f,g[11]=h,g[12]=d,g[13]=p,g[14]=v,g[15]=_,g},i.set=function(e,t,r,n,i,o,a,s,u,c,l,f,h,d,p,v,_){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e[9]=l,e[10]=f,e[11]=h,e[12]=d,e[13]=p,e[14]=v,e[15]=_,e},i.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.scalar.transpose=function(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},i.SIMD.transpose=function(e,t){var r,n,i,o,a,s,u,c,l,f;return r=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12),a=SIMD.Float32x4.shuffle(r,n,0,1,4,5),s=SIMD.Float32x4.shuffle(i,o,0,1,4,5),u=SIMD.Float32x4.shuffle(a,s,0,2,4,6),c=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,0,u),SIMD.Float32x4.store(e,4,c),a=SIMD.Float32x4.shuffle(r,n,2,3,6,7),s=SIMD.Float32x4.shuffle(i,o,2,3,6,7),l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),f=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(e,8,l),SIMD.Float32x4.store(e,12,f),e},i.transpose=n.USE_SIMD?i.SIMD.transpose:i.scalar.transpose,i.scalar.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],_=t[14],g=t[15],y=r*s-n*a,b=r*u-i*a,m=r*c-o*a,w=n*u-i*s,E=n*c-o*s,x=i*c-o*u,T=l*v-f*p,O=l*_-h*p,A=l*g-d*p,S=f*_-h*v,I=f*g-d*v,R=h*g-d*_,M=y*R-b*I+m*S+w*A-E*O+x*T;return M?(M=1/M,e[0]=(s*R-u*I+c*S)*M,e[1]=(i*I-n*R-o*S)*M,e[2]=(v*x-_*E+g*w)*M,e[3]=(h*E-f*x-d*w)*M,e[4]=(u*A-a*R-c*O)*M,e[5]=(r*R-i*A+o*O)*M,e[6]=(_*m-p*x-g*b)*M,e[7]=(l*x-h*m+d*b)*M,e[8]=(a*I-s*A+c*T)*M,e[9]=(n*A-r*I-o*T)*M,e[10]=(p*E-v*m+g*y)*M,e[11]=(f*m-l*E-d*y)*M,e[12]=(s*O-a*S-u*T)*M,e[13]=(r*S-n*O+i*T)*M,e[14]=(v*b-p*w-_*y)*M,e[15]=(l*w-f*b+h*y)*M,e):null},i.SIMD.invert=function(e,t){var r,n,i,o,a,s,u,c,l,f,h=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),p=SIMD.Float32x4.load(t,8),v=SIMD.Float32x4.load(t,12);return a=SIMD.Float32x4.shuffle(h,d,0,1,4,5),n=SIMD.Float32x4.shuffle(p,v,0,1,4,5),r=SIMD.Float32x4.shuffle(a,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,a,1,3,5,7),a=SIMD.Float32x4.shuffle(h,d,2,3,6,7),o=SIMD.Float32x4.shuffle(p,v,2,3,6,7),i=SIMD.Float32x4.shuffle(a,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,a,1,3,5,7),a=SIMD.Float32x4.mul(i,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(n,a),u=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),s),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),l=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),c=SIMD.Float32x4.mul(r,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(r,n),a=SIMD.Float32x4.swizzle(a,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),c),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),l),a=SIMD.Float32x4.swizzle(a,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),c),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,a)),a=SIMD.Float32x4.mul(r,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,a)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,a),l),f=SIMD.Float32x4.mul(r,s),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),a=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(f,c)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(f,l)),e):null},i.invert=n.USE_SIMD?i.SIMD.invert:i.scalar.invert,i.scalar.adjoint=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],_=t[14],g=t[15];return e[0]=s*(h*g-d*_)-f*(u*g-c*_)+v*(u*d-c*h),e[1]=-(n*(h*g-d*_)-f*(i*g-o*_)+v*(i*d-o*h)),e[2]=n*(u*g-c*_)-s*(i*g-o*_)+v*(i*c-o*u),e[3]=-(n*(u*d-c*h)-s*(i*d-o*h)+f*(i*c-o*u)),e[4]=-(a*(h*g-d*_)-l*(u*g-c*_)+p*(u*d-c*h)),e[5]=r*(h*g-d*_)-l*(i*g-o*_)+p*(i*d-o*h),e[6]=-(r*(u*g-c*_)-a*(i*g-o*_)+p*(i*c-o*u)),e[7]=r*(u*d-c*h)-a*(i*d-o*h)+l*(i*c-o*u),e[8]=a*(f*g-d*v)-l*(s*g-c*v)+p*(s*d-c*f),e[9]=-(r*(f*g-d*v)-l*(n*g-o*v)+p*(n*d-o*f)),e[10]=r*(s*g-c*v)-a*(n*g-o*v)+p*(n*c-o*s),e[11]=-(r*(s*d-c*f)-a*(n*d-o*f)+l*(n*c-o*s)),e[12]=-(a*(f*_-h*v)-l*(s*_-u*v)+p*(s*h-u*f)),e[13]=r*(f*_-h*v)-l*(n*_-i*v)+p*(n*h-i*f),e[14]=-(r*(s*_-u*v)-a*(n*_-i*v)+p*(n*u-i*s)),e[15]=r*(s*h-u*f)-a*(n*h-i*f)+l*(n*u-i*s),e},i.SIMD.adjoint=function(e,t){var r,n,i,o,a,s,u,c,l,f,h,d,p,r=SIMD.Float32x4.load(t,0),n=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),o=SIMD.Float32x4.load(t,12);return l=SIMD.Float32x4.shuffle(r,n,0,1,4,5),s=SIMD.Float32x4.shuffle(i,o,0,1,4,5),a=SIMD.Float32x4.shuffle(l,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,l,1,3,5,7),l=SIMD.Float32x4.shuffle(r,n,2,3,6,7),c=SIMD.Float32x4.shuffle(i,o,2,3,6,7),u=SIMD.Float32x4.shuffle(l,c,0,2,4,6),c=SIMD.Float32x4.shuffle(c,l,1,3,5,7),l=SIMD.Float32x4.mul(u,c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.mul(s,l),h=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,l),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),l=SIMD.Float32x4.mul(s,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),f),p=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,l)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),f),d=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,l)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),l=SIMD.Float32x4.mul(a,s),l=SIMD.Float32x4.swizzle(l,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),d),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,l),p),l=SIMD.Float32x4.swizzle(l,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,l),d),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,l)),l=SIMD.Float32x4.mul(a,c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,l)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),d),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,l)),l=SIMD.Float32x4.mul(a,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),h),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,l)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),p),SIMD.Float32x4.store(e,0,f),SIMD.Float32x4.store(e,4,h),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,p),e},i.adjoint=n.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint,i.determinant=function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],_=e[15],g=t*a-r*o,y=t*s-n*o,b=t*u-i*o,m=r*s-n*a,w=r*u-i*a,E=n*u-i*s,x=c*p-l*d,T=c*v-f*d,O=c*_-h*d,A=l*v-f*p,S=l*_-h*p,I=f*_-h*v;return g*I-y*S+b*A+m*O-w*T+E*x},i.SIMD.multiply=function(e,t,r){var n=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(r,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(e,0,u);var c=SIMD.Float32x4.load(r,4),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),a))));SIMD.Float32x4.store(e,4,l);var f=SIMD.Float32x4.load(r,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(e,8,h);var d=SIMD.Float32x4.load(r,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),a))));return SIMD.Float32x4.store(e,12,p),e},i.scalar.multiply=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],_=t[13],g=t[14],y=t[15],b=r[0],m=r[1],w=r[2],E=r[3];return e[0]=b*n+m*s+w*f+E*v,e[1]=b*i+m*u+w*h+E*_,e[2]=b*o+m*c+w*d+E*g,e[3]=b*a+m*l+w*p+E*y,b=r[4],m=r[5],w=r[6],E=r[7],e[4]=b*n+m*s+w*f+E*v,e[5]=b*i+m*u+w*h+E*_,e[6]=b*o+m*c+w*d+E*g,e[7]=b*a+m*l+w*p+E*y,b=r[8],m=r[9],w=r[10],E=r[11],e[8]=b*n+m*s+w*f+E*v,e[9]=b*i+m*u+w*h+E*_,e[10]=b*o+m*c+w*d+E*g,e[11]=b*a+m*l+w*p+E*y,b=r[12],m=r[13],w=r[14],E=r[15],e[12]=b*n+m*s+w*f+E*v,e[13]=b*i+m*u+w*h+E*_,e[14]=b*o+m*c+w*d+E*g,e[15]=b*a+m*l+w*p+E*y,e},i.multiply=n.USE_SIMD?i.SIMD.multiply:i.scalar.multiply,i.mul=i.multiply,i.scalar.translate=function(e,t,r){var n,i,o,a,s,u,c,l,f,h,d,p,v=r[0],_=r[1],g=r[2];return t===e?(e[12]=t[0]*v+t[4]*_+t[8]*g+t[12],e[13]=t[1]*v+t[5]*_+t[9]*g+t[13],e[14]=t[2]*v+t[6]*_+t[10]*g+t[14],e[15]=t[3]*v+t[7]*_+t[11]*g+t[15]):(n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=n*v+s*_+f*g+t[12],e[13]=i*v+u*_+h*g+t[13],e[14]=o*v+c*_+d*g+t[14],e[15]=a*v+l*_+p*g+t[15]),e},i.SIMD.translate=function(e,t,r){var n=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(r[0],r[1],r[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,0,0,0,0)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2));var u=SIMD.Float32x4.add(n,SIMD.Float32x4.add(i,SIMD.Float32x4.add(o,a)));return SIMD.Float32x4.store(e,12,u),e},i.translate=n.USE_SIMD?i.SIMD.translate:i.scalar.translate,i.scalar.scale=function(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.SIMD.scale=function(e,t,r){var n,i,o,a=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(a,0,0,0,0))),i=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,1,1,1,1))),o=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.scale=n.USE_SIMD?i.SIMD.scale:i.scalar.scale,i.rotate=function(e,t,r,i){var o,a,s,u,c,l,f,h,d,p,v,_,g,y,b,m,w,E,x,T,O,A,S,I,R=i[0],M=i[1],k=i[2],P=Math.sqrt(R*R+M*M+k*k);return Math.abs(P)<n.EPSILON?null:(P=1/P,R*=P,M*=P,k*=P,o=Math.sin(r),a=Math.cos(r),s=1-a,u=t[0],c=t[1],l=t[2],f=t[3],h=t[4],d=t[5],p=t[6],v=t[7],_=t[8],g=t[9],y=t[10],b=t[11],m=R*R*s+a,w=M*R*s+k*o,E=k*R*s-M*o,x=R*M*s-k*o,T=M*M*s+a,O=k*M*s+R*o,A=R*k*s+M*o,S=M*k*s-R*o,I=k*k*s+a,e[0]=u*m+h*w+_*E,e[1]=c*m+d*w+g*E,e[2]=l*m+p*w+y*E,e[3]=f*m+v*w+b*E,e[4]=u*x+h*T+_*O,e[5]=c*x+d*T+g*O,e[6]=l*x+p*T+y*O,e[7]=f*x+v*T+b*O,e[8]=u*A+h*S+_*I,e[9]=c*A+d*S+g*I,e[10]=l*A+p*S+y*I,e[11]=f*A+v*S+b*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},i.scalar.rotateX=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*n,e[5]=a*i+l*n,e[6]=s*i+f*n,e[7]=u*i+h*n,e[8]=c*i-o*n,e[9]=l*i-a*n,e[10]=f*i-s*n,e[11]=h*i-u*n,e},i.SIMD.rotateX=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),i=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,n))),e},i.rotateX=n.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX,i.scalar.rotateY=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*n,e[1]=a*i-l*n,e[2]=s*i-f*n,e[3]=u*i-h*n,e[8]=o*n+c*i,e[9]=a*n+l*i,e[10]=s*n+f*i,e[11]=u*n+h*i,e},i.SIMD.rotateY=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),i=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,n))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(a,i))),e},i.rotateY=n.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY,i.scalar.rotateZ=function(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*n,e[1]=a*i+l*n,e[2]=s*i+f*n,e[3]=u*i+h*n,e[4]=c*i-o*n,e[5]=l*i-a*n,e[6]=f*i-s*n,e[7]=h*i-u*n,e},i.SIMD.rotateZ=function(e,t,r){var n=SIMD.Float32x4.splat(Math.sin(r)),i=SIMD.Float32x4.splat(Math.cos(r));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var o=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,n))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,n))),e},i.rotateZ=n.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ,i.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},i.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromRotation=function(e,t,r){var i,o,a,s=r[0],u=r[1],c=r[2],l=Math.sqrt(s*s+u*u+c*c);return Math.abs(l)<n.EPSILON?null:(l=1/l,s*=l,u*=l,c*=l,i=Math.sin(t),o=Math.cos(t),a=1-o,e[0]=s*s*a+o,e[1]=u*s*a+c*i,e[2]=c*s*a-u*i,e[3]=0,e[4]=s*u*a-c*i,e[5]=u*u*a+o,e[6]=c*u*a+s*i,e[7]=0,e[8]=s*c*a+u*i,e[9]=u*c*a-s*i,e[10]=c*c*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},i.fromXRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromYRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromZRotation=function(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.fromRotationTranslation=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,c=o+o,l=n*s,f=n*u,h=n*c,d=i*u,p=i*c,v=o*c,_=a*s,g=a*u,y=a*c;return e[0]=1-(d+v),e[1]=f+y,e[2]=h-g,e[3]=0,e[4]=f-y,e[5]=1-(l+v),e[6]=p+_,e[7]=0,e[8]=h+g,e[9]=p-_,e[10]=1-(l+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},i.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},i.getRotation=function(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e},i.fromRotationTranslationScale=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,d=i*l,p=o*c,v=o*l,_=a*l,g=s*u,y=s*c,b=s*l,m=n[0],w=n[1],E=n[2];return e[0]=(1-(p+_))*m,e[1]=(h+b)*m,e[2]=(d-y)*m,e[3]=0,e[4]=(h-b)*w,e[5]=(1-(f+_))*w,e[6]=(v+g)*w,e[7]=0,e[8]=(d+y)*E,e[9]=(v-g)*E,e[10]=(1-(f+p))*E,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e},i.fromRotationTranslationScaleOrigin=function(e,t,r,n,i){var o=t[0],a=t[1],s=t[2],u=t[3],c=o+o,l=a+a,f=s+s,h=o*c,d=o*l,p=o*f,v=a*l,_=a*f,g=s*f,y=u*c,b=u*l,m=u*f,w=n[0],E=n[1],x=n[2],T=i[0],O=i[1],A=i[2];return e[0]=(1-(v+g))*w,e[1]=(d+m)*w,e[2]=(p-b)*w,e[3]=0,e[4]=(d-m)*E,e[5]=(1-(h+g))*E,e[6]=(_+y)*E,e[7]=0,e[8]=(p+b)*x,e[9]=(_-y)*x,e[10]=(1-(h+v))*x,e[11]=0,e[12]=r[0]+T-(e[0]*T+e[4]*O+e[8]*A),e[13]=r[1]+O-(e[1]*T+e[5]*O+e[9]*A),e[14]=r[2]+A-(e[2]*T+e[6]*O+e[10]*A),e[15]=1,e},i.fromQuat=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,h=i*a,d=i*s,p=i*u,v=o*a,_=o*s,g=o*u;return e[0]=1-f-p,e[1]=l+g,e[2]=h-_,e[3]=0,e[4]=l-g,e[5]=1-c-p,e[6]=d+v,e[7]=0,e[8]=h+_,e[9]=d-v,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},i.frustum=function(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e},i.perspective=function(e,t,r,n,i){var o=1/Math.tan(t/2),a=1/(n-i);return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*a,e[15]=0,e},i.perspectiveFromFieldOfView=function(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-((a-s)*u*.5),e[9]=(i-o)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e},i.ortho=function(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*c,e[15]=1,e},i.lookAt=function(e,t,r,o){var a,s,u,c,l,f,h,d,p,v,_=t[0],g=t[1],y=t[2],b=o[0],m=o[1],w=o[2],E=r[0],x=r[1],T=r[2];return Math.abs(_-E)<n.EPSILON&&Math.abs(g-x)<n.EPSILON&&Math.abs(y-T)<n.EPSILON?i.identity(e):(h=_-E,d=g-x,p=y-T,v=1/Math.sqrt(h*h+d*d+p*p),h*=v,d*=v,p*=v,a=m*p-w*d,s=w*h-b*p,u=b*d-m*h,v=Math.sqrt(a*a+s*s+u*u),v?(v=1/v,a*=v,s*=v,u*=v):(a=0,s=0,u=0),c=d*u-p*s,l=p*a-h*u,f=h*s-d*a,v=Math.sqrt(c*c+l*l+f*f),v?(v=1/v,c*=v,l*=v,f*=v):(c=0,l=0,f=0),e[0]=a,e[1]=c,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=d,e[7]=0,e[8]=u,e[9]=f,e[10]=p,e[11]=0,e[12]=-(a*_+s*g+u*y),e[13]=-(c*_+l*g+f*y),e[14]=-(h*_+d*g+p*y),e[15]=1,e)},i.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},i.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},i.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e},i.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e},i.sub=i.subtract,i.multiplyScalar=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e},i.multiplyScalarAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},i.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],_=e[13],g=e[14],y=e[15],b=t[0],m=t[1],w=t[2],E=t[3],x=t[4],T=t[5],O=t[6],A=t[7],S=t[8],I=t[9],R=t[10],M=t[11],k=t[12],P=t[13],j=t[14],N=t[15];return Math.abs(r-b)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-m)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(o-w)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-E)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-x)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-T)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-O)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-A)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(f-S)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(h-I)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-R)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(p-M)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(v-k)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(_-P)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(P))&&Math.abs(g-j)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(j))&&Math.abs(y-N)<=n.EPSILON*Math.max(1,Math.abs(y),Math.abs(N))},t.exports=i},{"./common.js":386}],391:[function(e,t,r){var n=e("./common.js"),i=e("./mat3.js"),o=e("./vec3.js"),a=e("./vec4.js"),s={};s.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.rotationTo=function(){var e=o.create(),t=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(n,i,a){var u=o.dot(i,a);return u<-.999999?(o.cross(e,t,i),o.length(e)<1e-6&&o.cross(e,r,i),o.normalize(e,e),s.setAxisAngle(n,e,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(e,i,a),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+u,s.normalize(n,n))}}(),s.setAxes=function(){var e=i.create();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],s.normalize(t,s.fromMat3(t,e))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.setAxisAngle=function(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e},s.getAxisAngle=function(e,t){var r=2*Math.acos(t[3]),n=Math.sin(r/2);return 0!=n?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r},s.add=a.add,s.multiply=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],u=r[1],c=r[2],l=r[3];return e[0]=n*l+a*s+i*c-o*u,e[1]=i*l+a*u+o*s-n*c,e[2]=o*l+a*c+n*u-i*s,e[3]=a*l-n*s-i*u-o*c,e},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-n*s,e},s.rotateY=function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u-o*s,e[1]=i*u+a*s,e[2]=o*u+n*s,e[3]=a*u-i*s,e},s.rotateZ=function(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),u=Math.cos(r);return e[0]=n*u+i*s,e[1]=i*u-n*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e},s.calculateW=function(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(e,t,r,n){var i,o,a,s,u,c=t[0],l=t[1],f=t[2],h=t[3],d=r[0],p=r[1],v=r[2],_=r[3];return o=c*d+l*p+f*v+h*_,o<0&&(o=-o,d=-d,p=-p,v=-v,_=-_),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-n)*i)/a,u=Math.sin(n*i)/a):(s=1-n,u=n),e[0]=s*c+u*d,e[1]=s*l+u*p,e[2]=s*f+u*v,e[3]=s*h+u*_,e},s.sqlerp=function(){var e=s.create(),t=s.create();return function(r,n,i,o,a,u){return s.slerp(e,n,a,u),s.slerp(t,i,o,u),s.slerp(r,e,t,2*u*(1-u)),r}}(),s.invert=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e},s.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(e,t){var r,n=t[0]+t[4]+t[8];if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),
t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*o+a]-t[3*a+o])*r,e[o]=(t[3*o+i]+t[3*i+o])*r,e[a]=(t[3*a+i]+t[3*i+a])*r}return e},s.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},s.exactEquals=a.exactEquals,s.equals=a.equals,t.exports=s},{"./common.js":386,"./mat3.js":389,"./vec3.js":393,"./vec4.js":394}],392:[function(e,t,r){var n=e("./common.js"),i={};i.create=function(){var e=new n.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},i.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},i.fromValues=function(e,t){var r=new n.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},i.set=function(e,t,r){return e[0]=t,e[1]=r,e},i.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e},i.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e},i.sub=i.subtract,i.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e},i.mul=i.multiply,i.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e},i.div=i.divide,i.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},i.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},i.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e},i.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e},i.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},i.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e},i.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e},i.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)},i.dist=i.distance,i.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n},i.sqrDist=i.squaredDistance,i.length=function(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},i.len=i.length,i.squaredLength=function(e){var t=e[0],r=e[1];return t*t+r*r},i.sqrLen=i.squaredLength,i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},i.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},i.normalize=function(e,t){var r=t[0],n=t[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},i.cross=function(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e},i.lerp=function(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e},i.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e},i.transformMat2=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e},i.transformMat2d=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e},i.transformMat3=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e},i.transformMat4=function(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e},i.forEach=function(){var e=i.create();return function(t,r,n,i,o,a){var s,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),i.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},i.equals=function(e,t){var r=e[0],i=e[1],o=t[0],a=t[1];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))},t.exports=i},{"./common.js":386}],393:[function(e,t,r){var n=e("./common.js"),i={};i.create=function(){var e=new n.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},i.clone=function(e){var t=new n.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.fromValues=function(e,t,r){var i=new n.ARRAY_TYPE(3);return i[0]=e,i[1]=t,i[2]=r,i},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},i.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},i.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},i.sub=i.subtract,i.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e},i.mul=i.multiply,i.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e},i.div=i.divide,i.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},i.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},i.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},i.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},i.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},i.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},i.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},i.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)},i.dist=i.distance,i.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i},i.sqrDist=i.squaredDistance,i.length=function(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)},i.len=i.length,i.squaredLength=function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},i.sqrLen=i.squaredLength,i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},i.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},i.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},i.cross=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2];return e[0]=i*u-o*s,e[1]=o*a-n*u,e[2]=n*s-i*a,e},i.lerp=function(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e},i.hermite=function(e,t,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return e[0]=t[0]*s+r[0]*u+n[0]*c+i[0]*l,e[1]=t[1]*s+r[1]*u+n[1]*c+i[1]*l,e[2]=t[2]*s+r[2]*u+n[2]*c+i[2]*l,e},i.bezier=function(e,t,r,n,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,h=u*o;return e[0]=t[0]*c+r[0]*l+n[0]*f+i[0]*h,e[1]=t[1]*c+r[1]*l+n[1]*f+i[1]*h,e[2]=t[2]*c+r[2]*l+n[2]*f+i[2]*h,e},i.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*o,e[1]=Math.sin(r)*o,e[2]=i*t,e},i.transformMat4=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e},i.transformMat3=function(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e},i.transformQuat=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,h=c*o+a*i-s*n,d=-a*n-s*i-u*o;return e[0]=l*c+d*-a+f*-u-h*-s,e[1]=f*c+d*-s+h*-a-l*-u,e[2]=h*c+d*-u+l*-s-f*-a,e},i.rotateX=function(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},i.rotateY=function(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},i.rotateZ=function(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e},i.forEach=function(){var e=i.create();return function(t,r,n,i,o,a){var s,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),i.angle=function(e,t){var r=i.fromValues(e[0],e[1],e[2]),n=i.fromValues(t[0],t[1],t[2]);i.normalize(r,r),i.normalize(n,n);var o=i.dot(r,n);return o>1?0:Math.acos(o)},i.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},i.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=t[0],s=t[1],u=t[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},t.exports=i},{"./common.js":386}],394:[function(e,t,r){var n=e("./common.js"),i={};i.create=function(){var e=new n.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},i.clone=function(e){var t=new n.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.fromValues=function(e,t,r,i){var o=new n.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.set=function(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e},i.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},i.subtract=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e},i.sub=i.subtract,i.multiply=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},i.mul=i.multiply,i.divide=function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e},i.div=i.divide,i.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},i.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},i.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},i.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},i.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},i.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},i.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},i.distance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return r*r+n*n+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)},i.len=i.length,i.squaredLength=function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i},i.sqrLen=i.squaredLength,i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},i.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},i.normalize=function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},i.lerp=function(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e},i.random=function(e,t){return t=t||1,e[0]=n.RANDOM(),e[1]=n.RANDOM(),e[2]=n.RANDOM(),e[3]=n.RANDOM(),i.normalize(e,e),i.scale(e,e,t),e},i.transformMat4=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e},i.transformQuat=function(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,h=c*o+a*i-s*n,d=-a*n-s*i-u*o;return e[0]=l*c+d*-a+f*-u-h*-s,e[1]=f*c+d*-s+h*-a-l*-u,e[2]=h*c+d*-u+l*-s-f*-a,e[3]=t[3],e},i.forEach=function(){var e=i.create();return function(t,r,n,i,o,a){var s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,t.length):t.length,s=n;s<u;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),i.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},i.equals=function(e,t){var r=e[0],i=e[1],o=e[2],a=e[3],s=t[0],u=t[1],c=t[2],l=t[3];return Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},t.exports=i},{"./common.js":386}],395:[function(e,t,r){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],396:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,n),o-=c}return(d?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+d]=255&a,d+=p,a/=256,c-=8);e[r+d-p]|=128*v}},{}],397:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],398:[function(e,t,r){"use strict";function n(e){for(var t=new Array(e),r=0;r<e;++r)t[r]=r;return t}t.exports=n},{}],399:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],400:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],401:[function(e,t,r){var n=e("./lib/encoder"),i=e("./lib/decoder");t.exports={encode:n,decode:i}},{"./lib/decoder":402,"./lib/encoder":403}],402:[function(e,t,r){(function(e){function r(t){var r=new Uint8Array(t),i=new n;i.parse(r);for(var o=i.getData(i.width,i.height),a=new e(i.width*i.height*4),s=0,u=0;u<a.length;u++)a[u+(u/3|0)]=o[s++],u%4==3&&(a[u]=255);return{data:a,width:i.width,height:i.height}}var n=function(){"use strict";function e(){}function t(e,t){for(var r,n,i=0,o=[],a=16;a>0&&!e[a-1];)a--;o.push({children:[],index:0});var s,u=o[0];for(r=0;r<a;r++){for(n=0;n<e[r];n++){for(u=o.pop(),u.children[u.index]=t[i];u.index>0;)u=o.pop();for(u.index++,o.push(u);o.length<=r;)o.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s;i++}r+1<a&&(o.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s)}return o[0].children}function r(e,t,r,n,i,a,s,u,c){function l(){if(P>0)return P--,k>>P&1;if(k=e[t++],255==k){var r=e[t++];if(r)throw"unexpected marker: "+(k<<8|r).toString(16)}return P=7,k>>>7}function f(e){for(var t,r=e;null!==(t=l());){if(r=r[t],"number"==typeof r)return r;if("object"!=typeof r)throw"invalid huffman sequence"}return null}function h(e){for(var t=0;e>0;){var r=l();if(null===r)return;t=t<<1|r,e--}return t}function d(e){var t=h(e);return t>=1<<e-1?t:t+(-1<<e)+1}function p(e,t){var r=f(e.huffmanTableDC),n=0===r?0:d(r);t[0]=e.pred+=n;for(var i=1;i<64;){var a=f(e.huffmanTableAC),s=15&a,u=a>>4;if(0!==s){i+=u;var c=o[i];t[c]=d(s),i++}else{if(u<15)break;i+=16}}}function v(e,t){var r=f(e.huffmanTableDC),n=0===r?0:d(r)<<c;t[0]=e.pred+=n}function _(e,t){t[0]|=l()<<c}function g(e,t){if(j>0)return void j--;for(var r=a,n=s;r<=n;){var i=f(e.huffmanTableAC),u=15&i,l=i>>4;if(0!==u){r+=l;var p=o[r];t[p]=d(u)*(1<<c),r++}else{if(l<15){j=h(l)+(1<<l)-1;break}r+=16}}}function y(e,t){for(var r=a,n=s,i=0;r<=n;){var u=o[r];switch(N){case 0:var p=f(e.huffmanTableAC),v=15&p,i=p>>4;if(0===v)i<15?(j=h(i)+(1<<i),N=4):(i=16,N=1);else{if(1!==v)throw"invalid ACn encoding";w=d(v),N=i?2:3}continue;case 1:case 2:t[u]?t[u]+=l()<<c:(i--,0===i&&(N=2==N?3:0));break;case 3:t[u]?t[u]+=l()<<c:(t[u]=w<<c,N=0);break;case 4:t[u]&&(t[u]+=l()<<c)}r++}4===N&&(j--,0===j&&(N=0))}function b(e,t,r,n,i){var o=r/I|0,a=r%I,s=o*e.v+n,u=a*e.h+i;t(e,e.blocks[s][u])}function m(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;t(e,e.blocks[n][i])}var w,E,x,T,O,A,S,I=(r.precision,r.samplesPerLine,r.scanLines,r.mcusPerLine),R=r.progressive,M=(r.maxH,r.maxV,t),k=0,P=0,j=0,N=0,F=n.length;S=R?0===a?0===u?v:_:0===u?g:y:p;var L,C,D=0;C=1==F?n[0].blocksPerLine*n[0].blocksPerColumn:I*r.mcusPerColumn,i||(i=C);for(var U,B;D<C;){for(x=0;x<F;x++)n[x].pred=0;if(j=0,1==F)for(E=n[0],A=0;A<i;A++)m(E,S,D),D++;else for(A=0;A<i;A++){for(x=0;x<F;x++)for(E=n[x],U=E.h,B=E.v,T=0;T<B;T++)for(O=0;O<U;O++)b(E,S,D,T,O);if(D++,D===C)break}if(P=0,L=e[t]<<8|e[t+1],L<65280)throw"marker was not found";if(!(L>=65488&&L<=65495))break;t+=2}return t-M}function n(e,t){function r(e,r,n){var i,o,p,v,_,g,y,b,m,w,E=t.quantizationTable,x=n;for(w=0;w<64;w++)x[w]=e[w]*E[w];for(w=0;w<8;++w){var T=8*w;0!=x[1+T]||0!=x[2+T]||0!=x[3+T]||0!=x[4+T]||0!=x[5+T]||0!=x[6+T]||0!=x[7+T]?(i=h*x[0+T]+128>>8,o=h*x[4+T]+128>>8,p=x[2+T],v=x[6+T],_=d*(x[1+T]-x[7+T])+128>>8,b=d*(x[1+T]+x[7+T])+128>>8,g=x[3+T]<<4,y=x[5+T]<<4,m=i-o+1>>1,i=i+o+1>>1,o=m,m=p*f+v*l+128>>8,p=p*l-v*f+128>>8,v=m,m=_-y+1>>1,_=_+y+1>>1,y=m,m=b+g+1>>1,g=b-g+1>>1,b=m,m=i-v+1>>1,i=i+v+1>>1,v=m,m=o-p+1>>1,o=o+p+1>>1,p=m,m=_*c+b*u+2048>>12,_=_*u-b*c+2048>>12,b=m,m=g*s+y*a+2048>>12,g=g*a-y*s+2048>>12,y=m,x[0+T]=i+b,x[7+T]=i-b,x[1+T]=o+y,x[6+T]=o-y,x[2+T]=p+g,x[5+T]=p-g,x[3+T]=v+_,x[4+T]=v-_):(m=h*x[0+T]+512>>10,x[0+T]=m,x[1+T]=m,x[2+T]=m,x[3+T]=m,x[4+T]=m,x[5+T]=m,x[6+T]=m,x[7+T]=m)}for(w=0;w<8;++w){var O=w;0!=x[8+O]||0!=x[16+O]||0!=x[24+O]||0!=x[32+O]||0!=x[40+O]||0!=x[48+O]||0!=x[56+O]?(i=h*x[0+O]+2048>>12,o=h*x[32+O]+2048>>12,p=x[16+O],v=x[48+O],_=d*(x[8+O]-x[56+O])+2048>>12,b=d*(x[8+O]+x[56+O])+2048>>12,g=x[24+O],y=x[40+O],m=i-o+1>>1,i=i+o+1>>1,o=m,m=p*f+v*l+2048>>12,p=p*l-v*f+2048>>12,v=m,m=_-y+1>>1,_=_+y+1>>1,y=m,m=b+g+1>>1,g=b-g+1>>1,b=m,m=i-v+1>>1,i=i+v+1>>1,v=m,m=o-p+1>>1,o=o+p+1>>1,p=m,m=_*c+b*u+2048>>12,_=_*u-b*c+2048>>12,b=m,m=g*s+y*a+2048>>12,g=g*a-y*s+2048>>12,y=m,x[0+O]=i+b,x[56+O]=i-b,x[8+O]=o+y,x[48+O]=o-y,x[16+O]=p+g,x[40+O]=p-g,x[24+O]=v+_,x[32+O]=v-_):(m=h*n[w+0]+8192>>14,x[0+O]=m,x[8+O]=m,x[16+O]=m,x[24+O]=m,x[32+O]=m,x[40+O]=m,x[48+O]=m,x[56+O]=m)}for(w=0;w<64;++w){var A=128+(x[w]+8>>4);r[w]=A<0?0:A>255?255:A}}for(var n,i,o=[],p=t.blocksPerLine,v=t.blocksPerColumn,_=p<<3,g=new Int32Array(64),y=new Uint8Array(64),b=0;b<v;b++){var m=b<<3;for(n=0;n<8;n++)o.push(new Uint8Array(_));for(var w=0;w<p;w++){r(t.blocks[b][w],y,g);var E=0,x=w<<3;for(i=0;i<8;i++){var T=o[m+i];for(n=0;n<8;n++)T[x+n]=y[E++]}}}return o}function i(e){return e<0?0:e>255?255:e}var o=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),a=4017,s=799,u=3406,c=2276,l=1567,f=3784,h=5793,d=2896;return e.prototype={load:function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){var e=new Uint8Array(t.response||t.mozResponseArrayBuffer);this.parse(e),this.onload&&this.onload()}.bind(this),t.send(null)},parse:function(e){function i(){var t=e[l]<<8|e[l+1];return l+=2,t}function a(){var t=i(),r=e.subarray(l,l+t-2);return l+=r.length,r}function s(e){var t,r,n=0,i=0;for(r in e.components)e.components.hasOwnProperty(r)&&(t=e.components[r],n<t.h&&(n=t.h),i<t.v&&(i=t.v));var o=Math.ceil(e.samplesPerLine/8/n),a=Math.ceil(e.scanLines/8/i);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];for(var s=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),u=Math.ceil(Math.ceil(e.scanLines/8)*t.v/i),c=o*t.h,l=a*t.v,f=[],h=0;h<l;h++){for(var d=[],p=0;p<c;p++)d.push(new Int32Array(64));f.push(d)}t.blocksPerLine=s,t.blocksPerColumn=u,t.blocks=f}e.maxH=n,e.maxV=i,e.mcusPerLine=o,e.mcusPerColumn=a}var u,c,l=0,f=(e.length,null),h=null,d=[],p=[],v=[],_=[],g=i();if(65496!=g)throw"SOI not found";for(g=i();65497!=g;){var y,b;switch(g){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var m=a();65504===g&&74===m[0]&&70===m[1]&&73===m[2]&&70===m[3]&&0===m[4]&&(f={version:{major:m[5],minor:m[6]},densityUnits:m[7],xDensity:m[8]<<8|m[9],yDensity:m[10]<<8|m[11],thumbWidth:m[12],thumbHeight:m[13],thumbData:m.subarray(14,14+3*m[12]*m[13])}),65518===g&&65===m[0]&&100===m[1]&&111===m[2]&&98===m[3]&&101===m[4]&&0===m[5]&&(h={version:m[6],flags0:m[7]<<8|m[8],flags1:m[9]<<8|m[10],transformCode:m[11]});break;case 65499:for(var w=i(),E=w+l-2;l<E;){var x=e[l++],T=new Int32Array(64);if(x>>4===0)for(b=0;b<64;b++){var O=o[b];T[O]=e[l++]}else{if(x>>4!==1)throw"DQT: invalid table spec";for(b=0;b<64;b++){var O=o[b];T[O]=i()}}d[15&x]=T}break;case 65472:case 65473:case 65474:i(),u={},u.extended=65473===g,u.progressive=65474===g,u.precision=e[l++],u.scanLines=i(),u.samplesPerLine=i(),u.components={},u.componentsOrder=[];var A,S=e[l++];for(y=0;y<S;y++){A=e[l];var I=e[l+1]>>4,R=15&e[l+1],M=e[l+2];u.componentsOrder.push(A),u.components[A]={h:I,v:R,quantizationTable:d[M]},l+=3}s(u),p.push(u);break;case 65476:var k=i();for(y=2;y<k;){var P=e[l++],j=new Uint8Array(16),N=0;for(b=0;b<16;b++,l++)N+=j[b]=e[l];var F=new Uint8Array(N);for(b=0;b<N;b++,l++)F[b]=e[l];y+=17+N,(P>>4===0?_:v)[15&P]=t(j,F)}break;case 65501:i(),c=i();break;case 65498:var L,C=(i(),e[l++]),D=[];for(y=0;y<C;y++){L=u.components[e[l++]];var U=e[l++];L.huffmanTableDC=_[U>>4],L.huffmanTableAC=v[15&U],D.push(L)}var B=e[l++],G=e[l++],z=e[l++],H=r(e,l,u,D,c,B,G,z>>4,15&z);l+=H;break;default:if(255==e[l-3]&&e[l-2]>=192&&e[l-2]<=254){l-=3;break}throw"unknown JPEG marker "+g.toString(16)}g=i()}if(1!=p.length)throw"only single frame JPEGs supported";this.width=u.samplesPerLine,this.height=u.scanLines,this.jfif=f,this.adobe=h,this.components=[];for(var y=0;y<u.componentsOrder.length;y++){var L=u.components[u.componentsOrder[y]];this.components.push({lines:n(u,L),scaleX:L.h/u.maxH,scaleY:L.v/u.maxV})}},getData:function(e,t){var r,n,o,a,s,u,c,l,f,h,d,p,v,_,g,y,b,m,w,E,x,T=this.width/e,O=this.height/t,A=0,S=e*t*this.components.length,I=new Uint8Array(S);switch(this.components.length){case 1:for(r=this.components[0],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*O],f=0;f<e;f++)d=s[0|f*r.scaleX*T],I[A++]=d;break;case 2:for(r=this.components[0],n=this.components[1],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*O],u=n.lines[0|h*n.scaleY*O],f=0;f<e;f++)d=s[0|f*r.scaleX*T],I[A++]=d,d=u[0|f*n.scaleX*T],I[A++]=d;break;case 3:for(x=!0,this.adobe&&this.adobe.transformCode?x=!0:"undefined"!=typeof this.colorTransform&&(x=!!this.colorTransform),r=this.components[0],n=this.components[1],o=this.components[2],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*O],u=n.lines[0|h*n.scaleY*O],c=o.lines[0|h*o.scaleY*O],f=0;f<e;f++)x?(d=s[0|f*r.scaleX*T],p=u[0|f*n.scaleX*T],v=c[0|f*o.scaleX*T],m=i(d+1.402*(v-128)),w=i(d-.3441363*(p-128)-.71413636*(v-128)),E=i(d+1.772*(p-128))):(m=s[0|f*r.scaleX*T],w=u[0|f*n.scaleX*T],E=c[0|f*o.scaleX*T]),I[A++]=m,I[A++]=w,I[A++]=E;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(x=!1,this.adobe&&this.adobe.transformCode?x=!0:"undefined"!=typeof this.colorTransform&&(x=!!this.colorTransform),r=this.components[0],n=this.components[1],o=this.components[2],a=this.components[3],h=0;h<t;h++)for(s=r.lines[0|h*r.scaleY*O],u=n.lines[0|h*n.scaleY*O],c=o.lines[0|h*o.scaleY*O],l=a.lines[0|h*a.scaleY*O],f=0;f<e;f++)x?(d=s[0|f*r.scaleX*T],p=u[0|f*n.scaleX*T],v=c[0|f*o.scaleX*T],_=l[0|f*a.scaleX*T],g=255-i(d+1.402*(v-128)),y=255-i(d-.3441363*(p-128)-.71413636*(v-128)),b=255-i(d+1.772*(p-128))):(g=s[0|f*r.scaleX*T],y=u[0|f*n.scaleX*T],b=c[0|f*o.scaleX*T],_=l[0|f*a.scaleX*T]),I[A++]=g,I[A++]=y,I[A++]=b,I[A++]=_;break;default:throw"Unsupported color mode"}return I},copyToImageData:function(e){var t,r,n,o,a,s,u,c,l,f=e.width,h=e.height,d=e.data,p=this.getData(f,h),v=0,_=0;switch(this.components.length){case 1:for(r=0;r<h;r++)for(t=0;t<f;t++)n=p[v++],d[_++]=n,d[_++]=n,d[_++]=n,d[_++]=255;break;case 3:for(r=0;r<h;r++)for(t=0;t<f;t++)u=p[v++],c=p[v++],l=p[v++],d[_++]=u,d[_++]=c,d[_++]=l,d[_++]=255;break;case 4:for(r=0;r<h;r++)for(t=0;t<f;t++)a=p[v++],s=p[v++],n=p[v++],o=p[v++],u=255-i(a*(1-o/255)+o),c=255-i(s*(1-o/255)+o),l=255-i(n*(1-o/255)+o),d[_++]=u,d[_++]=c,d[_++]=l,d[_++]=255;break;default:throw"Unsupported color mode"}}},e}();t.exports=r}).call(this,e("buffer").Buffer)},{buffer:11}],403:[function(e,t,r){(function(e){function r(t){function r(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=O((t[r]*e+50)/100);n<1?n=1:n>255&&(n=255),A[z[r]]=n}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var a=O((i[o]*e+50)/100);a<1?a=1:a>255&&(a=255),S[z[o]]=a}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],u=0,c=0;c<8;c++)for(var l=0;l<8;l++)I[u]=1/(A[z[u]]*s[c]*s[l]*8),R[u]=1/(S[z[u]]*s[c]*s[l]*8),u++}function n(e,t){for(var r=0,n=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=e[o];a++)i[t[n]]=[],i[t[n]][0]=r,i[t[n]][1]=o,n++,r++;r*=2}return i}function i(){m=n(H,W),w=n(q,X),E=n(V,Y),x=n(Z,K)}function o(){for(var e=1,t=2,r=1;r<=15;r++){for(var n=e;n<t;n++)k[32767+n]=r,M[32767+n]=[],M[32767+n][1]=r,M[32767+n][0]=n;for(var i=-(t-1);i<=-e;i++)k[32767+i]=r,M[32767+i]=[],M[32767+i][1]=r,M[32767+i][0]=t-1+i;e<<=1,t<<=1}}function a(){for(var e=0;e<256;e++)G[e]=19595*e,G[e+256>>0]=38470*e,G[e+512>>0]=7471*e+32768,G[e+768>>0]=-11059*e,G[e+1024>>0]=-21709*e,G[e+1280>>0]=32768*e+8421375,G[e+1536>>0]=-27439*e,G[e+1792>>0]=-5329*e}function s(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(F|=1<<L),r--,L--,L<0&&(255==F?(u(255),u(0)):u(F),L=7,F=0)}function u(e){N.push(e)}function c(e){u(e>>8&255),u(255&e)}function l(e,t){var r,n,i,o,a,s,u,c,l,f=0;const h=8,d=64;for(l=0;l<h;++l){r=e[f],n=e[f+1],i=e[f+2],o=e[f+3],a=e[f+4],s=e[f+5],u=e[f+6],c=e[f+7];var p=r+c,v=r-c,_=n+u,g=n-u,y=i+s,b=i-s,m=o+a,w=o-a,E=p+m,x=p-m,T=_+y,O=_-y;e[f]=E+T,e[f+4]=E-T;var A=.707106781*(O+x);e[f+2]=x+A,e[f+6]=x-A,E=w+b,T=b+g,O=g+v;var S=.382683433*(E-O),I=.5411961*E+S,R=1.306562965*O+S,M=.707106781*T,k=v+M,j=v-M;e[f+5]=j+I,e[f+3]=j-I,e[f+1]=k+R,e[f+7]=k-R,f+=8}for(f=0,l=0;l<h;++l){r=e[f],n=e[f+8],i=e[f+16],o=e[f+24],a=e[f+32],s=e[f+40],u=e[f+48],c=e[f+56];var N=r+c,F=r-c,L=n+u,C=n-u,D=i+s,U=i-s,B=o+a,G=o-a,z=N+B,H=N-B,W=L+D,V=L-D;e[f]=z+W,e[f+32]=z-W;var Y=.707106781*(V+H);e[f+16]=H+Y,e[f+48]=H-Y,z=G+U,W=U+C,V=C+F;var q=.382683433*(z-V),X=.5411961*z+q,Z=1.306562965*V+q,K=.707106781*W,Q=F+K,$=F-K;e[f+40]=$+X,e[f+24]=$-X,e[f+8]=Q+Z,e[f+56]=Q-Z,f++}var J;for(l=0;l<d;++l)J=e[l]*t[l],P[l]=J>0?J+.5|0:J-.5|0;return P}function f(){c(65504),c(16),u(74),u(70),u(73),u(70),u(0),u(1),u(1),u(0),c(1),c(1),u(0),u(0)}function h(e,t){c(65472),c(17),u(8),c(t),c(e),u(3),u(1),u(17),u(0),u(2),u(17),u(1),u(3),u(17),u(1)}function d(){c(65499),c(132),u(0);for(var e=0;e<64;e++)u(A[e]);u(1);for(var t=0;t<64;t++)u(S[t])}function p(){c(65476),c(418),u(0);for(var e=0;e<16;e++)u(H[e+1]);for(var t=0;t<=11;t++)u(W[t]);u(16);for(var r=0;r<16;r++)u(V[r+1]);for(var n=0;n<=161;n++)u(Y[n]);u(1);for(var i=0;i<16;i++)u(q[i+1]);for(var o=0;o<=11;o++)u(X[o]);u(17);for(var a=0;a<16;a++)u(Z[a+1]);for(var s=0;s<=161;s++)u(K[s])}function v(){c(65498),c(12),u(3),u(1),u(0),u(2),u(17),u(3),u(17),u(0),u(63),u(0)}function _(e,t,r,n,i){var o,a=i[0],u=i[240];const c=16,f=63,h=64;for(var d=l(e,t),p=0;p<h;++p)j[z[p]]=d[p];var v=j[0]-r;r=j[0],0==v?s(n[0]):(o=32767+v,s(n[k[o]]),s(M[o]));for(var _=63;_>0&&0==j[_];_--);if(0==_)return s(a),r;for(var g,y=1;y<=_;){for(var b=y;0==j[y]&&y<=_;++y);var m=y-b;if(m>=c){g=m>>4;for(var w=1;w<=g;++w)s(u);m&=15}o=32767+j[y],s(i[(m<<4)+k[o]]),s(M[o]),y++}return _!=f&&s(a),r}function g(){for(var e=String.fromCharCode,t=0;t<256;t++)B[t]=e(t)}function y(e){if(e<=0&&(e=1),e>100&&(e=100),T!=e){var t=0;t=e<50?Math.floor(5e3/e):Math.floor(200-2*e),r(t),T=e}}function b(){var e=(new Date).getTime();t||(t=50),g(),i(),o(),a(),y(t);(new Date).getTime()-e}var m,w,E,x,T,O=(Math.round,Math.floor),A=new Array(64),S=new Array(64),I=new Array(64),R=new Array(64),M=new Array(65535),k=new Array(65535),P=new Array(64),j=new Array(64),N=[],F=0,L=7,C=new Array(64),D=new Array(64),U=new Array(64),B=new Array(256),G=new Array(2048),z=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],H=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Y=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(t,r){(new Date).getTime();r&&y(r),N=new Array,F=0,L=7,c(65496),f(),d(),h(t.width,t.height),p(),v();var n=0,i=0,o=0;F=0,L=7,this.encode.displayName="_encode_";for(var a,u,l,g,b,T,O,A,S,M=t.data,k=t.width,P=t.height,j=4*k,B=0;B<P;){for(a=0;a<j;){for(b=j*B+a,T=b,O=-1,A=0,S=0;S<64;S++)A=S>>3,O=4*(7&S),T=b+A*j+O,B+A>=P&&(T-=j*(B+1+A-P)),a+O>=j&&(T-=a+O-j+4),u=M[T++],l=M[T++],g=M[T++],C[S]=(G[u]+G[l+256>>0]+G[g+512>>0]>>16)-128,D[S]=(G[u+768>>0]+G[l+1024>>0]+G[g+1280>>0]>>16)-128,U[S]=(G[u+1280>>0]+G[l+1536>>0]+G[g+1792>>0]>>16)-128;n=_(C,I,n,m,E),i=_(D,R,i,w,x),o=_(U,R,o,w,x),a+=32}B+=8}if(L>=0){var z=[];z[1]=L+1,z[0]=(1<<L+1)-1,s(z)}return c(65497),new e(N)},b()}function n(e,t){"undefined"==typeof t&&(t=50);var n=new r(t),i=n.encode(e,t);return{data:i,width:e.width,height:e.height}}t.exports=n}).call(this,e("buffer").Buffer)},{buffer:11}],404:[function(e,t,r){(function(e){function r(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e;
}function n(e,t,o,a,s){var u=-1,c=e.length;for(o||(o=i),s||(s=[]);++u<c;){var l=e[u];t>0&&o(l)?t>1?n(l,t-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}function i(e){return S(e)||a(e)||!!(A&&e&&e[A])}function o(e){var t=e?e.length:0;return t?n(e,d):[]}function a(e){return u(e)&&E.call(e,"callee")&&(!O.call(e,"callee")||x.call(e)==v)}function s(e){return null!=e&&l(e.length)&&!c(e)}function u(e){return h(e)&&s(e)}function c(e){var t=f(e)?x.call(e):"";return t==_||t==g}function l(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){return!!e&&"object"==typeof e}var d=1/0,p=9007199254740991,v="[object Arguments]",_="[object Function]",g="[object GeneratorFunction]",y="object"==typeof e&&e&&e.Object===Object&&e,b="object"==typeof self&&self&&self.Object===Object&&self,m=y||b||Function("return this")(),w=Object.prototype,E=w.hasOwnProperty,x=w.toString,T=m.Symbol,O=w.propertyIsEnumerable,A=T?T.isConcatSpreadable:void 0,S=Array.isArray;t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],405:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return t=(0,a.splat)(t),Object.assign(e,{easeIn:function(r){return e(r,t)},easeOut:function(r){return 1-e(1-r,t)},easeInOut:function(r){return r<=.5?e(2*r,t)/2:(2-e(2*(1-r),t))/2}})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../utils"),s=[],u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.opt=(0,a.merge)({delay:0,duration:1e3,transition:function(e){return e},onCompute:a.noop,onComplete:a.noop},t)}return o(e,[{key:"start",value:function(e){this.opt=(0,a.merge)(this.opt,e||{}),this.time=Date.now(),this.animating=!0,s.push(this)}},{key:"step",value:function(){if(this.animating){var e=Date.now(),t=this.time,r=this.opt,n=r.delay,i=r.duration,o=0;return e<t+n?void r.onCompute.call(this,o):void(e<t+n+i?(o=r.transition((e-t-n)/i),r.onCompute.call(this,o)):(this.animating=!1,r.onCompute.call(this,1),r.onComplete.call(this)))}}}],[{key:"compute",value:function(e,t,r){return e+(t-e)*r}}]),e}();r.default=u,u.Queue=s,u.Transition={linear:function(e){return e}};var c=u.Transition;u.prototype.time=null;var l={Pow:function(e,t){return Math.pow(e,t[0]||6)},Expo:function(e){return Math.pow(2,8*(e-1))},Circ:function(e){return 1-Math.sin(Math.acos(e))},Sine:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Back:function(e,t){return t=t[0]||1.618,Math.pow(e,2)*((t+1)*e-t)},Bounce:function(e){for(var t,r=0,n=1;1;r+=n,n/=2)if(e>=(7-4*r)/11){t=n*n-Math.pow((11-6*r-11*e)/4,2);break}return t},Elastic:function(e,t){return Math.pow(2,10*--e)*Math.cos(20*e*Math.PI*(t[0]||1)/3)}};for(var f in l)c[f]=i(l[f]);["Quad","Cubic","Quart","Quint"].forEach(function(e,t){c[e]=i(function(e){return Math.pow(e,[t+2])})});var h;try{h=window}catch(e){h=null}var d=function(){var e=s;if(s=[],e.length){for(var t,r=0,n=e.length;r<n;r++)t=e[r],t.step(),t.animating&&s.push(t);u.Queue=s}};if(h){var p=!1;["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"].forEach(function(e){e in h&&(u.animationTime=function(){return h[e]},p=!0)}),p||(u.animationTime=Date.now),p=!1,["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"].forEach(function(e){e in h&&(u.requestAnimationFrame=function(t){h[e](function(){d(),t()})},p=!0)}),p||(u.requestAnimationFrame=function(e){setTimeout(function(){d(),e()},1e3/60)})}},{"../utils":459}],406:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.cancelAnimationFrame=r.requestAnimationFrame=void 0;var s,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("autobind-decorator"),h=n(f),d=e("../utils"),p=e("../webgl/webgl-checks"),v=r.requestAnimationFrame=function(e){return d.isBrowser?window.requestAnimationFrame(e):setTimeout(e,1e3/60)},_=r.cancelAnimationFrame=function(e){return d.isBrowser?window.cancelAnimationFrame(e):clearTimeout(e)},g=(s=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.gl,a=void 0===n?null:n,s=(r.canvas,r.width),u=void 0===s?null:s,c=r.height,l=void 0===c?null:c,f=r.autoResizeViewport,h=void 0===f||f,p=r.autoResizeCanvas,v=void 0===p||p,_=r.autoResizeDrawingBuffer,g=void 0===_||_,y=r.useDevicePixelRatio,b=void 0===y||y;i(r,["gl","canvas","width","height","autoResizeViewport","autoResizeCanvas","autoResizeDrawingBuffer","useDevicePixelRatio"]);o(this,e),this.update({autoResizeViewport:h,autoResizeCanvas:v,autoResizeDrawingBuffer:g,useDevicePixelRatio:b}),this.width=u,this.height=l,this._startPromise=d.pageLoadPromise.then(function(e){return t.gl=a,e})}return l(e,[{key:"update",value:function(e){var t=e.autoResizeDrawingBuffer,r=void 0===t||t,n=e.autoResizeCanvas,i=void 0===n||n,o=e.autoResizeViewport,a=void 0===o||o,s=e.useDevicePixelRatio,u=void 0===s||s;return this.autoResizeViewport=a,this.autoResizeCanvas=i,this.autoResizeDrawingBuffer=r,this.useDevicePixelRatio=u,this}},{key:"context",value:function(e){var t=this;if(this.gl)throw new Error("AnimationFrame.context - context already provided");return this._startPromise=this._startPromise.then(function(){if(t.gl=e(),!(0,p.isWebGLContext)(t.gl))throw new Error("AnimationFrame.context - illegal context returned")}),this}},{key:"init",value:function(e){var t=this;return this._startPromise=this._startPromise.then(function(){if(!t.gl)throw new Error("AnimationFrame.context - no context provided");return t._initializeContext(),e(t._context)||{}}),this}},{key:"setupFrame",value:function(e){return this._onSetupFrame=e,this}},{key:"frame",value:function(e){return this._onRenderFrame=e,this._restartFrame(),this}},{key:"start",value:function(){var e=this;return this._startPromise.then(function(){e._animationFrameId||(e._animationFrameId=v(e._frame))}),this}},{key:"stop",value:function(){return this._animationFrameId&&(_(this._animationFrameId),this._animationFrameId=null),this}},{key:"resizeCanvas",value:function(e,t){return this._resizeCanvas(e,t),this}},{key:"_initializeContext",value:function(){this._context={gl:this.gl,canvas:this.gl.canvas,stop:this.stop,tick:0,tock:0},this._updateContext()}},{key:"_updateContext",value:function(){var e=this._context.canvas;this._context.width=e.width,this._context.height=e.height,this._context.aspect=e.width/e.height}},{key:"_restartFrame",value:function(){var e=this;this.stop(),this._startPromise.then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._initializeContext(),"object"===("undefined"==typeof t?"undefined":c(t))&&null!==t&&(e._context=u({},t,e._context)),e.start()})}},{key:"_frame",value:function(){var e=this._context.canvas;this._onSetupFrame?this._onSetupFrame(this._context):(this._resizeCanvasDrawingBuffer(e),this.autoResizeViewport&&this.gl.viewport(0,0,e.width,e.height)),this._updateContext(),this._onRenderFrame(this._context),this._context.tick++,this._animationFrameId=v(this._frame)}},{key:"_resizeCanvas",value:function(e,t){var r=this._context.canvas;if(r){if(this.autoResizeDrawingBuffer){var n=this.useDevicePixelRatio?window.devicePixelRatio||1:1,i=Math.floor(e*n),o=Math.floor(t*n);r.width===i&&r.height===o||(r.width=i,r.height=o)}r.style.width=e+"px",r.style.height=t+"px"}return this}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var e=this._context.canvas,t=this.useDevicePixelRatio?window.devicePixelRatio||1:1,r=window.innerWidth,n=window.innerHeight,i=Math.floor(r*t),o=Math.floor(n*t);r===i&&n===o||(e.width=i,e.height=o,e.style.width=r,e.style.height=n)}}},{key:"_resizeDrawingBuffer",value:function(e,t){var r=this._context.canvas;return r&&(r.width=e,r.height=t,this.autoResizeDrawingBuffer=!1),this}}]),e}(),a(s.prototype,"context",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"context"),s.prototype),a(s.prototype,"init",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"init"),s.prototype),a(s.prototype,"setupFrame",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"setupFrame"),s.prototype),a(s.prototype,"frame",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"frame"),s.prototype),a(s.prototype,"start",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"start"),s.prototype),a(s.prototype,"stop",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"stop"),s.prototype),a(s.prototype,"_frame",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"_frame"),s.prototype),s);r.default=g},{"../utils":459,"../webgl/webgl-checks":482,"autobind-decorator":3}],407:[function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.OrthoCamera=r.PerspectiveCamera=r.Camera=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("../deprecated"),u=e("../utils"),c=r.Camera=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),t=(0,u.merge)({fov:45,near:.1,far:500,aspect:1,position:new s.Vec3(0,0,0),target:new s.Vec3(0,0,-1),up:new s.Vec3(0,1,0)},t),this.fov=t.fov,this.near=t.near,this.far=t.far,this.aspect=t.aspect,this.position=t.position,this.target=t.target,this.up=t.up,this.view=new s.Mat4,this.uniforms={},this.projection=new s.Mat4,Object.seal(this),this.update()}return a(e,[{key:"project",value:function(){return null}},{key:"unproject",value:function(){return null}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"_updateUniforms",value:function(){var e=this.view.mulMat4(this.projection),t=e.invert();this.uniforms={cameraPosition:this.position,projectionMatrix:this.projection,viewMatrix:this.view,viewProjectionMatrix:e,viewInverseMatrix:this.view.invert(),viewProjectionInverseMatrix:t}}}]),e}();r.PerspectiveCamera=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"update",value:function(){this.projection=(new s.Mat4).perspective(this.fov,this.aspect,this.near,this.far),this.view.lookAt(this.position,this.target,this.up),this._updateUniforms()}}]),t}(c),r.OrthoCamera=function(){function e(){o(this,e)}return a(e,[{key:"update",value:function(){var e=this.near*Math.tan(this.fov*Math.PI/360),t=-e,r=t*this.aspect,n=e*this.aspect;this.projection=(new s.Mat4).ortho(r,n,t,e,this.near,this.far),this.view.lookAt(this.position,this.target,this.up),this._updateUniforms()}}]),e}()},{"../deprecated":415,"../utils":459}],408:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.MAX_TEXTURES=10,r.MAX_POINT_LIGHTS=4,r.PICKING_RES=4},{}],409:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return e!==!0&&e}function o(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,bbox:t}}function a(e,t){return t=t||window,e||t.event}function s(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}function u(e){var t=e.which||e.keyCode,r=d(t),n=t-111;return n>0&&n<13&&(r="f"+n),r=r||String.fromCharCode(t).toLowerCase(),{code:t,key:r,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function c(e){return 3===e.which||2===e.button}function l(e,t){t=t||window,e=e||t.event;var r=t.document;if(r=r.documentElement||r.body,e.touches&&e.touches.length){for(var n=[],i=e.touches.length,o=void 0,a=0;a<i;++a)o=e.touches[a],n.push({x:o.pageX||o.clientX+r.scrollLeft,y:o.pageY||o.clientY+r.scrollTop});return n}var s={x:e.pageX||e.clientX+r.scrollLeft,y:e.pageY||e.clientY+r.scrollTop};return[s]}function f(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=p({cachePosition:!0,cacheSize:!0,relative:!0,centerOrigin:!0,disableContextMenu:!0,bind:!1,picking:!1,enableTouch:!0,enableMouse:!0,enableKeyboard:!0,onClick:_.noop,onRightClick:_.noop,onDragStart:_.noop,onDragMove:_.noop,onDragEnd:_.noop,onDragCancel:_.noop,onTouchStart:_.noop,onTouchMove:_.noop,onTouchEnd:_.noop,onTouchCancel:_.noop,onTap:_.noop,onMouseMove:_.noop,onMouseEnter:_.noop,onMouseLeave:_.noop,onMouseWheel:_.noop,onKeyDown:_.noop,onKeyUp:_.noop},t);var r=t.bind;if(r)for(var n in t)n.match(/^on[a-zA-Z0-9]+$/)&&!function(e,n){t[e]=function(){n.apply(r,Array.prototype.slice.call(arguments))}}(n,t[n]);return new y(e,t)}function d(e){var t=b;for(var r in t)if(t[r]===e)return r;return null}Object.defineProperty(r,"__esModule",{value:!0}),r.Keys=r.EventsProxy=r.stop=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r.get=a,r.getWheel=s,r.getKey=u,r.isRightClick=c,r.getPos=l,r.addEvents=h;var _=e("../utils"),g={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46};r.stop=f;var y=r.EventsProxy=function(){function e(t,r){n(this,e),this.scene=r.scene,this.domElem=t,this.pos=o(t),this.opt=this.callbacks=r,this.size={width:t.width||t.offsetWidth,height:t.height||t.offsetHeight},this.attachEvents()}return v(e,[{key:"attachEvents",value:function(){var e=this,t=this.domElem,r=this.opt;if(r.disableContextMenu&&(t.oncontextmenu=function(){return!1}),r.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(r){t.addEventListener(r,function(t,n){e[r](e.eventInfo(r,t,n))},!1)});var n="";n=document.getBoxObjectFor||null!==window.mozInnerScreenX?"DOMMouseScroll":"mousewheel",t.addEventListener(n,function(t,r){e.mousewheel(e.eventInfo("mousewheel",t,r))},!1)}r.enableTouch&&["touchstart","touchmove","touchend"].forEach(function(r){t.addEventListener(r,function(t,n){e[r](e.eventInfo(r,t,n))},!1)}),r.enableKeyboard&&["keydown","keyup"].forEach(function(t){document.addEventListener(t,function(r,n){e[t](e.eventInfo(t,r,n))},!1)})}},{key:"eventInfo",value:function(e,t,r){for(var n=this.domElem,i=this.scene,h=this.opt,d=this.getSize(),p=h.relative,v=h.centerOrigin,_=h.cachePosition&&this.pos||o(n),g=a(t,r),y=l(t,r),b={x:y[0].x,y:y[0].y},m={},w=void 0,E=void 0,x=0,T=y.length;x<T;++x)w=y[x].x,E=y[x].y,p&&(w-=_.x,E-=_.y,v&&(w-=d.width/2,E-=d.height/2,E*=-1)),y[x].x=w,y[x].y=E;switch(e){case"mousewheel":m.wheel=s(g);break;case"keydown":case"keyup":Object.assign(m,u(g));break;case"mouseup":m.isRightClick=c(g)}var O=void 0;return Object.assign(m,{x:y[0].x,y:y[0].y,posArray:y,cache:!1,stop:function(){f(g)},getTarget:function(){return O?O:O=h.picking&&i.pick(b.x-_.x,b.y-_.y)||!0}}),m.event=g,m}},{key:"getSize",value:function(){if(this.cacheSize)return this.size;var e=this.domElem;return{width:e.width||e.offsetWidth,height:e.height||e.offsetHeight}}},{key:"mouseup",value:function(e){this.moved||(e.isRightClick?this.callbacks.onRightClick(e,this.hovered):this.callbacks.onClick(e,i(this.pressed))),this.pressed&&(this.moved?this.callbacks.onDragEnd(e,i(this.pressed)):this.callbacks.onDragCancel(e,i(this.pressed)),this.pressed=this.moved=!1)}},{key:"mouseout",value:function(e){for(var t=e.relatedTarget,r=this.domElem;t&&t.parentNode;){if(r===t.parentNode)return;t=t.parentNode}this.hovered&&(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=!1),this.pressed&&this.moved&&(this.callbacks.onDragEnd(e),this.pressed=this.moved=!1)}},{key:"mouseover",value:function(e){}},{key:"mousemove",value:function(e){if(this.pressed)return this.moved=!0,void this.callbacks.onDragMove(e,i(this.pressed));if(this.hovered){var t=i(e.getTarget());t&&t.hash===this.hash?this.callbacks.onMouseMove(e,this.hovered):(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=t,this.hash=t,t&&(this.hash=t.hash,this.callbacks.onMouseEnter(e,this.hovered)))}else this.hovered=i(e.getTarget()),this.hash=this.hovered,this.hovered&&(this.hash=this.hovered.hash,this.callbacks.onMouseEnter(e,this.hovered));this.opt.picking||this.callbacks.onMouseMove(e)}},{key:"mousewheel",value:function(e){this.callbacks.onMouseWheel(e)}},{key:"mousedown",value:function(e){this.pressed=e.getTarget(),this.callbacks.onDragStart(e,i(this.pressed))}},{key:"touchstart",value:function(e){this.touched=e.getTarget(),this.touchedLastPosition={x:e.x,y:e.y},this.callbacks.onTouchStart(e,i(this.touched))}},{key:"touchmove",value:function(e){this.touched&&(this.touchMoved=!0,this.callbacks.onTouchMove(e,i(this.touched)))}},{key:"touchend",value:function(e){this.touched&&(this.touchMoved?this.callbacks.onTouchEnd(e,i(this.touched)):(e.x=isNaN(e.x)?this.touchedLastPosition.x:e.x,e.y=isNaN(e.y)?this.touchedLastPosition.y:e.y,this.callbacks.onTap(e,i(this.touched)),this.callbacks.onTouchCancel(e,i(this.touched))),this.touched=this.touchMoved=!1)}},{key:"keydown",value:function(e){this.callbacks.onKeyDown(e)}},{key:"keyup",value:function(e){this.callbacks.onKeyUp(e)}}]),e}();Object.assign(y.prototype,{hovered:!1,pressed:!1,touched:!1,touchedLastPosition:{x:0,y:0},touchMoved:!1,moved:!1});var b=r.Keys=g},{"../utils":459}],410:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../utils"),c=e("assert"),l=n(c),f="Geometry: Illegal argument",h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=t.drawMode,a=void 0===n?"TRIANGLES":n,s=t.vertexCount,c=void 0===s?void 0:s,h=t.attributes,d=i(t,["id","drawMode","vertexCount","attributes"]);o(this,e),(0,l.default)(a,f),this.id=r||(0,u.uid)(this.constructor.name),this.drawMode=a,this.vertexCount=c,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),h?this.setAttributes(h):this.setAttributes(d)}return s(e,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,r=void 0!==t&&t,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!r,n}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return(0,l.default)(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return(0,l.default)(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var r=e[t];r=ArrayBuffer.isView(r)?{value:r}:r,(0,l.default)(ArrayBuffer.isView(r.value),this._print(t)+": must be a typed array or an objectwith value as typed array"),this._autoDetectAttribute(t,r),this.attributes[t]=a({},r,{instanced:r.instanced||0})}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var r=void 0;switch(e){case"indices":r=r||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors"}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=t.isIndexed||!0,(0,l.default)(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}(0,l.default)(t.size,"attribute "+e+" needs size")}},{key:"_print",value:function(e){return"Geometry "+this.id+" attribute "+e}}]),e}();r.default=h},{"../utils":459,assert:2}],411:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./geometry");Object.defineProperty(r,"Geometry",{enumerable:!0,get:function(){return n(i).default}});var o=e("./model");Object.defineProperty(r,"Model",{enumerable:!0,get:function(){return n(o).default}});var a=e("./animation-frame");Object.defineProperty(r,"AnimationFrame",{enumerable:!0,get:function(){return n(a).default}}),Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("./camera");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var u=e("./event");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),Object.defineProperty(r,"FrameAnimator",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(r,"Renderer",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(r,"Animation",{enumerable:!0,get:function(){return n(a).default}})},{"./animation-frame":406,"./camera":407,"./event":409,"./geometry":410,"./model":412}],412:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Material=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("../webgl"),h=e("../scenegraph/object-3d"),d=n(h),p=e("../utils"),v=e("./geometry"),_=n(v),g=e("assert"),y=n(g),b='Warning: Model constructor: parameter "instanced" renamed to "isInstanced".\nThis will become a hard error in a future version of luma.gl.',m='Model: parameter "textures" removed. Use uniforms to set textures',w=(r.Material=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.shininess,n=void 0===r?0:r,i=t.reflection,o=void 0===i?0:i,a=t.refraction,s=void 0===a?0:a;u(this,e),this.shininess=n,this.reflection=o,this.refraction=s},function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),r=e instanceof f.WebGLRenderingContext?c({},r,{gl:e}):e;var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.init(r),n}return s(t,e),l(t,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program,r=e.gl,n=void 0===r?null:r,i=e.vs,a=void 0===i?null:i,s=e.fs,u=void 0===s?null:s,l=e.geometry,h=e.material,d=void 0===h?null:h,p=e.textures,v=e.isInstanced,g=void 0!==v&&v,w=e.instanceCount,E=void 0===w?0:w,x=e.vertexCount,T=void 0===x?void 0:x,O=e.pickable,A=void 0===O||O,S=e.pick,I=void 0===S?null:S,R=e.uniforms,M=void 0===R?{}:R,k=e.attributes,P=void 0===k?{}:k,j=(e.render,e.onBeforeRender),N=void 0===j?function(){}:j,F=e.onAfterRender,L=void 0===F?function(){}:F,C=o(e,["program","gl","vs","fs","geometry","material","textures","isInstanced","instanceCount","vertexCount","pickable","pick","uniforms","attributes","render","onBeforeRender","onAfterRender"]);if((0,y.default)(l instanceof _.default,"Model needs a geometry"),this.program=t||new f.Program(n,{vs:a,fs:u}),(0,y.default)(this.program instanceof f.Program,"Model needs a program"),C.instanced&&(console.warn(b),g=g||C.instanced),p)throw new Error(m);this.buffers={},this.userData={},this.drawParams={},this.dynamic=!1,this.needsRedraw=!0,this.material=d,this.setGeometry(l),this.attributes={},this.setAttributes(P),this.uniforms={},this.setUniforms(c({},this.program.defaultUniforms,M)),this.isInstanced=g,this.instanceCount=E,this.vertexCount=T,this.pickable=Boolean(A),this.pick=I||function(){return!1},this.onBeforeRender=N,this.onAfterRender=L}},{key:"destroy",value:function(){}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,r=void 0!==t&&t,n=!1;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!r,n=n||this.geometry.getNeedsRedraw({clearRedrawFlags:r})}},{key:"setInstanceCount",value:function(e){return(0,y.default)(void 0!==e),this.instanceCount=e,this}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"setVertexCount",value:function(e){return this.vertexCount=e,this}},{key:"getVertexCount",value:function(){return void 0===this.vertexCount?this.geometry.getVertexCount():this.vertexCount}},{key:"isPickable",value:function(){return this.pickable}},{key:"setPickable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.pickable=Boolean(e),this}},{key:"getProgram",value:function(){return this.program}},{key:"getGeometry",value:function(){return this.geometry}},{key:"setGeometry",value:function(e){return this.geometry=e,this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes()),this.setNeedsRedraw(),this}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.attributes,e),this._createBuffersFromAttributeDescriptors(e),this.setNeedsRedraw(),this}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.checkUniformValues)(e,this.id),Object.assign(this.uniforms,e),this.setNeedsRedraw(),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uniforms,r=void 0===t?{}:t;e.attributes,e.settings;return this.render(r)}},{key:"addViewUniforms",value:function(e){var t=e.camera,r=e.viewMatrix,n=e.modelMatrix,i=o(e,["camera","viewMatrix","modelMatrix"]),a=t?t.getUniforms():{},s=r?this.getCoordinateUniforms(r,n):{};return c({},a,s,i)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.addViewUniforms(e);this.setUniforms(t),p.log.log(2,">>> RENDERING MODEL "+this.id,this),this.setProgramState(),this._logAttributesAndUniforms(3,t),this.onBeforeRender();var r=this.drawParams;r.isInstanced&&!this.isInstanced&&p.log.warn(0,"Found instanced attributes on non-instanced model");var n=r.isIndexed,i=r.indexType,o=this.geometry,a=this.isInstanced,s=this.instanceCount;return(0,f.draw)(this.program.gl,{drawMode:o.drawMode,vertexCount:this.getVertexCount(),isIndexed:n,indexType:i,isInstanced:a,instanceCount:s}),this.onAfterRender(),this.unsetProgramState(),this.setNeedsRedraw(!1),p.log.log(2,"<<< RENDERING MODEL "+this.id+" - complete"),this}},{key:"setProgramState",value:function(){var e=this.program;return e.use(),this.drawParams={},e.setBuffers(this.buffers,{drawParams:this.drawParams}),e.setUniforms(this.uniforms),this}},{key:"unsetProgramState",value:function(){return this.program.unsetBuffers(),this}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl;for(var r in e){var n=e[r];if(n instanceof f.Buffer)this.buffers[r]=n;else{this.buffers[r]=this.buffers[r]||new f.Buffer(t);var i=this.buffers[r];i.setData(c({},n,{data:n.value,target:n.isIndexed?f.GL.ELEMENT_ARRAY_BUFFER:f.GL.ARRAY_BUFFER}))}}return this}},{key:"_logAttributesAndUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(p.log.priority>=e){var r=this._getAttributesTable({header:"Attributes "+this.id,program:this.program,attributes:c({},this.geometry.attributes,this.attributes)});p.log.table(e,r);var n=(0,f.getUniformsTable)({header:"Uniforms "+this.id,program:this.program,
uniforms:c({},this.uniforms,t)}),i=n.table,o=n.unusedTable,a=n.unusedCount;p.log.table(e,i),p.log.log(e,(a||"No")+" unused uniforms ",o)}}},{key:"_getAttributesTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,r=e.header,n=void 0===r?"Attributes":r,o=(e.instanced,e.program);(0,y.default)(o);var a=o._attributeLocations,s=i({},n,{});for(var u in a){var c=t[u],l=a[u];s[u]=this._getAttributeEntry(c,l)}for(var f in t){var h=t[f];s[f]||(s[f]=this._getAttributeEntry(h,null))}return s}},{key:"_getAttributeEntry",value:function(e,t){var r=function(e){return Math.round(10*e)/10},n="NOT PROVIDED",i=0,o="N/A",a="N/A",s="N/A",u="N/A";if(e&&null===t&&(t=e.isIndexed?"ELEMENT_ARRAY_BUFFER":"NOT USED"),e instanceof f.Buffer){var c=e;n=c.layout.type,i=c.layout.instanced,o=c.layout.size,a=r(c.data.length/c.layout.size),s=c.data.length*c.data.BYTES_PER_ELEMENT}else e&&(n=e.value.constructor.name,i=e.instanced,o=e.size,a=r(e.value.length/e.size),s=e.value.length*e.value.BYTES_PER_ELEMENT,u=e.value);n=String(n).replace("Array","");var l=n.indexOf("nt")!==-1;return t=""+t+(i?" [instanced]":""),{Location:t,"Type Size x Verts = Bytes":n+" "+o+" x "+a+" = "+s,Value:(0,p.formatValue)(u,{size:o,isInteger:l})}}},{key:"setTextures",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];throw new Error("model.setTextures replaced: setUniforms({sampler2D: new Texture2D})")}},{key:"hash",get:function(){return this.id+" "+this.$pickingIndex}}]),t}(d.default));r.default=w},{"../scenegraph/object-3d":453,"../utils":459,"../webgl":471,"./geometry":410,assert:2}],413:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("../utils"),l=e("assert"),f=n(l),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=void 0===r?"attribute-manager":r;i(t,["id"]);o(this,e),this.id=n,this.attributes={},this.allocedInstances=-1,this.needsRedraw=!0,this.userData={},this.onUpdateStart=a,this.onUpdateEnd=a,this.onLog=this._defaultLog,Object.seal(this)}return u(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t)}},{key:"invalidate",value:function(e){var t=this.attributes,r=t[e];(0,f.default)(r),r.needsUpdate=!0,this.onLog(1,"invalidated attribute "+e+" for "+this.id)}},{key:"invalidateAll",value:function(){var e=this.attributes;for(var t in e)this.invalidate(t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.numInstances,n=e.buffers,o=void 0===n?{}:n,a=e.props,s=void 0===a?{}:a,u=e.context,c=void 0===u?{}:u,l=i(e,["data","numInstances","buffers","props","context"]);this._checkExternalBuffers(o,l),this._setExternalBuffers(o),this._analyzeBuffers({numInstances:r})&&(this.onUpdateStart(this.id),this._updateBuffers({numInstances:r,data:t,props:s,context:c}),this.onUpdateEnd(this.id))}},{key:"setLogFunctions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onLog,r=e.onUpdateStart,n=e.onUpdateEnd;this.onLog=void 0!==t?t:this.onLog,this.onUpdateStart=void 0!==r?r:this.onUpdateStart,this.onUpdateEnd=void 0!==n?n:this.onUpdateEnd}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(e){var t=e.clearChangedFlags,r=void 0!==t&&t,n=this.attributes,i={};for(var o in n){var a=n[o];a.changed&&(a.changed=a.changed&&!r,i[o]=a)}return i}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,r=void 0!==t&&t,n=this.needsRedraw;return n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!r,n}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"addDynamic",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t)}},{key:"addInstanced",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(e,t,{instanced:1})}},{key:"_defaultLog",value:function(e,t){c.log.log(e,t)}},{key:"_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={};for(var i in e){i in t&&(e[i]=s({},e[i],t[i]));var o=e[i];this._validate(i,o);var a=s({target:void 0,isIndexed:!1,userData:{}},o,{isExternalBuffer:!1,needsAlloc:!1,needsUpdate:!1,changed:!1,size:o.size,value:o.value||null},r);Object.seal(a),this.attributes[i]=a}Object.assign(this.attributes,n)}},{key:"_validate",value:function(e,t){(0,f.default)("number"==typeof t.size,"Attribute definition for "+e+" missing size"),(0,f.default)("function"==typeof t.update||t.noAlloc,"Attribute updater for "+e+" missing update method")}},{key:"_checkExternalBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.attributes;for(var n in e){var i=r[n];if(!i&&!t.ignoreUnknownAttributes)throw new Error("Unknown attribute prop "+n)}}},{key:"_setExternalBuffers",value:function(e){var t=this.attributes,r=this.numInstances;for(var n in t){var i=t[n],o=e[n];if(i.isExternalBuffer=!1,o){if(!(o instanceof Float32Array))throw new Error("Attribute properties must be of type Float32Array");if(i.auto&&o.length<=r*i.size)throw new Error("Attribute prop array must match length and size");i.isExternalBuffer=!0,i.needsUpdate=!1,i.value!==o&&(i.value=o,i.changed=!0,this.needsRedraw=!0)}}}},{key:"_analyzeBuffers",value:function(e){var t=e.numInstances,r=this.attributes;(0,f.default)(void 0!==t);var n=!1;for(var i in r){var o=r[i];if(!o.isExternalBuffer){var a=null===o.value||o.value.length/o.size<t;a&&o.update&&(o.needsAlloc=!0,n=!0),o.needsUpdate&&(n=!0)}}return n}},{key:"_updateBuffers",value:function(e){var t=e.numInstances,r=e.data,n=e.props,i=e.context,o=this.attributes,a=Math.max(t,1);for(var s in o){var u=o[s];if(u.needsAlloc){var c=u.type||Float32Array;u.value=new c(u.size*a),this.onLog(2,this.id+":"+s+" allocated "+a),u.needsAlloc=!1,u.needsUpdate=!0}if(u.needsUpdate){var l=u.update;l?(this.onLog(2,this.id+":"+s+" updating "+t),l.call(i,u,{data:r,props:n,numInstances:t})):this.onLog(2,this.id+":"+s+" missing update function"),u.needsUpdate=!1,u.changed=!0,this.needsRedraw=!0}}this.allocedInstances=a}}]),e}();r.default=h},{"../utils":459,assert:2}],414:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../webgl/webgl"),s=e("../webgl/webgl-checks"),u=e("../webgl/framebuffer"),c=n(u),l=e("../webgl/renderbuffer"),f=n(l),h=e("../webgl/texture-2d"),d=n(h),p=e("assert"),v=n(p),_=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.width,o=void 0===n?1:n,u=r.height,c=void 0===u?1:u,l=r.depth,f=void 0===l||l,h=r.minFilter,d=void 0===h?a.GL.NEAREST:h,p=r.magFilter,v=void 0===p?a.GL.NEAREST:p,_=r.format,g=void 0===_?a.GL.RGBA:_,y=r.type,b=void 0===y?a.GL.UNSIGNED_BYTE:y;i(this,e),(0,s.assertWebGLContext)(t),this.gl=t,this.depth=f,this.minFilter=d,this.magFilter=v,this.format=g,this.type=b,this.resize(o,c)}return o(e,[{key:"delete",value:function(){}},{key:"resize",value:function(e,t){if((0,v.default)(e>=0&&t>=0,"Width and height need to be integers"),e!==this.width||t!==this.height){var r=this.gl,n=new c.default(r),i=new d.default(r,{minFilter:this.minFilter,magFilter:this.magFilter}).setImageData({data:null,width:e,height:t,type:this.type,format:this.format});if(n.attachTexture({attachment:a.GL.COLOR_ATTACHMENT0,texture:i}),this.colorBuffer&&this.colorBuffer.delete(),this.colorBuffer=i,this.depth){var o=new f.default(r).storage({internalFormat:a.GL.DEPTH_COMPONENT16,width:e,height:t});n.attachRenderbuffer({attachment:a.GL.DEPTH_ATTACHMENT,renderbuffer:o}),this.depthBuffer&&this.depthBuffer.delete(),this.depthBuffer=o}n.checkStatus(),this.width=e,this.height=t,this.fb&&this.fb.delete(),this.fb=n}}},{key:"bind",value:function(){this.fb.bind()}},{key:"unbind",value:function(){this.fb.unbind()}}]),e}();r.default=_},{"../webgl/framebuffer":469,"../webgl/renderbuffer":473,"../webgl/texture-2d":475,"../webgl/webgl":486,"../webgl/webgl-checks":482,assert:2}],415:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./math");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./attribute-manager");Object.defineProperty(r,"AttributeManager",{enumerable:!0,get:function(){return n(o).default}});var a=e("./fbo");Object.defineProperty(r,"FramebufferObject",{enumerable:!0,get:function(){return n(a).default}})},{"./attribute-manager":413,"./fbo":414,"./math":416}],416:[function(e,t,r){"use strict";function n(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}function i(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=Math.sqrt,f=Math.sin,h=Math.cos,d=Math.tan,p=Math.PI,v=Array.prototype.slice,_=r.Vec3=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,3));return i[0]=e,i[1]=r,i[2]=n,i}return s(t,e),c(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}}],[{key:"create",value:function(){return new t(3)}}]),t}(u(Array)),g={setVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},add:function(e,t){return new _(e[0]+t[0],e[1]+t[1],e[2]+t[2])},$add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e},add2:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},sub:function(e,t){return new _(e[0]-t[0],e[1]-t[1],e[2]-t[2])},$sub:function(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e},sub2:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e},scale:function(e,t){return new _(e[0]*t,e[1]*t,e[2]*t)},$scale:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e},neg:function(e){return new _(-e[0],-e[1],-e[2])},$neg:function(e){return e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e},unit:function(e){var t=_.norm(e);return t>0?_.scale(e,1/t):_.clone(e)},$unit:function(e){var t=_.norm(e);return t>0?_.$scale(e,1/t):e},cross:function(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return new _(n*s-i*a,i*o-r*s,r*a-n*o)},$cross:function(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return e[0]=n*s-i*a,e[1]=i*o-r*s,e[2]=r*a-n*o,e},distTo:function(e,t){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return l(r*r+n*n+i*i)},distToSq:function(e,t){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},norm:function(e){var t=e[0],r=e[1],n=e[2];return l(t*t+r*r+n*n)},normSq:function(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},clone:function(e){return e instanceof _?new _(e[0],e[1],e[2]):_.setVec3(new Float32Array(3),e)},toFloat32Array:function(e){var t=e.typedContainer;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t):e}},y=_.prototype;for(var b in g)_[b]=g[b],y[b]=function(e){return function(){var t=v.call(arguments);return t.unshift(this),_[e].apply(_,t)}}(b);var m=r.Mat4=function(e){function t(e,r,n,i,s,u,c,l,f,h,d,p,v,_,g,y){o(this,t);var b=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,16));return b.length=16,"number"==typeof e?b.set(e,r,n,i,s,u,c,l,f,h,d,p,v,_,g,y):b.id(),b.typedContainer=new Float32Array(16),b}return s(t,e),c(t,[{key:"copy",value:function(e){for(var t=0;t<16;++t)this[t]=e[t];return this}},{key:"n11",get:function(){return this[0]},set:function(e){this[0]=e}},{key:"n12",get:function(){return this[4]},set:function(e){this[4]=e}},{key:"n13",get:function(){return this[8]},set:function(e){this[8]=e}},{key:"n14",get:function(){return this[12]},set:function(e){this[12]=e}},{key:"n21",get:function(){return this[1]},set:function(e){this[1]=e}},{key:"n22",get:function(){return this[5]},set:function(e){this[5]=e}},{key:"n23",get:function(){return this[9]},set:function(e){this[9]=e}},{key:"n24",get:function(){return this[13]},set:function(e){this[13]=e}},{key:"n31",get:function(){return this[2]},set:function(e){this[2]=e}},{key:"n32",get:function(){return this[6]},set:function(e){this[6]=e}},{key:"n33",get:function(){return this[10]},set:function(e){this[10]=e}},{key:"n34",get:function(){return this[14]},set:function(e){this[14]=e}},{key:"n41",get:function(){return this[3]},set:function(e){this[3]=e}},{key:"n42",get:function(){return this[7]},set:function(e){this[7]=e}},{key:"n43",get:function(){return this[11]},set:function(e){this[11]=e}},{key:"n44",get:function(){return this[15]},set:function(e){this[15]=e}}],[{key:"create",value:function(){return new Array(16)}}]),t}(i(Array));g={id:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){return e instanceof m?new m(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]):new typedArray(e)},set:function(e,t,r,n,i,o,a,s,u,c,l,f,h,d,p,v,_){return e[0]=t,e[4]=r,e[8]=n,e[12]=i,e[1]=o,e[5]=a,e[9]=s,e[13]=u,e[2]=c,e[6]=l,e[10]=f,e[14]=h,e[3]=d,e[7]=p,e[11]=v,e[15]=_,e},mulVec3:function(e,t){var r=_.clone(t);return m.$mulVec3(e,r)},$mulVec3:function(e,t){var r=t[0],n=t[1],i=t[2],o=1/(e[3]*r+e[7]*n+e[11]*i+e[15]);return t[0]=(e[0]*r+e[4]*n+e[8]*i+e[12])*o,t[1]=(e[1]*r+e[5]*n+e[9]*i+e[13])*o,t[2]=(e[2]*r+e[6]*n+e[10]*i+e[14])*o,t},mulMat42:function(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],_=t[13],g=t[14],y=t[15],b=r[0],m=r[1],w=r[2],E=r[3],x=r[4],T=r[5],O=r[6],A=r[7],S=r[8],I=r[9],R=r[10],M=r[11],k=r[12],P=r[13],j=r[14],N=r[15];return e[0]=b*n+m*s+w*f+E*v,e[1]=b*i+m*u+w*h+E*_,e[2]=b*o+m*c+w*d+E*g,e[3]=b*a+m*l+w*p+E*y,e[4]=x*n+T*s+O*f+A*v,e[5]=x*i+T*u+O*h+A*_,e[6]=x*o+T*c+O*d+A*g,e[7]=x*a+T*l+O*p+A*y,e[8]=S*n+I*s+R*f+M*v,e[9]=S*i+I*u+R*h+M*_,e[10]=S*o+I*c+R*d+M*g,e[11]=S*a+I*l+R*p+M*y,e[12]=k*n+P*s+j*f+N*v,e[13]=k*i+P*u+j*h+N*_,e[14]=k*o+P*c+j*d+N*g,e[15]=k*a+P*l+j*p+N*y,e},mulMat4:function(e,t){var r=m.clone(e);return m.mulMat42(r,e,t)},$mulMat4:function(e,t){return m.mulMat42(e,e,t)},add:function(e,t){var r=m.clone(e);return m.$add(r,t)},$add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e[4]+=t[4],e[5]+=t[5],e[6]+=t[6],e[7]+=t[7],e[8]+=t[8],e[9]+=t[9],e[10]+=t[10],e[11]+=t[11],e[12]+=t[12],e[13]+=t[13],e[14]+=t[14],e[15]+=t[15],e},transpose:function(e){var t=m.clone(e);return m.$transpose(t)},$transpose:function(e){var t=e[4],r=e[8],n=e[12],i=e[1],o=e[9],a=e[13],s=e[2],u=e[6],c=e[14],l=e[3],f=e[7],h=e[11];return e[1]=t,e[2]=r,e[3]=n,e[4]=i,e[6]=o,e[7]=a,e[8]=s,e[9]=u,e[11]=c,e[12]=l,e[13]=f,e[14]=h,e},rotateAxis:function(e,t,r){var n=m.clone(e);return m.$rotateAxis(n,t,r)},$rotateAxis:function(e,t,r){var n=f(t),i=h(t),o=1-i,a=r[0],s=r[1],u=r[2],c=a*a*o+i,l=a*s*o+u*n,d=a*u*o-s*n,p=s*a*o-u*n,v=s*s*o+i,_=s*u*o+a*n,g=a*u*o+s*n,y=s*u*o-a*n,b=u*u*o+i,m=e[0],w=e[1],E=e[2],x=e[3],T=e[4],O=e[5],A=e[6],S=e[7],I=e[8],R=e[9],M=e[10],k=e[11];e[12],e[13],e[14],e[15];return e[0]=m*c+T*l+I*d,e[1]=w*c+O*l+R*d,e[2]=E*c+A*l+M*d,e[3]=x*c+S*l+k*d,e[4]=m*p+T*v+I*_,e[5]=w*p+O*v+R*_,e[6]=E*p+A*v+M*_,e[7]=x*p+S*v+k*_,e[8]=m*g+T*y+I*b,e[9]=w*g+O*y+R*b,e[10]=E*g+A*y+M*b,e[11]=x*g+S*y+k*b,e},rotateXYZ:function(e,t,r,n){var i=m.clone(e);return m.$rotateXYZ(i,t,r,n)},$rotateXYZ:function(e,t,r,n){var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],c=e[5],l=e[6],d=e[7],p=e[8],v=e[9],_=e[10],g=e[11],y=h(t),b=h(r),m=h(n),w=f(t),E=f(r),x=f(n),T=b*m,O=-y*x+w*E*m,A=w*x+y*E*m,S=b*x,I=y*m+w*E*x,R=-w*m+y*E*x,M=-E,k=w*b,P=y*b;return e[0]=i*T+u*S+p*M,e[1]=o*T+c*S+v*M,e[2]=a*T+l*S+_*M,e[3]=s*T+d*S+g*M,e[4]=i*O+u*I+p*k,e[5]=o*O+c*I+v*k,e[6]=a*O+l*I+_*k,e[7]=s*O+d*I+g*k,e[8]=i*A+u*R+p*P,e[9]=o*A+c*R+v*P,e[10]=a*A+l*R+_*P,e[11]=s*A+d*R+g*P,e},translate:function(e,t,r,n){var i=m.clone(e);return m.$translate(i,t,r,n)},$translate:function(e,t,r,n){return e[12]=e[0]*t+e[4]*r+e[8]*n+e[12],e[13]=e[1]*t+e[5]*r+e[9]*n+e[13],e[14]=e[2]*t+e[6]*r+e[10]*n+e[14],e[15]=e[3]*t+e[7]*r+e[11]*n+e[15],e},scale:function(e,t,r,n){var i=m.clone(e);return m.$scale(i,t,r,n)},$scale:function(e,t,r,n){return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=r,e[5]*=r,e[6]*=r,e[7]*=r,e[8]*=n,e[9]*=n,e[10]*=n,e[11]*=n,e},invert:function(e){var t=m.clone(e);return m.$invert(t)},$invert:function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],_=e[15],g=t*a-r*o,y=t*s-n*o,b=t*u-i*o,m=r*s-n*a,w=r*u-i*a,E=n*u-i*s,x=c*p-l*d,T=c*v-f*d,O=c*_-h*d,A=l*v-f*p,S=l*_-h*p,I=f*_-h*v,R=1/(g*I-y*S+b*A+m*O-w*T+E*x);return e[0]=(+a*I-s*S+u*A)*R,e[1]=(-r*I+n*S-i*A)*R,e[2]=(+p*E-v*w+_*m)*R,e[3]=(-l*E+f*w-h*m)*R,e[4]=(-o*I+s*O-u*T)*R,e[5]=(+t*I-n*O+i*T)*R,e[6]=(-d*E+v*b-_*y)*R,e[7]=(+c*E-f*b+h*y)*R,e[8]=(+o*S-a*O+u*x)*R,e[9]=(-t*S+r*O-i*x)*R,e[10]=(+d*w-p*b+_*g)*R,e[11]=(-c*w+l*b-h*g)*R,e[12]=(-o*A+a*T-s*x)*R,e[13]=(+t*A-r*T+n*x)*R,e[14]=(-d*m+p*y-v*g)*R,e[15]=(+c*m-l*y+f*g)*R,e},lookAt:function(e,t,r,n){var i=_.sub(t,r);i.$unit();var o=_.cross(n,i);o.$unit();var a=_.cross(i,o);return a.$unit(),m.set(e,o[0],o[1],o[2],-o.dot(t),a[0],a[1],a[2],-a.dot(t),i[0],i[1],i[2],-i.dot(t),0,0,0,1)},frustum:function(e,t,r,n,i,o,a){var s=r-t,u=i-n,c=a-o;return e[0]=2*o/s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o/u,e[6]=0,e[7]=0,e[8]=(r+t)/s,e[9]=(i+n)/u,e[10]=-(a+o)/c,e[11]=-1,e[12]=0,e[13]=0,e[14]=-(a*o*2)/c,e[15]=0,e},perspective:function(e,t,r,n,i){var o=n*d(t*p/360),a=-o,s=a*r,u=o*r;return m.frustum(e,s,u,a,o,n,i)},ortho:function(e,t,r,n,i,o,a){var s=(this.elements,r-t),u=n-i,c=a-o,l=(r+t)/s,f=(n+i)/u,h=(a+o)/c;return e[0]=2/s,e[4]=0,e[8]=0,e[12]=-l,e[1]=0,e[5]=2/u,e[9]=0,e[13]=-f,e[2]=0,e[6]=0,e[10]=-2/c,e[14]=-h,e[3]=0,e[7]=0,e[11]=0,e[15]=1,e},toFloat32Array:function(e){var t=e.typedContainer;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):e}},y=m.prototype;for(b in g)m[b]=g[b],y[b]=function(e){return function(){var t=v.call(arguments);return t.unshift(this),m[e].apply(m,t)}}(b);var w=r.Quat=function(e){function t(e,r,n,i){o(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,4));return s[0]=e||0,s[1]=r||0,s[2]=n||0,s[3]=i||0,s.typedContainer=new Float32Array(4),s}return s(t,e),c(t,null,[{key:"create",value:function(){return new Array(4)}},{key:"fromVec3",value:function(e,r){return new t(e[0],e[1],e[2],r||0)}},{key:"fromMat4",value:function(e){var r,n,i;e[0]>e[5]&&e[0]>e[10]?(r=0,n=1,i=2):e[5]>e[0]&&e[5]>e[10]?(r=1,n=2,i=0):(r=2,n=0,i=1);var o=l(1+e[5*r]-e[5*n]-e[5*i]),a=new t;return a[r]=.5*o,a[n]=.5*(e["n"+n+r]+e["n"+r+n])/o,a[i]=.5*(e["n"+r+i]+e["n"+i+r])/o,a[3]=.5*(e["n"+n+i]-e["n"+i+n])/o,a}},{key:"fromXRotation",value:function(e){return new t(f(e/2),0,0,h(e/2))}},{key:"fromYRotation",value:function(e){return new t(0,f(e/2),0,h(e/2))}},{key:"fromZRotation",value:function(e){return new t(0,0,f(e/2),h(e/2))}},{key:"fromAxisRotation",value:function(e,r){var n=e[0],i=e[1],o=e[2],a=1/l(n*n+i*i+o*o),s=f(r/2),u=h(r/2);return new t(s*n*a,s*i*a,s*o*a,u)}}]),t}(n(Array));g={setQuat:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,r,n,i){return e[0]=t||0,e[1]=r||0,e[2]=n||0,e[3]=i||0,e},clone:function(e){return e instanceof w?new w(e[0],e[1],e[2],e[3]):w.setQuat(new typedArray(4),e)},neg:function(e){return new w(-e[0],-e[1],-e[2],-e[3])},$neg:function(e){return e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e[3]=-e[3],e},add:function(e,t){return new w(e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3])},$add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e},sub:function(e,t){return new w(e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])},$sub:function(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e[3]-=t[3],e},scale:function(e,t){return new w(e[0]*t,e[1]*t,e[2]*t,e[3]*t)},$scale:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e},mulQuat:function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=t[0],s=t[1],u=t[2],c=t[3];return new w(o*a+r*c+n*u-i*s,o*s+n*c+i*a-r*u,o*u+i*c+r*s-n*a,o*c-r*a-n*s-i*u)},$mulQuat:function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=t[0],s=t[1],u=t[2],c=t[3];return e[0]=o*a+r*c+n*u-i*s,e[1]=o*s+n*c+i*a-r*u,e[2]=o*u+i*c+r*s-n*a,e[3]=o*c-r*a-n*s-i*u,e},divQuat:function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=t[0],s=t[1],u=t[2],c=t[3],l=1/(c*c+a*a+s*s+u*u);return new w((r*c-o*a-n*u+i*s)*l,(r*u-o*s+n*c-i*a)*l,(n*a+i*c-o*u-r*s)*l,(o*c+r*a+n*s+i*u)*l)},$divQuat:function(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=t[0],s=t[1],u=t[2],c=t[3],l=1/(c*c+a*a+s*s+u*u);return e[0]=(r*c-o*a-n*u+i*s)*l,e[1]=(r*u-o*s+n*c-i*a)*l,e[2]=(n*a+i*c-o*u-r*s)*l,e[3]=(o*c+r*a+n*s+i*u)*l,e},invert:function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=1/(t*t+r*r+n*n+i*i);return new w(-t*o,-r*o,-n*o,i*o)},$invert:function(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=1/(t*t+r*r+n*n+i*i);return e[0]=-t*o,e[1]=-r*o,e[2]=-n*o,e[3]=i*o,e},norm:function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return l(t*t+r*r+n*n+i*i)},normSq:function(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i},unit:function(e){return w.scale(e,1/w.norm(e))},$unit:function(e){return w.$scale(e,1/w.norm(e))},conjugate:function(e){return new w(-e[0],-e[1],-e[2],e[3])},$conjugate:function(e){return e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e}},y=w.prototype={};for(b in g)w[b]=g[b],y[b]=function(e){return function(){var t=v.call(arguments);return t.unshift(this),w[e].apply(w,t)}}(b);_.fromQuat=function(e){return new _(e[0],e[1],e[2])},m.fromQuat=function(e){var t=e[3],r=e[0],n=e[1],i=e[2];return new m(t*t+r*r-n*n-i*i,2*r*n-2*t*i,2*r*i+2*t*n,0,2*r*n+2*t*i,t*t-r*r+n*n-i*i,2*n*i-2*t*r,0,2*r*i-2*t*n,2*n*i+2*t*r,t*t-r*r-n*n+i*i,0,0,0,0,1)}},{}],417:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./shader-cache");Object.defineProperty(r,"ShaderCache",{enumerable:!0,get:function(){return n(i).default}})},{"./shader-cache":418}],418:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../webgl"),s=e("assert"),u=n(s),c="ShaderCache expects source strings",l="ShaderCache does not support caching across multiple contexts",f=function(){function e(){i(this,e),this.vertexShaders={},this.fragmentShaders={}}return o(e,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(e,t){(0,u.default)("string"==typeof t,c);var r=this.vertexShaders[t];return(0,u.default)(!r||r.gl===e,l),r||(r=new a.VertexShader(e,t),this.vertexShaders[t]=r),r}},{key:"getFragmentShader",value:function(e,t){(0,u.default)("string"==typeof t,c);var r=this.fragmentShaders[t];return(0,u.default)(!r||r.gl===e,l),r||(r=new a.FragmentShader(e,t),this.fragmentShaders[t]=r),r}}]),e}();r.default=f},{"../webgl":471,assert:2}],419:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ConeGeometry=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("./truncated-cone"),l=e("../core/model"),f=n(l),h=r.ConeGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.radius,n=void 0===r?1:r,s=e.cap,c=void 0===s||s,l=i(e,["radius","cap"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},l,{topRadius:0,topCap:Boolean(c),bottomCap:Boolean(c),bottomRadius:n})))}return s(t,e),t}(c.TruncatedConeGeometry),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({geometry:new h(e)},e)))}return s(t,e),t}(f.default);r.default=d},{"../core/model":412,"./truncated-cone":426}],420:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CubeGeometry=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("../core/geometry"),l=n(c),f=e("../core/model"),h=n(f),d=e("../utils"),p=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],v=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],_=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],g=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],y=r.CubeGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,n=void 0===r?(0,d.uid)("cube-geometry"):r,s=i(e,["id"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},s,{id:n,attributes:{indices:new Uint16Array(p),positions:new Float32Array(v),normals:new Float32Array(_),texCoords:new Float32Array(g)}})))}return s(t,e),t}(l.default),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,n=void 0===r?(0,d.uid)("cube"):r,s=i(e,["id"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},s,{id:n,geometry:new y(s)})))}return s(t,e),t}(h.default);r.default=b},{"../core/geometry":410,"../core/model":412,"../utils":459}],421:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CylinderGeometry=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("./truncated-cone"),l=e("../core/model"),f=n(l),h=r.CylinderGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.radius,n=void 0===r?1:r,s=i(e,["radius"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},s,{bottomRadius:n,topRadius:n})))}return s(t,e),t}(c.TruncatedConeGeometry),d=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},e,{
geometry:new h(e)})))}return s(t,e),t}(f.default);r.default=d},{"../core/model":412,"./truncated-cone":426}],422:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.IcoSphereGeometry=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("../math"),l=e("../core/geometry"),f=n(l),h=e("../core/model"),d=n(h),p=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],v=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],_=r.IcoSphereGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.iterations,n=void 0===r?0:r,s=(e.onAddVertex,i(e,["iterations","onAddVertex"]));o(this,t);var l=Math.PI,f=2*l,h=[].concat(p),d=[].concat(v);h.push(),d.push();for(var _=(function(){var e={};return function(t,r){t*=3,r*=3;var n=t<r?t:r,i=t>r?t:r,o=n+"|"+i;if(o in e)return e[o];var a=h[t],s=h[t+1],u=h[t+2],c=h[r],l=h[r+1],f=h[r+2],d=(a+c)/2,p=(s+l)/2,v=(u+f)/2,_=Math.sqrt(d*d+p*p+v*v);return d/=_,p/=_,v/=_,h.push(d,p,v),e[o]=h.length/3-1}}()),g=0;g<n;g++){for(var y=[],b=0;b<d.length;b+=3){var m=_(d[b+0],d[b+1]),w=_(d[b+1],d[b+2]),E=_(d[b+2],d[b+0]);y.push(E,d[b+0],m,m,d[b+1],w,w,d[b+2],E,m,w,E)}d=y}for(var x=new Array(3*d.length),T=new Array(2*d.length),O=d.length,A=O-3;A>=0;A-=3){var S=d[A+0],I=d[A+1],R=d[A+2],M=3*S,k=3*I,P=3*R,j=2*S,N=2*I,F=2*R,L=h[M+0],C=h[M+1],D=h[M+2],U=Math.acos(D/Math.sqrt(L*L+C*C+D*D)),B=Math.atan2(C,L)+l,G=U/l,z=1-B/f,H=h[k+0],W=h[k+1],V=h[k+2],Y=Math.acos(V/Math.sqrt(H*H+W*W+V*V)),q=Math.atan2(W,H)+l,X=Y/l,Z=1-q/f,K=h[P+0],Q=h[P+1],$=h[P+2],J=Math.acos($/Math.sqrt(K*K+Q*Q+$*$)),ee=Math.atan2(Q,K)+l,te=J/l,re=1-ee/f,ne=[K-H,Q-W,$-V],ie=[L-H,C-W,D-V],oe=c.Vector3.cross(ne,ie).normalize(),ae=void 0;(0===z||0===Z||0===re)&&(0===z||z>.5)&&(0===Z||Z>.5)&&(0===re||re>.5)&&(h.push(h[M+0],h[M+1],h[M+2]),ae=h.length/3-1,d.push(ae),T[2*ae+0]=1,T[2*ae+1]=G,x[3*ae+0]=oe.x,x[3*ae+1]=oe.y,x[3*ae+2]=oe.z,h.push(h[k+0],h[k+1],h[k+2]),ae=h.length/3-1,d.push(ae),T[2*ae+0]=1,T[2*ae+1]=X,x[3*ae+0]=oe.x,x[3*ae+1]=oe.y,x[3*ae+2]=oe.z,h.push(h[P+0],h[P+1],h[P+2]),ae=h.length/3-1,d.push(ae),T[2*ae+0]=1,T[2*ae+1]=te,x[3*ae+0]=oe.x,x[3*ae+1]=oe.y,x[3*ae+2]=oe.z),x[M+0]=x[k+0]=x[P+0]=oe.x,x[M+1]=x[k+1]=x[P+1]=oe.y,x[M+2]=x[k+2]=x[P+2]=oe.z,T[j+0]=z,T[j+1]=G,T[N+0]=Z,T[N+1]=X,T[F+0]=re,T[F+1]=te}return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},s,{attributes:{positions:new Float32Array(h),normals:new Float32Array(x),texCoords:new Float32Array(T),indices:new Uint16Array(d)}})))}return s(t,e),t}(f.default),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},e,{geometry:new _(e)})))}return s(t,e),t}(d.default);r.default=g},{"../core/geometry":410,"../core/model":412,"../math":440}],423:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./cone");Object.defineProperty(r,"Cone",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(r,"ConeGeometry",{enumerable:!0,get:function(){return i.ConeGeometry}});var o=e("./cube");Object.defineProperty(r,"Cube",{enumerable:!0,get:function(){return n(o).default}}),Object.defineProperty(r,"CubeGeometry",{enumerable:!0,get:function(){return o.CubeGeometry}});var a=e("./cylinder");Object.defineProperty(r,"Cylinder",{enumerable:!0,get:function(){return n(a).default}}),Object.defineProperty(r,"CylinderGeometry",{enumerable:!0,get:function(){return a.CylinderGeometry}});var s=e("./ico-sphere");Object.defineProperty(r,"IcoSphere",{enumerable:!0,get:function(){return n(s).default}}),Object.defineProperty(r,"IcoSphereGeometry",{enumerable:!0,get:function(){return s.IcoSphereGeometry}});var u=e("./plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return n(u).default}}),Object.defineProperty(r,"PlaneGeometry",{enumerable:!0,get:function(){return u.PlaneGeometry}});var c=e("./sphere");Object.defineProperty(r,"Sphere",{enumerable:!0,get:function(){return n(c).default}}),Object.defineProperty(r,"SphereGeometry",{enumerable:!0,get:function(){return c.SphereGeometry}}),Object.defineProperty(r,"TruncatedCone",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(r,"TruncatedConeGeometry",{enumerable:!0,get:function(){return i.TruncatedConeGeometry}})},{"./cone":419,"./cube":420,"./cylinder":421,"./ico-sphere":422,"./plane":424,"./sphere":425}],424:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.PlaneGeometry=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("../core/geometry"),l=n(c),f=e("../core/model"),h=n(f),d=e("../utils"),p=r.PlaneGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.type,n=void 0===r?"x,y":r,s=e.offset,c=void 0===s?0:s,l=e.flipCull,f=void 0!==l&&l,h=e.unpack,p=void 0!==h&&h,v=e.id,_=void 0===v?(0,d.uid)("plane-geometry"):v,g=i(e,["type","offset","flipCull","unpack","id"]);o(this,t);var y=n.split(","),b=g[y[0]+"len"],m=g[y[1]+"len"],w=g["n"+y[0]]||1,E=g["n"+y[1]]||1,x=(w+1)*(E+1),T=new Float32Array(3*x),O=new Float32Array(3*x),A=new Float32Array(2*x);f&&(b=-b);for(var S=0,I=0,R=0;R<=E;R++)for(var M=0;M<=w;M++){var k=M/w,P=R/E;switch(A[S+0]=f?1-k:k,A[S+1]=P,n){case"x,y":T[I+0]=b*k-.5*b,T[I+1]=m*P-.5*m,T[I+2]=c,O[I+0]=0,O[I+1]=0,O[I+2]=f?1:-1;break;case"x,z":T[I+0]=b*k-.5*b,T[I+1]=c,T[I+2]=m*P-.5*m,O[I+0]=0,O[I+1]=f?1:-1,O[I+2]=0;break;case"y,z":T[I+0]=c,T[I+1]=b*k-.5*b,T[I+2]=m*P-.5*m,O[I+0]=f?1:-1,O[I+1]=0,O[I+2]=0}S+=2,I+=3}for(var j=w+1,N=new Uint16Array(w*E*6),F=0;F<E;F++)for(var L=0;L<w;L++){var C=6*(F*w+L);N[C+0]=(F+0)*j+L,N[C+1]=(F+1)*j+L,N[C+2]=(F+0)*j+L+1,N[C+3]=(F+1)*j+L,N[C+4]=(F+1)*j+L+1,N[C+5]=(F+0)*j+L+1}if(p){for(var D=new Float32Array(3*N.length),U=new Float32Array(3*N.length),B=new Float32Array(2*N.length),G=0;G<N.length;++G){var z=N[G];D[3*G+0]=T[3*z+0],D[3*G+1]=T[3*z+1],D[3*G+2]=T[3*z+2],U[3*G+0]=O[3*z+0],U[3*G+1]=O[3*z+1],U[3*G+2]=O[3*z+2],B[2*G+0]=A[2*z+0],B[2*G+1]=A[2*z+1]}T=D,O=U,A=B,N=void 0}return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},g,{id:_,attributes:u({positions:T,normals:O,texCoords:A},N?{indices:N}:{})})))}return s(t,e),t}(l.default),v=function(e){function t(e){var r=e.id,n=void 0===r?(0,d.uid)("plane"):r,s=i(e,["id"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},s,{id:n,geometry:new p(s)})))}return s(t,e),t}(h.default);r.default=v},{"../core/geometry":410,"../core/model":412,"../utils":459}],425:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.SphereGeometry=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("../core/geometry"),l=n(c),f=e("../core/model"),h=n(f),d=e("../utils"),p=r.SphereGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.nlat,n=void 0===r?10:r,s=e.nlong,c=void 0===s?10:s,l=e.radius,f=void 0===l?1:l,h=e.id,p=void 0===h?(0,d.uid)("sphere-geometry"):h,v=i(e,["nlat","nlong","radius","id"]);o(this,t);var _=0,g=Math.PI,y=g-_,b=0,m=2*Math.PI,w=m-b,E=(n+1)*(c+1);"number"==typeof f&&!function(){var e=f;f=function(t,r,n,i,o){return e}}();for(var x=new Float32Array(3*E),T=new Float32Array(3*E),O=new Float32Array(2*E),A=new Uint16Array(n*c*6),S=0;S<=n;S++)for(var I=0;I<=c;I++){var R=I/c,M=S/n,k=I+S*(c+1),P=2*k,j=3*k,N=w*R,F=y*M,L=Math.sin(N),C=Math.cos(N),D=Math.sin(F),U=Math.cos(F),B=C*D,G=U,z=L*D,H=f(B,G,z,R,M);x[j+0]=H*B,x[j+1]=H*G,x[j+2]=H*z,T[j+0]=B,T[j+1]=G,T[j+2]=z,O[P+0]=R,O[P+1]=M}for(var W=n+1,V=0;V<n;V++)for(var Y=0;Y<c;Y++){var q=6*(V*c+Y);A[q+0]=Y*W+V,A[q+1]=Y*W+V+1,A[q+2]=(Y+1)*W+V,A[q+3]=(Y+1)*W+V,A[q+4]=Y*W+V+1,A[q+5]=(Y+1)*W+V+1}return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},v,{id:p,attributes:{positions:x,indices:A,normals:T,texCoords:O}})))}return s(t,e),t}(l.default),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,n=void 0===r?(0,d.uid)("sphere"):r,s=i(e,["id"]);return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},s,{id:n,geometry:new p(s)})))}return s(t,e),t}(h.default);r.default=v},{"../core/geometry":410,"../core/model":412,"../utils":459}],426:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.TruncatedConeGeometry=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=e("../core/geometry"),l=n(c),f=e("../core/model"),h=n(f),d=r.TruncatedConeGeometry=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.bottomRadius,n=void 0===r?0:r,s=e.topRadius,c=void 0===s?0:s,l=e.height,f=void 0===l?1:l,h=e.nradial,d=void 0===h?10:h,p=e.nvertical,v=void 0===p?10:p,_=e.topCap,g=void 0!==_&&_,y=e.bottomCap,b=void 0!==y&&y,m=i(e,["bottomRadius","topRadius","height","nradial","nvertical","topCap","bottomCap"]);o(this,t);for(var w=(g?2:0)+(b?2:0),E=(d+1)*(v+1+w),x=Math.atan2(n-c,f),T=Math.sin,O=Math.cos,A=Math.PI,S=O(x),I=T(x),R=g?-2:0,M=v+(b?2:0),k=d+1,P=new Float32Array(3*E),j=new Float32Array(3*E),N=new Float32Array(2*E),F=new Uint16Array(d*(v+w)*6),L=0,C=0,D=R;D<=M;D++){var U=D/v,B=f*U,G=void 0;D<0?(B=0,U=1,G=n):D>v?(B=f,U=1,G=c):G=n+(c-n)*(D/v),D!==-2&&D!==v+2||(G=0,U=0),B-=f/2;for(var z=0;z<k;z++){var H=T(z*A*2/d),W=O(z*A*2/d);P[L+0]=H*G,P[L+1]=B,P[L+2]=W*G,j[L+0]=D<0||D>v?0:H*S,j[L+1]=D<0?-1:D>v?1:I,j[L+2]=D<0||D>v?0:W*S,N[C+0]=z/d,N[C+1]=U,C+=2,L+=3}}for(var V=0;V<v+w;V++)for(var Y=0;Y<d;Y++){var q=6*(V*d+Y);F[q+0]=k*(V+0)+0+Y,F[q+1]=k*(V+0)+1+Y,F[q+2]=k*(V+1)+1+Y,F[q+3]=k*(V+0)+0+Y,F[q+4]=k*(V+1)+1+Y,F[q+5]=k*(V+1)+0+Y}return a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},m,{attributes:{positions:P,normals:j,texCoords:N,indices:F}})))}return s(t,e),t}(l.default),p=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u({},e,{geometry:new d(e)})))}return s(t,e),t}(h.default);r.default=p},{"../core/geometry":410,"../core/model":412}],427:[function(e,t,r){(function(r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=e("./utils/is-browser"),o=n(i),a=e("../package.json"),s=o.default?window:r,u={VERSION:a.version,globals:{headlessGL:null,headlessTypes:null,modules:{},nodeIO:{}},global:s};if(s.luma&&s.luma.VERSION!==u.VERSION){var c=s.luma.VERSION+" vs "+u.VERSION;throw new Error("luma.gl - multiple versions detected: "+c)}s.luma=u,t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../package.json":488,"./utils/is-browser":460}],428:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("./without-io");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./io");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("./globals"),u=i(s),c=n(a);Object.assign(u.default,c)},{"./globals":427,"./io":433,"./without-io":487}],429:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return void 0===n&&"function"==typeof r&&(r=void 0,n=r),"string"==typeof t&&(t=new v(t)),new Promise(function(i,o){var a=void 0;try{a=h(t,e,r)}catch(e){return o(e),n(e,null)}return i(),n(null,a)})}function o(e){return new Promise(function(t,r){try{!function(){(0,c.default)(p,"window.File not defined. Must run under browser."),(0,c.default)(e instanceof p,"parameter must be a File object");var n=new d.FileReader;n.onerror=function(e){return r(new Error(a(e)))},n.onabort=function(){return r(new Error("Read operation was aborted."))},n.onload=function(){return t(n.result)},n.readAsText(e)}()}catch(e){r(e)}})}function a(e){switch(e.target.error.code){case e.target.error.NOT_FOUND_ERR:return"File not found.";case e.target.error.NOT_READABLE_ERR:return"File not readable.";case e.target.error.ABORT_ERR:return"Read operation was aborted.";case e.target.error.SECURITY_ERR:return"File is in a locked state.";case e.target.error.ENCODING_ERR:return'File is too long to encode in "data://" URL.';default:return"Read error."}}Object.defineProperty(r,"__esModule",{value:!0}),r.writeFile=i,r.readFile=o;var s=e("../../utils"),u=e("assert"),c=n(u),l="navigator"in t,f=t.navigator;s.isBrowser||(t.navigator={userAgent:"MSIE 9."});var h=e("filesaver.js");s.isBrowser||(l?t.navigator=f:delete t.navigator);var d=e("global/window"),p=d.File,v=d.Blob}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils":459,assert:2,"filesaver.js":371,"global/window":395}],430:[function(e,t,r){(function(t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,r){if(e instanceof HTMLCanvasElement){var i=e;return i.toDataURL(r)}(0,u.default)(e instanceof Image,"getImageData accepts image or canvas");var o=document.createElement("canvas");o.width=e.width,o.height=e.height,o.getContext("2d").drawImage(e,0,0);var a=o.toDataURL(r||"png").replace(/^data:image\/(png|jpg);base64,/,""),s=(0,l.default)();return t.nextTick(function(){return s.end(new n(a,"base64"))}),s}function a(e){return new Promise(function(t,r){try{!function(){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(){return r(new Error("Could not load image "+e+"."))},n.src=e}()}catch(e){r(e)}})}Object.defineProperty(r,"__esModule",{value:!0}),r.compressImage=o,r.loadImage=a;var s=e("assert"),u=i(s),c=e("through"),l=i(c)}).call(this,e("_process"),e("buffer").Buffer)},{_process:528,assert:2,buffer:11,through:544}],431:[function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){}function a(e){var t=new c(e);return t.sendAsync()}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r.loadFile=a;var u={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4},c=function(){function e(t){var r=t.url,a=t.path,s=void 0===a?null:a,u=t.method,c=void 0===u?"GET":u,l=t.async,f=void 0===l||l,h=t.noCache,d=void 0!==h&&h,p=t.sendAsBinary,v=void 0!==p&&p,_=t.responseType,g=void 0!==_&&_,y=t.onProgress,b=void 0===y?o:y,m=(t.onSuccess,t.onError),w=void 0===m?o:m,E=t.onAbort,x=void 0===E?o:E,T=t.onComplete,O=void 0===T?o:T;n(t,["url","path","method","async","noCache","sendAsBinary","responseType","onProgress","onSuccess","onError","onAbort","onComplete"]);i(this,e),this.url=s?s.join(s,r):r,this.method=c,this.async=f,this.noCache=d,this.sendAsBinary=v,this.responseType=g,this.req=new XMLHttpRequest,this.req.onload=function(e){return O(e)},this.req.onerror=function(e){return w(e)},this.req.onabort=function(e){return x(e)},this.req.onprogress=function(e){e.lengthComputable?b(e,Math.round(e.loaded/e.total*100)):b(e,-1)}}return s(e,[{key:"setRequestHeader",value:function(e,t){return this.req.setRequestHeader(e,t),this}},{key:"sendAsync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(r,n){try{!function(){var i=e.req,o=e.method,a=e.async,s=e.noCache,c=e.sendAsBinary,l=e.responseType,f=s?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;i.open(o,f,a),l&&(i.responseType=l),a&&(i.onreadystatechange=function(e){i.readyState===u.COMPLETED&&(200===i.status?r(i.responseType?i.response:i.responseText):n(new Error(i.status+": "+f)))}),c?i.sendAsBinary(t):i.send(t),a||(200===i.status?r(i.responseType?i.response:i.responseText):n(new Error(i.status+": "+f)))}()}catch(e){n(e)}})}}]),e}()},{}],432:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(r,"__esModule",{value:!0}),r.browserFs=r.loadFile=void 0;var i=e("./browser-request");Object.defineProperty(r,"loadFile",{enumerable:!0,get:function(){return i.loadFile}});var o=e("./browser-image-io");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./browser-fs"),s=n(a);r.browserFs=s},{"./browser-fs":429,"./browser-image-io":430,"./browser-request":431}],433:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./platform");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})});var i=e("./load-files");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})})},{"./load-files":434,"./platform":437}],434:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(){}function a(e){var t=e.urls,r=e.onProgress,n=void 0===r?o:r,a=i(e,["urls","onProgress"]);(0,_.default)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var s=0;return Promise.all(t.map(function(e){var r=(0,g.loadFile)(p({url:e},a));return r.then(function(r){return n({progress:++s/t.length,count:s,total:t.length,url:e})}),r}))}function s(e){var t=e.urls,r=e.onProgress,n=void 0===r?o:r;i(e,["urls","onProgress"]);(0,_.default)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var a=0;return Promise.all(t.map(function(e){var r=(0,g.loadImage)(e);return r.then(function(r){return n({progress:++a/t.length,count:a,total:t.length,url:e})}),r}))}function u(e,t){var r=t.urls,n=t.onProgress,a=void 0===n?o:n,u=i(t,["urls","onProgress"]);return(0,_.default)(r.every(function(e){return"string"==typeof e}),"loadTextures: {urls} must be array of strings"),s(p({urls:r,onProgress:a},u)).then(function(t){return t.map(function(t,n){var i=Array.isArray(u.parameters)?u.parameters[n]:u.parameters;return i=void 0===i?{}:i,new y.Texture2D(e,p({id:r[n]},i,{data:t}))})})}function c(e,t){var r=t.vs,n=t.fs,s=t.onProgress,u=void 0===s?o:s,c=i(t,["vs","fs","onProgress"]);return a(p({urls:[r,n],onProgress:u},c)).then(function(t){var r=d(t,2),n=r[0],i=r[1];return new y.Program(e,p({vs:n,fs:i},c))})}function l(e,t){var r=t.url,n=t.onProgress,s=void 0===n?o:n,u=i(t,["url","onProgress"]);return a(p({urls:[r],onProgress:s},u)).then(function(t){var r=d(t,1),n=r[0];return f(e,p({file:n},u))})}function f(e,t){var r=t.file,n=t.program,o=void 0===n?new y.Program(e):n,a=i(t,["file","program"]),s="string"==typeof r?h(r):r,u={},c={};for(var l in s){var f=s[l];Array.isArray(f)?u[l]="indices"===l?new Uint16Array(f):new Float32Array(f):c[l]=f}return new b.Model(p({program:o,geometry:new b.Geometry({attributes:u})},c,a))}function h(e){try{return JSON.parse(e)}catch(e){throw new Error("Failed to parse JSON: "+e)}}Object.defineProperty(r,"__esModule",{value:!0});var d=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.loadFiles=a,r.loadImages=s,r.loadTextures=u,r.loadProgram=c,r.loadModel=l,r.parseModel=f;var v=e("assert"),_=n(v),g=e("./platform"),y=e("../webgl"),b=e("../core")},{"../core":411,"../webgl":471,"./platform":437,assert:2}],435:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";return(0,c.default)((0,f.default)(e.data,[e.width,e.height,4],[4,4*e.width,1],0),t.replace("image/",""))}function o(e){return _(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.compressImage=i,r.loadImage=o;var a=e("get-pixels"),s=n(a),u=e("save-pixels"),c=n(u),l=e("ndarray"),f=n(l),h=e("fs"),d=e("../../utils"),p=e("../../globals"),v=n(p),_=(0,d.promisify)(s.default);v.default.globals.modules.getPixels=s.default,v.default.globals.modules.savePixels=c.default,v.default.globals.modules.ndarray=f.default,v.default.globals.nodeIO={readFile:h.readFile,writeFile:h.writeFile,compressImage:i,loadImage:o}},{"../../globals":427,"../../utils":459,fs:9,"get-pixels":373,ndarray:492,"save-pixels":541}],436:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./headless-io");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return n[e]}})})},{"./headless-io":435}],437:[function(e,t,r){"use strict";var n=e("../utils");t.exports=e(n.isBrowser?"./browser":"./node")},{"../utils":459,"./browser":432,"./node":436}],438:[function(e,t,r){"use strict";function n(e){"epsilon"in e&&(y.glMatrix.EPSILON=e.epsilon),"debug"in e&&(y.glMatrix.debug=e.debug)}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.glMatrix.precision||4;return parseFloat(e.toPrecision(t))}function o(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&e.length}function a(e){return e.clone?e.clone():new Array(e)}function s(e,t){if(o(e)){for(var r=a(e),n=0;n<r.length;++n)r[n]=t(r[n],n,r);return r}return t(e)}function u(e){return s(e,function(e){return e/180*Math.PI})}function c(e){return s(e,function(e){return 180*e/Math.PI})}function l(e){return s(e,function(e){return Math.sin(e)})}function f(e){return s(e,function(e){return Math.cos(e)})}function h(e){return s(e,function(e){return Math.tan(e)})}function d(e){return s(e,function(e){return Math.asin(e)})}function p(e){return s(e,function(e){return Math.acos(e)})}function v(e){return s(e,function(e){return Math.atan(e)})}function _(e,t,r){return Math.max(t,Math.min(r,e))}function g(e,t){return Math.abs(e-t)<=y.glMatrix.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}Object.defineProperty(r,"__esModule",{value:!0}),r.glMatrix=void 0,r.configure=n,r.formatValue=i,r.isArray=o,r.clone=a,r.radians=u,r.degrees=c,r.sin=l,r.cos=f,r.tan=h,r.asin=d,r.acos=p,r.atan=v,r.clamp=_,r.equals=g;var y=e("gl-matrix");y.glMatrix.debug=!0,y.glMatrix.printRowMajor=!0,r.glMatrix=y.glMatrix},{"gl-matrix":385}],439:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e>=0&&e<6}function u(e){if(e<0&&e>=6)throw new Error(_);return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./math-array"),f=n(l),h=e("./common"),d=e("./matrix4"),p=e("./quaternion"),v=e("./vector3"),_="Unknown Euler angle order",g=.99999,y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return arguments.length>0&&Array.isArray(arguments[0])?s.fromVector3.apply(s,arguments):s.set(e,r,n,a),s}return a(t,e),c(t,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(e){return t.RotationOrders[e]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return t.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),c(t,[{key:"copy",value:function(e){for(var t=0;t<3;++t)this[t]=e[t];return this[3]=Number.isFinite(e[3])||this.order,this.check(),this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments[3];return this[0]=e,this[1]=t,this[2]=r,this[3]=Number.isFinite(n)?n:this[3],this.check(),this}},{key:"validate",value:function(){return s(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}},{key:"toVector3",value:function(e){return e?e.set(this[0],this[1],this[2]):new v.Vector3(this[0],this[1],this[2])}},{key:"fromVector3",value:function(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check(),this}},{key:"fromRollPitchYaw",value:function(e,r,n){return this.set(e,r,n,t.ZYX)}},{key:"fromQuaternion",value:function(e,t){return this._fromRotationMatrix(d.Matrix4.fromQuaternion(e),t),this.check(),this}},{key:"fromRotationMatrix",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder;return this._fromRotationMatrix(e,r),this.check(),this}},{key:"getRotationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d.Matrix4;return this._getRotationMatrix(e),e}},{key:"getQuaternion",value:function(){var e=new p.Quaternion;switch(this[4]){case t.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case t.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case t.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case t.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case t.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case t.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(_)}}},{key:"_fromRotationMatrix",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder,n=e.elements,i=n[0],o=n[4],a=n[8],s=n[1],u=n[5],c=n[9],l=n[2],f=n[6],d=n[10];switch(r=r||this[3]){case t.XYZ:this[1]=Math.asin((0,h.clamp)(a,-1,1)),Math.abs(a)<g?(this[0]=Math.atan2(-c,d),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(f,u),this[2]=0);break;case t.YXZ:this[0]=Math.asin(-(0,h.clamp)(c,-1,1)),Math.abs(c)<g?(this[1]=Math.atan2(a,d),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case t.ZXY:this[0]=Math.asin((0,h.clamp)(f,-1,1)),Math.abs(f)<g?(this[1]=Math.atan2(-l,d),
this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case t.ZYX:this[1]=Math.asin(-(0,h.clamp)(l,-1,1)),Math.abs(l)<g?(this[0]=Math.atan2(f,d),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case t.YZX:this[2]=Math.asin((0,h.clamp)(s,-1,1)),Math.abs(s)<g?(this[0]=Math.atan2(-c,u),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(a,d));break;case t.XZY:this[2]=Math.asin(-(0,h.clamp)(o,-1,1)),Math.abs(o)<g?(this[0]=Math.atan2(f,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-c,d),this[1]=0);break;default:throw new Error(_)}return this[3]=r,this}},{key:"_getRotationMatrix",value:function(){var e=new d.Matrix4,r=this.x,n=this.y,i=this.z,o=Math.cos(r),a=Math.cos(n),s=Math.cos(i),u=Math.sin(r),c=Math.sin(n),l=Math.sin(i);switch(this[3]){case t.XYZ:var f=o*s,h=o*l,p=u*s,v=u*l;e[0]=a*s,e[4]=-a*l,e[8]=c,e[1]=h+p*c,e[5]=f-v*c,e[9]=-u*a,e[2]=v-f*c,e[6]=p+h*c,e[10]=o*a;break;case t.YXZ:var g=a*s,y=a*l,b=c*s,m=c*l;e[0]=g+m*u,e[4]=b*u-y,e[8]=o*c,e[1]=o*l,e[5]=o*s,e[9]=-u,e[2]=y*u-b,e[6]=m+g*u,e[10]=o*a;break;case t.ZXY:var w=a*s,E=a*l,x=c*s,T=c*l;e[0]=w-T*u,e[4]=-o*l,e[8]=x+E*u,e[1]=E+x*u,e[5]=o*s,e[9]=T-w*u,e[2]=-o*c,e[6]=u,e[10]=o*a;break;case t.ZYX:var O=o*s,A=o*l,S=u*s,I=u*l;e[0]=a*s,e[4]=S*c-A,e[8]=O*c+I,e[1]=a*l,e[5]=I*c+O,e[9]=A*c-S,e[2]=-c,e[6]=u*a,e[10]=o*a;break;case t.YZX:var R=o*a,M=o*c,k=u*a,P=u*c;e[0]=a*s,e[4]=P-R*l,e[8]=k*l+M,e[1]=l,e[5]=o*s,e[9]=-u*s,e[2]=-c*s,e[6]=M*l+k,e[10]=R-P*l;break;case t.XZY:var j=o*a,N=o*c,F=u*a,L=u*c;e[0]=a*s,e[4]=-l,e[8]=c*s,e[1]=j*l+L,e[5]=o*s,e[9]=N*l-F,e[2]=F*l-N,e[6]=u*s,e[10]=L*l+j;break;default:throw new Error(_)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,h.checkNumber)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){return this[2]=(0,h.checkNumber)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){return this[2]=(0,h.checkNumber)(e)}},{key:"order",get:function(){return this[3]},set:function(e){return this[3]=u(e)}}]),t}(f.default);r.default=y},{"./common":438,"./math-array":441,"./matrix4":442,"./quaternion":443,"./vector3":447}],440:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){e._assert(t.equals(r),{message:n||"should be equal",operator:"equal",actual:t,expected:r,extra:i})}Object.defineProperty(r,"__esModule",{value:!0});var o=e("./common");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./vector2");Object.defineProperty(r,"Vector2",{enumerable:!0,get:function(){return n(a).default}});var s=e("./vector3");Object.defineProperty(r,"Vector3",{enumerable:!0,get:function(){return n(s).default}});var u=e("./vector4");Object.defineProperty(r,"Vector4",{enumerable:!0,get:function(){return n(u).default}});var c=e("./matrix4");Object.defineProperty(r,"Matrix4",{enumerable:!0,get:function(){return n(c).default}});var l=e("./quaternion");Object.defineProperty(r,"Quaternion",{enumerable:!0,get:function(){return n(l).default}});var f=e("./euler");Object.defineProperty(r,"Euler",{enumerable:!0,get:function(){return n(f).default}}),r.tapeEquals=i},{"./common":438,"./euler":439,"./matrix4":442,"./quaternion":443,"./vector2":446,"./vector3":447,"./vector4":448}],441:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./common"),c=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"clone",value:function e(){var t=this.constructor,e=(new t).copy(this);return e.check(),e}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check(),this}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<this.ELEMENTS;++n)this[n]=t[n]||0;return this.check(),this}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)this[r]=e[r+t];return this.check(),this}},{key:"toString",value:function(){for(var e="",t=0;t<this.ELEMENTS;++t)e+=(t>0?", ":"")+(0,u.formatValue)(this[t]);return this.constructor.name+"("+e+")"}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<this.ELEMENTS;++r)e[t+r]=this[r];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!(0,u.equals)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"validate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e.length===this.ELEMENTS,r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(e[r]);return t}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(u.glMatrix.debug&&!this.validate(e))throw new Error("Invalid "+this.constructor.name)}}]),t}(a(Array));r.default=c},{"./common":438}],442:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,c=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("./math-array"),h=n(f),d=e("./common"),p=e("./vector2"),v=n(p),_=e("./vector3"),g=n(_),y=e("./vector4"),b=n(y),m=e("./utils/decorators"),w=e("gl-matrix"),E=e("./utils/validators"),x=(u=function(e){function t(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(r[0])&&1===arguments.length?a.copy(r[0]):a.identity(),a}return a(t,e),l(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,p=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return w.mat4.set(this,e,i,u,h,t,o,c,d,r,a,l,p,n,s,f,v),this.check(),this}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,p=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return w.mat4.set(this,e,t,r,n,i,o,a,s,u,c,l,f,h,d,p,v),this.check(),this}},{key:"equals",value:function(e){return w.mat4.equals(this,e)}},{key:"exactEquals",value:function(e){return w.mat4.exactEquals(this,e)}},{key:"toString",value:function(){d.glMatrix.printRowMajor?w.mat4.str(this):w.mat4.str(this)}},{key:"determinant",value:function(){return w.mat4.determinant(this)}},{key:"getRotation",value:function(){}},{key:"identity",value:function(){return w.mat4.identity(this),this.check(),this}},{key:"frustum",value:function(e){var t=e.left,r=e.right,n=e.bottom,i=e.top,o=e.near,a=e.far;return w.mat4.frustum(this,t,r,n,i,o,a),this.check(),this}},{key:"lookAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eye,r=e.center,n=void 0===r?[0,0,0]:r,i=e.up,o=void 0===i?[0,1,0]:i;return w.mat4.lookAt(this,t,n,o),this.check(),this}},{key:"ortho",value:function(e){var t=e.left,r=e.right,n=e.bottom,i=e.top,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;return w.mat4.ortho(this,t,r,n,i,a,u),this.check(),this}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fov,r=void 0===t?45*Math.PI/180:t,n=e.aspect,i=void 0===n?1:n,o=e.near,a=void 0===o?.1:o,s=e.far,u=void 0===s?500:s;if(r>2*Math.PI)throw Error("radians");return w.mat4.perspective(this,r,i,a,u),this.check(),this}},{key:"perspectiveFromFieldOfView",value:function(e,t,r,n){return w.mat4.perspectiveFromFieldOfView(e,t,r,n),this.check(),this}},{key:"fromQuaternion",value:function(e){return w.mat4.fromQuat(this,e),this.check(),this}},{key:"fromQuat",value:function(e){return w.mat4.fromQuat(this,e),this.check(),this}},{key:"fromRotation",value:function(e,t){return w.mat4.fromRotation(this,e,t),this.check(),this}},{key:"fromRotationTranslation",value:function(e,t){return w.mat4.fromRotationTranslation(this,e,t),this.check(),this}},{key:"fromRotationTranslationScale",value:function(e,t,r){return w.mat4.fromRotationTranslationScale(this,e,t,r),this.check(),this}},{key:"fromRotationTranslationScaleOrigin",value:function(e,t,r,n){return w.mat4.fromRotationTranslationScaleOrigin(this,e,t,r,n),this.check(),this}},{key:"fromScaling",value:function(e){return w.mat4.fromScaling(this,e),this.check(),this}},{key:"fromTranslation",value:function(e){return w.mat4.fromTranslation(this,e),this.check(),this}},{key:"fromXRotation",value:function(e){return w.mat4.fromXRotation(this,e),this.check(),this}},{key:"fromYRotation",value:function(e){return w.mat4.fromYRotation(this,e),this.check(),this}},{key:"fromZRotation",value:function(e){return w.mat4.fromZRotation(this,e),this.check(),this}},{key:"transpose",value:function(){return w.mat4.transpose(this,this),this.check(),this}},{key:"invert",value:function(){return w.mat4.invert(this,this),this.check(),this}},{key:"adjoint",value:function(){return w.mat4.adjoint(this,this),this.check(),this}},{key:"add",value:function(e,t){return w.mat4.add(this,this,e),this.check(),this}},{key:"multiplyLeft",value:function(e){return w.mat4.multiply(this,e,this),this.check(),this}},{key:"multiplyRight",value:function(e){return w.mat4.multiply(this,this,e),this.check(),this}},{key:"rotateX",value:function(e){return w.mat4.rotateX(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return w.mat4.rotateY(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return w.mat4.rotateZ(this,this,e),this.check(),this}},{key:"rotateXYZ",value:function(e){var t=c(e,3),r=t[0],n=t[1],i=t[2],o=this[0],a=this[1],s=this[2],u=this[3],l=this[4],f=this[5],h=this[6],d=this[7],p=this[8],v=this[9],_=this[10],g=this[11],y=Math.cos(r),b=Math.cos(n),m=Math.cos(i),w=Math.sin(r),E=Math.sin(n),x=Math.sin(i),T=b*m,O=-y*x+w*E*m,A=w*x+y*E*m,S=b*x,I=y*m+w*E*x,R=-w*m+y*E*x,M=-E,k=w*b,P=y*b;return this[0]=o*T+l*S+p*M,this[1]=a*T+f*S+v*M,this[2]=s*T+h*S+_*M,this[3]=u*T+d*S+g*M,this[4]=o*O+l*I+p*k,this[5]=a*O+f*I+v*k,this[6]=s*O+h*I+_*k,this[7]=u*O+d*I+g*k,this[8]=o*A+l*R+p*P,this[9]=a*A+f*R+v*P,this[10]=s*A+h*R+_*P,this[11]=u*A+d*R+g*P,this.check(),this}},{key:"scale",value:function(e){return w.mat4.scale(this,this,e),this.check(),this}},{key:"translate",value:function(e){return w.mat4.translate(this,this,e),this.check(),this}},{key:"transformVector2",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v.default;return w.vec2.transformMat4(t,e,this),(0,E.checkVector2)(t),t}},{key:"transformVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g.default;return w.vec3.transformMat4(t,e,this),(0,E.checkVector3)(t),t}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new b.default;return w.vec4.transformMat4(t,e,this),(0,E.checkVector4)(t),t}},{key:"transformVector",value:function(e){switch(e.length){case 2:return this.transformVector2(e);case 3:return this.transformVector3(e);case 4:return this.transformVector4(e);default:throw new Error("Illegal vector")}}},{key:"ELEMENTS",get:function(){return 16}},{key:"m00",get:function(){return this[0]},set:function(e){return this[0]=(0,d.checkNumber)(e)}},{key:"m01",get:function(){return this[4]},set:function(e){return this[4]=(0,d.checkNumber)(e)}},{key:"m02",get:function(){return this[8]},set:function(e){return this[8]=(0,d.checkNumber)(e)}},{key:"m03",get:function(){return this[12]},set:function(e){return this[12]=(0,d.checkNumber)(e)}},{key:"m10",get:function(){return this[1]},set:function(e){return this[1]=(0,d.checkNumber)(e)}},{key:"m11",get:function(){return this[5]},set:function(e){return this[5]=(0,d.checkNumber)(e)}},{key:"m12",get:function(){return this[9]},set:function(e){return this[9]=(0,d.checkNumber)(e)}},{key:"m13",get:function(){return this[13]},set:function(e){return this[13]=(0,d.checkNumber)(e)}},{key:"m20",get:function(){return this[2]},set:function(e){return this[2]=(0,d.checkNumber)(e)}},{key:"m21",get:function(){return this[6]},set:function(e){return this[6]=(0,d.checkNumber)(e)}},{key:"m22",get:function(){return this[10]},set:function(e){return this[10]=(0,d.checkNumber)(e)}},{key:"m23",get:function(){return this[14]},set:function(e){return this[14]=(0,d.checkNumber)(e)}},{key:"m30",get:function(){return this[3]},set:function(e){return this[3]=(0,d.checkNumber)(e)}},{key:"m31",get:function(){return this[7]},set:function(e){return this[7]=(0,d.checkNumber)(e)}},{key:"m32",get:function(){return this[11]},set:function(e){return this[11]=(0,d.checkNumber)(e)}},{key:"m33",get:function(){return this[15]},set:function(e){return this[15]=(0,d.checkNumber)(e)}}]),t}(h.default),s(u.prototype,"equals",[m.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[m.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"toString",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"toString"),u.prototype),s(u.prototype,"determinant",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"determinant"),u.prototype),s(u.prototype,"lookAt",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"lookAt"),u.prototype),s(u.prototype,"ortho",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"ortho"),u.prototype),s(u.prototype,"perspective",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"perspective"),u.prototype),s(u.prototype,"perspectiveFromFieldOfView",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"perspectiveFromFieldOfView"),u.prototype),s(u.prototype,"transpose",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"transpose"),u.prototype),s(u.prototype,"invert",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"invert"),u.prototype),s(u.prototype,"adjoint",[m.unary],Object.getOwnPropertyDescriptor(u.prototype,"adjoint"),u.prototype),s(u.prototype,"add",[m.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"multiplyLeft",[m.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiplyLeft"),u.prototype),s(u.prototype,"multiplyRight",[m.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiplyRight"),u.prototype),s(u.prototype,"scale",[m.binary],Object.getOwnPropertyDescriptor(u.prototype,"scale"),u.prototype),s(u.prototype,"translate",[m.binary],Object.getOwnPropertyDescriptor(u.prototype,"translate"),u.prototype),u);r.default=x},{"./common":438,"./math-array":441,"./utils/decorators":444,"./utils/validators":445,"./vector2":446,"./vector3":447,"./vector4":448,"gl-matrix":385}],443:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./math-array"),f=n(l),h=e("./common"),d=e("gl-matrix"),p=e("./utils/decorators"),v=(u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,r,n,a),s}return a(t,e),c(t,[{key:"fromMatrix3",value:function(e){return d.quat.fromMat3(this,e),this.check(),this}},{key:"fromValues",value:function(e,t,r,n){return this.set(e,t,r,n)}},{key:"identity",value:function(){return d.quat.identity(this),this.check(),this}},{key:"equals",value:function(e){return d.quat.equals(this,e)}},{key:"exactEquals",value:function(e){return d.quat.exactEquals(this,e)}},{key:"length",value:function(){return d.quat.length(this)}},{key:"squaredLength",value:function(e){return d.quat.squaredLength(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return d.quat.dot(this,e)}},{key:"getAxisAngle",value:function(){var e=[],t=d.quat.getAxisAngle(e,this);return{axis:e,angle:t}}},{key:"rotationTo",value:function(e,t){return d.quat.rotationTo(this,e,t),this.check(),this}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return d.quat.add(this,e),this.check(),this}},{key:"calculateW",value:function(){return d.quat.calculateW(this,this),this.check(),this}},{key:"conjugate",value:function(){return d.quat.conjugate(this,this),this.check(),this}},{key:"invert",value:function(){return d.quat.invert(this,this),this.check(),this}},{key:"lerp",value:function(e,t,r){return d.quat.lerp(this,e,t,r),this.check(),this}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return d.quat.multiply(this,this,t),this.check(),this}},{key:"normalize",value:function(){return d.quat.normalize(this,this),this.check(),this}},{key:"rotateX",value:function(e){return d.quat.rotateX(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return d.quat.rotateY(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return d.quat.rotateZ(this,this,e),this.check(),this}},{key:"scale",value:function(e){return d.quat.scale(this,this,e),this.check(),this}},{key:"set",value:function(e,t,r,n){return d.quat.set(this,e,t,r,n),this.check(),this}},{key:"setAxisAngle",value:function(e,t){return d.quat.setAxisAngle(this,e,t),this.check(),this}},{key:"slerp",value:function(e,t,r){return d.quat.slerp(this,e,t,r),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,h.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,h.checkNumber)(e)}}]),t}(f.default),s(u.prototype,"equals",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"add",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"multiply",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiply"),u.prototype),s(u.prototype,"normalize",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"normalize"),u.prototype),u);r.default=v},{"./common":438,"./math-array":441,"./utils/decorators":444,"gl-matrix":385}],444:[function(e,t,r){"use strict";function n(e){return Array.isArray(e)?e:Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}function a(e,t){return o(e[e.length-1])?t.apply(void 0,i(e).concat([[]])):function(){return t.apply(void 0,Array.prototype.slice.call(arguments).concat([e]))}}function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(t,function(e,t,r,i){var o=(n(i),e.constructor);return o[t]=function(){var e;return(e=new o)[t].apply(e,arguments)},f({},r,{value:function(){return r.value.apply(this,arguments)}})})}function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(t,function(e,t,r,i){var o=(n(i),e.constructor);return o[t]=function(){var e;return(e=new o)[t].apply(e,arguments)},f({},r,{value:function(){return r.value.apply(this,arguments)}})})}function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(t,function(e,t,r,i){var o=(n(i),e.constructor);return o[t]=function(e,r){return(new o).copy(e)[t](r)},f({},r,{value:function(){return r.value.apply(this,arguments)}})})}function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(t,function(e,t,r,i){var o=(n(i),e.constructor);return o[t]=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce(function(e,r){return e[t](r)},(new o).copy(e))},f({},r,{value:function(){return r.value.apply(this,arguments)}})})}Object.defineProperty(r,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.unary=s,r.staticMethod=u,r.binary=c,r.spread=l},{}],445:[function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=0;n<t.length;++n)if(void 0===t[n])throw new Error("Invalid math argument")}function i(e){return 2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])}function o(e){if(m.glMatrix.debug&&!i(e))throw new Error("Invalid Vector2")}function a(e){return 3===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])}function s(e){if(m.glMatrix.debug&&!a(e))throw new Error("Invalid Vector3")}function u(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}function c(e){if(m.glMatrix.debug&&!u(e))throw new Error("Invalid Vector4")}function l(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}function f(e){if(m.glMatrix.debug&&!l(e))throw new Error("Invalid Quaternion")}function h(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}function d(e){if(m.glMatrix.debug&&!h(e))throw new Error("Invalid Matrix2")}function p(e){return 6===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])}function v(e){if(m.glMatrix.debug&&!p(e))throw new Error("Invalid Matrix2d")}function _(e){return 9===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])&&Number.isFinite(e[6])&&Number.isFinite(e[7])&&Number.isFinite(e[8])}function g(e){if(m.glMatrix.debug&&!_(e))throw new Error("Invalid Matrix3")}function y(e){return 16===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])&&Number.isFinite(e[6])&&Number.isFinite(e[7])&&Number.isFinite(e[8])&&Number.isFinite(e[9])&&Number.isFinite(e[10])&&Number.isFinite(e[11])&&Number.isFinite(e[12])&&Number.isFinite(e[13])&&Number.isFinite(e[14])&&Number.isFinite(e[15])}function b(e){if(m.glMatrix.debug&&!y(e))throw new Error("Invalid Matrix4")}Object.defineProperty(r,"__esModule",{value:!0}),r.checkArguments=n,r.validateVector2=i,r.checkVector2=o,r.validateVector3=a,r.checkVector3=s,r.validateVector4=u,r.checkVector4=c,r.validateQuaternion=l,r.checkQuaternion=f,r.validateMatrix2=h,r.checkMatrix2=d,r.validateMatrix2d=p,r.checkMatrix2d=v,r.validateMatrix3=_,r.checkMatrix3=g,r.validateMatrix4=y,r.checkMatrix4=b;var m=e("gl-matrix")},{"gl-matrix":385}],446:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./math-array"),f=n(l),h=e("./common"),d=e("gl-matrix"),p=e("./utils/decorators"),v=(u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?n.copy(e):n.set(e,r),n}return a(t,e),c(t,[{key:"set",value:function(e,t){return d.vec2.set(this,e,t),this.check(),this}},{key:"equals",value:function(e){return d.vec2.equals(this,e)}},{key:"exactEquals",value:function(e){return d.vec2.exactEquals(this,e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec2.add(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){
return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}}]),t}(f.default),s(u.prototype,"equals",[p.staticMethod],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[p.staticMethod],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"add",[p.staticMethod],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),u);r.default=v},{"./common":438,"./math-array":441,"./utils/decorators":444,"gl-matrix":385}],447:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./math-array"),f=n(l),h=e("./common"),d=e("gl-matrix"),p=e("./utils/decorators"),v=(u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?a.copy(e):a.set(e,r,n),a}return a(t,e),c(t,[{key:"set",value:function(e,t,r){return d.vec3.set(this,e,t,r),this.check(),this}},{key:"equals",value:function(e){return d.vec3.equals(this,e)}},{key:"exactEquals",value:function(e){return d.vec3.exactEquals(this,e)}},{key:"distance",value:function(e){return d.vec3.distance(e)}},{key:"dist",value:function(e){return d.vec3.dist(e)}},{key:"angle",value:function(e){return d.vec3.angle(e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec3.add(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec3.subtract(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec3.multiply(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec3.divide(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"ceil",value:function(){return d.vec3.ceil(this,this),this.check(),this}},{key:"floor",value:function(){return d.vec3.floor(this,this),this.check(),this}},{key:"min",value:function(){return d.vec3.min(this,this),this.check(),this}},{key:"max",value:function(){return d.vec3.max(this,this),this.check(),this}},{key:"scale",value:function(e){return d.vec3.scale(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return d.vec3.scaleAndAdd(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return d.vec3.negate(this,this),this.check(),this}},{key:"inverse",value:function(){return d.vec3.inverse(this,this),this.check(),this}},{key:"normalize",value:function(){return d.vec3.normalize(this,this),this.check(),this}},{key:"dot",value:function(e){return d.vec3.dot(this,this,e),this.check(),this}},{key:"cross",value:function(e){return d.vec3.cross(this,this,e),this.check(),this}},{key:"lerp",value:function(e){return d.vec3.lerp(this,this,e),this.check(),this}},{key:"hermite",value:function(e){return d.vec3.hermite(this,this,e),this.check(),this}},{key:"bezier",value:function(e){return d.vec3.bezier(this,this,e),this.check(),this}},{key:"random",value:function(e){return d.vec3.cross(this,this,e),this.check(),this}},{key:"rotateX",value:function(e,t){return d.vec3.rotateX(this,this,e,t),this.check(),this}},{key:"rotateY",value:function(e,t){return d.vec3.rotateY(this,this,e,t),this.check(),this}},{key:"rotateZ",value:function(e,t){return d.vec3.rotateZ(this,this,e,t),this.check(),this}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,h.checkNumber)(e)}}]),t}(f.default),s(u.prototype,"equals",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"distance",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"distance"),u.prototype),s(u.prototype,"dist",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"dist"),u.prototype),s(u.prototype,"angle",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"angle"),u.prototype),s(u.prototype,"add",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"subtract",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"subtract"),u.prototype),s(u.prototype,"multiply",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiply"),u.prototype),s(u.prototype,"divide",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"divide"),u.prototype),s(u.prototype,"ceil",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"ceil"),u.prototype),s(u.prototype,"floor",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"floor"),u.prototype),s(u.prototype,"min",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"min"),u.prototype),s(u.prototype,"max",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"max"),u.prototype),s(u.prototype,"scale",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"scale"),u.prototype),s(u.prototype,"negate",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"negate"),u.prototype),s(u.prototype,"inverse",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"inverse"),u.prototype),s(u.prototype,"normalize",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"normalize"),u.prototype),s(u.prototype,"dot",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"dot"),u.prototype),s(u.prototype,"cross",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"cross"),u.prototype),u);r.default=v},{"./common":438,"./math-array":441,"./utils/decorators":444,"gl-matrix":385}],448:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u,c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./math-array"),f=n(l),h=e("./common"),d=e("gl-matrix"),p=e("./utils/decorators"),v=(u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?s.copy(e):s.set(e,r,n,a),s}return a(t,e),c(t,[{key:"set",value:function(e,t,r,n){return d.vec4.set(this,e,t,r,n),this.check(),this}},{key:"equals",value:function(e){return d.vec4.equals(this,e)}},{key:"exactEquals",value:function(e){return d.vec4.exactEquals(this,e)}},{key:"distance",value:function(e){return d.vec4.distance(e)}},{key:"dist",value:function(e){return d.vec4.dist(e)}},{key:"angle",value:function(e){return d.vec4.angle(e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec4.add(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec4.subtract(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec4.multiply(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;d.vec4.divide(this,u)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"ceil",value:function(){return d.vec4.ceil(this,this),this.check(),this}},{key:"floor",value:function(){return d.vec4.floor(this,this),this.check(),this}},{key:"min",value:function(){return d.vec4.min(this,this),this.check(),this}},{key:"max",value:function(){return d.vec4.max(this,this),this.check(),this}},{key:"scale",value:function(e){return d.vec4.scale(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return d.vec4.scaleAndAdd(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return d.vec4.negate(this,this),this.check(),this}},{key:"inverse",value:function(){return d.vec4.inverse(this,this),this.check(),this}},{key:"normalize",value:function(){return d.vec4.normalize(this,this),this.check(),this}},{key:"dot",value:function(e){return d.vec4.dot(this,this,e),this.check(),this}},{key:"cross",value:function(e){return d.vec4.cross(this,this,e),this.check(),this}},{key:"lerp",value:function(e){return d.vec4.lerp(this,this,e),this.check(),this}},{key:"hermite",value:function(e){return d.vec4.hermite(this,this,e),this.check(),this}},{key:"bezier",value:function(e){return d.vec4.bezier(this,this,e),this.check(),this}},{key:"random",value:function(e){return d.vec4.random(this,this,e),this.check(),this}},{key:"rotateX",value:function(e,t){return d.vec4.rotateX(this,this,e,t),this.check(),this}},{key:"rotateY",value:function(e,t){return d.vec4.rotateY(this,this,e,t),this.check(),this}},{key:"rotateZ",value:function(e,t){return d.vec4.rotateZ(this,this,e,t),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,h.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,h.checkNumber)(e)}}]),t}(f.default),s(u.prototype,"equals",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"distance",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"distance"),u.prototype),s(u.prototype,"dist",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"dist"),u.prototype),s(u.prototype,"angle",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"angle"),u.prototype),s(u.prototype,"add",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"subtract",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"subtract"),u.prototype),s(u.prototype,"multiply",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiply"),u.prototype),s(u.prototype,"divide",[p.spread],Object.getOwnPropertyDescriptor(u.prototype,"divide"),u.prototype),s(u.prototype,"negate",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"negate"),u.prototype),s(u.prototype,"inverse",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"inverse"),u.prototype),s(u.prototype,"normalize",[p.unary],Object.getOwnPropertyDescriptor(u.prototype,"normalize"),u.prototype),s(u.prototype,"dot",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"dot"),u.prototype),s(u.prototype,"cross",[p.binary],Object.getOwnPropertyDescriptor(u.prototype,"cross"),u.prototype),u);r.default=v},{"./common":438,"./math-array":441,"./utils/decorators":444,"gl-matrix":385}],449:[function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=e("../core"),c=e("../webgl"),l="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",f=[-1,-1,1,-1,-1,1,1,1],h=f.map(function(e){return e===-1?0:e}),d=function(e){function t(e){var r=e.gl,a=n(e,["gl"]);i(this,t);var d=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s({gl:r},a,{vs:l,geometry:new u.Geometry({drawMode:c.GL.TRIANGLE_STRIP,attributes:{aClipSpacePosition:{value:new Float32Array(f),size:2},aTexCoord:{value:new Float32Array(h),size:2},aCoordinate:{value:new Float32Array(h),size:2}}})})));return d.setVertexCount(4),d}return a(t,e),t}(u.Model);r.default=d},{"../core":411,"../webgl":471}],450:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./clip-space-quad");Object.defineProperty(r,"ClipSpaceQuad",{enumerable:!0,get:function(){return n(i).default}})},{"./clip-space-quad":449}],451:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./object-3d"),f=n(l),h=e("../deprecated"),d=e("assert"),p=n(d),v=function(e){function t(e){var r=e.children,n=void 0===r?[]:r,i=o(e,["children"]);a(this,t),n.every(function(e){return(0,p.default)(e instanceof f.default)});var u=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));return u.children=n,u}return u(t,e),c(t,[{key:"add",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;Array.isArray(c)?this.add.apply(this,i(c)):this.children.push(c)}}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return this}},{key:"remove",value:function(e){var t=this.children,r=t.indexOf(e);return r>-1&&t.splice(r,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"traverse",value:regeneratorRuntime.mark(function e(){var r,n,i,o,a,s,u,c,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=l.viewMatrix,d=void 0===f?new h.Mat4:f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,n=!1,i=void 0,e.prev=3,o=this.children[Symbol.iterator]();case 5:if(r=(a=o.next()).done){e.next=19;break}if(s=a.value,u=s.matrix,c=d.mulMat4(u),!(s instanceof t)){e.next=13;break}return e.delegateYield(s.traverse({matrix:u,worldMatrix:c}),"t0",11);case 11:e.next=16;break;case 13:return s.program&&(s.program.use(),s.program.setUniforms({worldMatrix:c})),e.next=16,s;case 16:r=!0,e.next=5;break;case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(3),n=!0,i=e.t1;case 25:e.prev=25,e.prev=26,!r&&o.return&&o.return();case 28:if(e.prev=28,!n){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(25);case 33:case"end":return e.stop()}},e,this,[[3,21,25,33],[26,,28,32]])})},{key:"traverseReverse",value:regeneratorRuntime.mark(function e(){var r,n,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.viewMatrix,u=void 0===s?new h.Mat4:s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.children.length-1;case 1:if(!(r>=0)){e.next=15;break}if(n=this.children[r],i=n.matrix,o=u.mulMat4(i),!(n instanceof t)){e.next=9;break}return e.delegateYield(n.traverseReverse({matrix:i,worldMatrix:o}),"t0",7);case 7:e.next=12;break;case 9:return n.program&&(n.program.use(),n.program.setUniforms({worldMatrix:o})),e.next=12,n;case 12:--r,e.next=1;break;case 15:case"end":return e.stop()}},e,this)})}]),t}(f.default);r.default=v},{"../deprecated":415,"./object-3d":453,assert:2}],452:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./object-3d");Object.defineProperty(r,"Object3D",{enumerable:!0,get:function(){return n(i).default}});var o=e("./group");Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return n(o).default}});var a=e("./scene");Object.defineProperty(r,"Scene",{enumerable:!0,get:function(){return n(a).default}});var s=e("./pick");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})})},{"./group":451,"./object-3d":453,"./pick":454,"./scene":455}],453:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../deprecated"),s=e("assert"),u=n(s),c=e("../utils"),l=function(){function e(t){var r=t.id;t.display;i(this,e),this.position=new a.Vec3,this.rotation=new a.Vec3,this.scale=new a.Vec3(1,1,1),this.matrix=new a.Mat4,this.id=r||(0,c.uid)(this.constructor.name),this.display=!0,this.userData={}}return o(e,[{key:"setPosition",value:function(e){return(0,u.default)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return(0,u.default)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return(0,u.default)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function(e){var t=e.position,r=e.rotation,n=e.scale,i=e.update,o=void 0===i||i;return t&&this.setPosition(t),r&&this.setRotation(r),n&&this.setScale(n),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,r=this.scale;return this.matrix.id(),this.matrix.$translate(e[0],e[1],e[2]),this.matrix.$rotateXYZ(t[0],t[1],t[2]),this.matrix.$scale(r[0],r[1],r[2]),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,r=e.rotation,n=e.scale;return t&&this.setPosition(t),r&&this.setRotation(r),n&&this.setScale(n),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){(0,u.default)(e),t=t||this.matrix;var r=(new a.Mat4).copy(e).mulMat4(t),n=r.invert(),i=n.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:r,worldInverseMatrix:n,worldInverseTransposeMatrix:i}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.setVec3(this.position.add(e.endPosition)),this.endRotation.setVec3(this.rotation.add(e.endRotation)),this.endScale.setVec3(this.scale.add(e.endScale))}else this.endPosition.setVec3(this.position),this.endRotation.setVec3(this.rotation),this.endScale.setVec3(this.scale);for(var t=this.children,r=0;r<t.length;++r)t[r].transform();return this}}]),e}();r.default=l},{"../deprecated":415,"../utils":459,assert:2}],454:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=t.group,n=t.uniforms,i=t.x,s=t.y,c=t.pickingFBO,h=void 0===c?null:c;t.pickingProgram,t.pickingColors;(0,a.assertWebGLContext)(e),(0,l.default)(r instanceof u.default,f);var d="undefined"!=typeof window?window.devicePixelRatio:1,p=i*d,v=e.canvas.height-s*d;return h=h||new o.Framebuffer(e,{width:e.canvas.width,height:e.canvas.height}),(0,o.glContextWithState)(e,{frameBuffer:h,scissorTest:{x:p,y:v,w:1,h:1}},function(){var t=!0,a=!1,u=void 0;try{for(var c,l=r.traverseReverse()[Symbol.iterator]();!(t=(c=l.next()).done);t=!0){var f=c.value;if(f.isPickable()){e.clear(o.GL.COLOR_BUFFER_BIT|o.GL.DEPTH_BUFFER_BIT),f.setUniforms({renderPickingBuffer:1,enablePicking:!0}),f.render(n),f.setUniforms({renderPickingBuffer:!1,enablePicking:!1});var h=new Uint8Array(4);e.readPixels(p,v,1,1,e.RGBA,e.UNSIGNED_BYTE,h);var d=0!==h[0]||0!==h[1]||0!==h[2]||0!==h[3];if(d)return{model:f,color:h,x:i,y:s,deviceX:p,deviceY:v}}}}catch(e){a=!0,u=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw u}}return null})}Object.defineProperty(r,"__esModule",{value:!0}),r.pickModels=i;var o=e("../webgl"),a=e("../webgl/webgl-checks"),s=e("./group"),u=n(s),c=e("assert"),l=n(c),f="Illegal argument to pick"},{"../webgl":471,"../webgl/webgl-checks":482,"./group":451,assert:2}],455:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("../core/config"),h=i(f),d=e("../math"),p=e("../utils"),v=e("./group"),_=n(v),g=e("./pick"),y=e("assert"),b=n(y),m="LumaGL.Scene invalid argument",w={lights:{enable:!1,ambient:{r:.2,g:.2,b:.2},directional:{direction:{x:1,y:1,z:1},color:{r:0,g:0,b:0}}},effects:{fog:!1},clearColor:!0,clearDepth:!0,backgroundColor:{r:0,g:0,b:0,a:1},backgroundDepth:1},E=function(e){function t(e,r){a(this,t),(0,b.default)(e,m),r=(0,p.merge)(w,r);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.gl=e,n.config=r,n.needsRedraw=!1,Object.seal(n),n}return u(t,e),l(t,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,r=void 0!==t&&t,n=!1;n=n||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!r;var i=!0,o=!1,a=void 0;try{for(var s,u=this.traverse()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;n=n||c.getNeedsRedraw({clearRedrawFlags:r})}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return n}},{key:"clear",value:function(){var e=this.gl;if(this.config.clearColor){var t=this.config.backgroundColor;e.clearColor(t.r,t.g,t.b,t.a)}return this.config.clearDepth&&e.clearDepth(this.config.backgroundDepth),this.config.clearColor&&this.config.clearDepth?e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT):this.config.clearColor?e.clear(e.COLOR_BUFFER_BIT):this.config.clearDepth&&e.clear(e.DEPTH_BUFFER_BIT),this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clear();var t=!0,r=!1,n=void 0;try{for(var i,o=this.traverse()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.display&&this.renderObject({model:a,uniforms:e})}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}return this}},{key:"renderObject",value:function(e){var t=e.model,r=e.uniforms;return t.render(c({},this.getSceneUniforms(),r)),this}},{key:"pickModels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,r=e.y,n=e.uniforms,i=void 0===n?{}:n,a=o(e,["x","y","uniforms"]);return(0,g.pickModels)(this.gl,c({group:this,x:t,y:r,uniforms:c({},i)},a))}},{key:"getSceneUniforms",value:function(){var e=this.config.lights,t=e.enable,r=e.ambient,n=e.directional,i=e.points;return c({},this.getEffectsUniforms(),{enableLights:t},t&&r?this.getAmbientUniforms(r):{},t&&n?this.getDirectionalUniforms(n):{},t&&i?this.getPointUniforms(i):{})}},{key:"getAmbientUniforms",value:function(e){return{ambientColor:[e.r,e.g,e.b]}}},{key:"getDirectionalUniforms",value:function(e){var t=e.color,r=e.direction,n=new d.Vector3(r.x,r.y,r.z).normalize().scale(-1,-1,-1);return{directionalColor:[t.r,t.g,t.b],lightingDirection:[n.x,n.y,n.z]}}},{key:"getPointUniforms",value:function(e){e=e instanceof Array?e:[e];var t=e.length,r={numberPoints:t},n=[],i=[],o=[],a=[],s=!0,u=!1,c=void 0;try{for(var l,f=e[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=h.position,p=h.color,v=h.diffuse,_=h.specular,g=p||v;n.push(d.x,d.y,d.z),i.push(g.r,g.g,g.b),o.push(Number(Boolean(_))),_?a.push(_.r,_.g,_.b):a.push(0,0,0)}}catch(e){u=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return n.length&&Object.assign(r,{pointLocation:n,pointColor:i,enableSpecular:o,pointSpecularColor:a}),r}},{key:"getEffectsUniforms",value:function(){var e=this.config.effects.fog;if(e){var t=e.color,r=void 0===t?{r:.5,g:.5,b:.5}:t;return{hasFog:!0,fogNear:e.near,fogFar:e.far,fogColor:[r.r,r.g,r.b]}}return{hasFog:!1}}}]),t}(_.default);r.default=E,E.MAX_TEXTURES=h.MAX_TEXTURES,E.MAX_POINT_LIGHTS=h.MAX_POINT_LIGHTS,E.PICKING_RES=h.PICKING_RES},{"../core/config":408,"../math":440,"../utils":459,"./group":451,"./pick":454,assert:2}],456:[function(e,t,r){"use strict";t.exports={hasTexture1:!1,hasTextureCube1:!1,enableLights:!1,useReflection:!1,enablePicking:!1,hasPickingColors:!1,hasFog:!1}},{}],457:[function(e,t,r){"use strict";var n=(e("path"),"#define SHADER_NAME luma-default-vertex\n\n#define LIGHT_MAX 4\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec4 pickingColors;\nattribute vec2 texCoords;\n\n// camera and object matrices\nuniform mat4 viewMatrix;\nuniform mat4 viewInverseMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\n\n// objectMatrix * viewMatrix = worldMatrix\nuniform mat4 worldMatrix;\nuniform mat4 worldInverseMatrix;\nuniform mat4 worldInverseTransposeMatrix;\nuniform mat4 objectMatrix;\nuniform vec3 cameraPosition;\n\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n\n// varyings\nvarying vec3 vReflection;\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec4 vNormal;\nvarying vec3 lightWeighting;\n\nvoid main(void) {\n  vec4 mvPosition = worldMatrix * vec4(positions, 1.0);\n  vec4 transformedNormal = worldInverseTransposeMatrix * vec4(normals, 1.0);\n\n  // lighting code\n  if(!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 plightDirection;\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n    float directionalLightWeighting =\n      max(dot(transformedNormal.xyz, lightingDirection), 0.0);\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        plightDirection = normalize(\n          (viewMatrix * vec4(pointLocation[i], 1.0)).xyz - mvPosition.xyz);\n         pointWeight += max(\n          dot(transformedNormal.xyz, plightDirection), 0.0) * pointColor[i];\n       } else {\n         break;\n       }\n     }\n\n    lightWeighting = ambientColor +\n      (directionalColor * directionalLightWeighting) + pointWeight;\n  }\n\n  // refraction / reflection code\n  if (useReflection) {\n    vReflection =\n      (viewInverseMatrix[3] - (worldMatrix * vec4(positions, 1.0))).xyz;\n  } else {\n    vReflection = vec3(1.0, 1.0, 1.0);\n  }\n\n  // pass results to varyings\n  vColor = colors;\n  vPickingColor = pickingColors;\n  vTexCoord = texCoords;\n  vNormal = transformedNormal;\n  gl_Position = projectionMatrix * worldMatrix * vec4(positions, 1.0);\n}\n"),i="#define SHADER_NAME luma-default-fragment\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// varyings\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec3 lightWeighting;\nvarying vec3 vReflection;\nvarying vec4 vNormal;\n\n// texture configs\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\nuniform bool hasTextureCube1;\nuniform samplerCube samplerCube1;\n\n// picking configs\nuniform bool enablePicking;\nuniform bool hasPickingColors;\nuniform vec3 pickColor;\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n// fog configuration\nuniform bool hasFog;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n\nvoid main(){\n  // set color from texture\n  if (!hasTexture1) {\n    gl_FragColor = vec4(vColor.rgb * lightWeighting, vColor.a);\n  } else {\n    gl_FragColor =\n      vec4(texture2D(sampler1, vec2(vTexCoord.s, vTexCoord.t)).rgb *\n      lightWeighting, 1.0);\n  }\n\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n\n  // set picking\n  if (enablePicking) {\n    if (hasPickingColors) {\n      gl_FragColor = vPickingColor;\n    } else {\n      gl_FragColor = vec4(pickColor, 1.0);\n    }\n  }\n\n  // handle fog\n  // if (hasFog) {\n  //   float depth = gl_FragCoord.z / gl_FragCoord.w;\n  //   float fogFactor = smoothstep(fogNear, fogFar, depth);\n  //   gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n  // }\n}\n",o=e("./default-uniforms");
t.exports={DEFAULT:{vs:n,fs:i,defaultUniforms:o}}},{"./default-uniforms":456,path:505}],458:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.pageLoadPromise=r.isPageLoaded=void 0;var i=e("./is-browser"),o=n(i),a=r.isPageLoaded=!1;r.pageLoadPromise=o.default?new Promise(function(e,t){window.onload=function(){r.isPageLoaded=a=!0,e(document)}}):Promise.resolve({})},{"./is-browser":460}],459:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./is-browser");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./browser-utils");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./promise-utils");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("./utils");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var u=e("./log");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})}),Object.defineProperty(r,"log",{enumerable:!0,get:function(){return n(u).default}})},{"./browser-utils":458,"./is-browser":460,"./log":461,"./promise-utils":462,"./utils":463}],460:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=r.isNode="object"===("undefined"==typeof e?"undefined":t(e))&&"[object process]"===String(e)&&!e.browser,i=r.isBrowser=!n;r.default=i}).call(this,e("_process"))},{_process:528}],461:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=t.maxElts,n=void 0===r?16:r,i=t.size,a=void 0===i?1:i,s="[",u=0;u<e.length&&u<n;++u)u>0&&(s+=","+(u%a===0?" ":"")),s+=o(e[u],t);var c=e.length>n?"...":"]";return""+s+c}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isInteger,n=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return i(e,t);if(!Number.isFinite(e))return String(e);if(n)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var o=e.toPrecision(2),a=o.indexOf(".0");return a===o.length-2?o.slice(0,-1):o}Object.defineProperty(r,"__esModule",{value:!0}),r.formatValue=o;var a=e("../globals"),s=n(a),u={priority:0,table:function(e,t){e<=u.priority&&t&&console.table(t)},log:function(e){if(e<=u.priority){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=console).debug.apply(t,n)}},info:function(e){if(e<=u.priority){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=console).log.apply(t,n)}},warn:function(e){if(e<=u.priority){for(var t,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=console).warn.apply(t,n)}}};s.default.log=u,r.default=u},{"../globals":427}],462:[function(e,t,r){"use strict";function n(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Promise(function(t,n){function i(e,r){try{e?n(e):t(r)}catch(e){n(e)}}e.apply(void 0,r.concat([i]))})}}Object.defineProperty(r,"__esModule",{value:!0}),r.promisify=n},{}],463:[function(e,t,r){"use strict";function n(e){return e?Array.isArray(e)?e:[e]:[]}function i(){}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";u[e]=u[e]||1;var t=u[e]++;return e+"-"+t}function a(e){for(var t={},r=0,n=arguments.length;r<n;r++){var i=arguments[r];if(i&&"Object"===i.constructor.name)for(var o in i){var u=i[o],c=t[o];c&&"Object"===u.constructor.name&&"Object"===c.constructor.name?t[o]=a(c,u):t[o]=s(u)}}return t}function s(e){var t=e.constructor.name,r=void 0;if("Object"===t){r={};for(var n in e)r[n]=s(e[n])}else if("Array"===t){r=[];for(var i=0,o=e.length;i<o;i++)r[i]=s(e[i])}else r=e;return r}Object.defineProperty(r,"__esModule",{value:!0}),r.splat=n,r.noop=i,r.uid=o,r.merge=a;var u={}},{}],464:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./vertex-array-object");Object.defineProperty(r,"VertexArrayObject",{enumerable:!0,get:function(){return n(i).default}})},{"./vertex-array-object":465}],465:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if(e instanceof l.WebGL2RenderingContext)return e.createVertexArray();var t=e.getExtension(p);return t?t.createVertexArrayOES():null}function a(e,t){e instanceof l.WebGL2RenderingContext&&e.deleteVertexArray(t);var r=e.getExtension(p);r&&r.deleteVertexArrayOES(t)}function s(e,t){if(e instanceof l.WebGL2RenderingContext)return e.isVertexArray(t);var r=e.getExtension(p);return!!r&&r.isVertexArrayOES(t)}function u(e,t){e instanceof l.WebGL2RenderingContext&&e.bindVertexArray(t);var r=e.getExtension(p);r&&r.bindVertexArrayOES(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r.isVertexArray=s;var l=e("../webgl/webgl-types"),f=e("../webgl/webgl-checks"),h=e("assert"),d=n(h),p="OES_vertex_array_object",v=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.handle;if(i(this,e),(0,f.assertWebGLContext)(t),(0,d.default)(e.isSupported(t),"VertexArrayObject: WebGL2 or OES_vertex_array_object required"),n=n||o(t),!n)throw new Error("Could not create VertexArrayObject");this.gl=t,this.handle=n,this.userData={},Object.seal(this)}return c(e,null,[{key:"isSupported",value:function(e){return(0,f.assertWebGLContext)(e),e instanceof l.WebGL2RenderingContext||e.getExtension("OES_vertex_array_object")}},{key:"wrap",value:function(t,r){return r instanceof e?r:new e(t,{handle:r.handle||r})}}]),c(e,[{key:"delete",value:function(){return a(this.gl,this.handle),this}},{key:"bind",value:function(){return u(this.gl,this.handle),this}},{key:"unbind",value:function(){return u(this.gl,null),this}}]),e}();r.default=v},{"../webgl/webgl-checks":482,"../webgl/webgl-types":485,assert:2}],466:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BufferLayout=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./webgl"),s=e("./webgl-checks"),u=e("assert"),c=n(u),l=r.BufferLayout=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,n=t.size,o=void 0===n?1:n,a=t.offset,s=void 0===a?0:a,u=t.stride,c=void 0===u?0:u,l=t.normalized,f=void 0!==l&&l,h=t.integer,d=void 0!==h&&h,p=t.instanced,v=void 0===p?0:p;i(this,e),this.type=r,this.size=o,this.offset=s,this.stride=c,this.normalized=f,this.integer=d,this.instanced=v},f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.id,o=r.handle;if(i(this,e),(0,s.assertWebGLContext)(t),o=o||t.createBuffer(),!(o instanceof a.WebGLBuffer))throw new Error("Failed to create WebGLBuffer");this.gl=t,this.handle=o,this.id=n,this.bytes=void 0,this.data=null,this.target=a.GL.ARRAY_BUFFER,this.layout=null,this.userData={},Object.seal(this)}return o(e,null,[{key:"makeFrom",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r instanceof e?r:new e(t).setData({handle:r.handle||r})}}]),o(e,[{key:"delete",value:function(){var e=this.gl;return this.handle&&(e.deleteBuffer(this.handle),this.handle=null),this}},{key:"setData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.bytes,n=e.target,i=void 0===n?a.GL.ARRAY_BUFFER:n,o=e.usage,u=void 0===o?a.GL.STATIC_DRAW:o,f=e.layout,h=e.type,d=e.size,p=void 0===d?1:d,v=e.offset,_=void 0===v?0:v,g=e.stride,y=void 0===g?0:g,b=e.normalized,m=void 0!==b&&b,w=e.integer,E=void 0!==w&&w,x=e.instanced,T=void 0===x?0:x,O=this.gl;return(0,c.default)(t||r>=0,"Buffer.setData needs data or bytes"),h=h||(0,a.glTypeFromArray)(t),t&&(0,s.assertArrayTypeMatch)(t,h,"in Buffer.setData"),this.bytes=r,this.data=t,this.target=i,this.layout=f||new l({type:h,size:p,offset:_,stride:y,normalized:m,integer:E,instanced:T}),this.bind({target:i}),O.bufferData(i,t||r,u),this.unbind({target:i}),this}},{key:"subData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=e.offset,n=void 0===r?0:r,i=this.gl;return(0,c.default)(t,"Buffer.updateData needs data"),this.bind({target:a.GL.ARRAY_BUFFER}),i.bufferSubData(a.GL.ARRAY_BUFFER,n,t),this.unbind({target:a.GL.ARRAY_BUFFER}),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t;return this.gl.bindBuffer(r,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;void 0===t?this.target:t;return this}},{key:"bindBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(r,n,this.handle),this}},{key:"unbindBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(r,n,null),this}},{key:"bindRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index,i=e.offset,o=void 0===i?0:i,a=e.size;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferRange(r,n,this.handle,o,a),this}},{key:"unbindRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?this.target:t,n=e.index;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(r,n,null),this}}]),e}();r.default=f},{"./webgl":486,"./webgl-checks":482,assert:2}],467:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas,r=e.width,n=void 0===r?800:r,a=e.height,c=void 0===a?600:a,l=e.webgl2,f=void 0!==l&&l,h=e.debug,p=void 0===h||h,g=o(e,["canvas","width","height","webgl2","debug"]),y=void 0;if(T.isBrowser){if(!m.webGLTypesAvailable)throw new Error(R);if(t=t,"string"==typeof t){if(!T.isPageLoaded)throw new Error("createGLContext called on canvas '"+t+"' before page was loaded");t=document.getElementById(t)}t||(t=s()),t.addEventListener("webglcontextcreationerror",function(e){T.log.log(0,e.statusMessage||"Unknown error")},!1),f&&(y=t.getContext("webgl2",g),y=y||t.getContext("experimental-webgl2",g)),y=y||t.getContext("webgl",g),y=y||t.getContext("experimental-webgl",g),(0,I.default)(y,"Failed to create WebGLRenderingContext")}else y=u(n,c,g);if(T.isBrowser&&p){var w=b.default.makeDebugContext(y,v,_),E=function e(){i(this,e)};Object.assign(E.prototype,w),y=w,y.debug=!0,T.log.priority=T.log.priority<1?1:T.log.priority,d(y),T.log.log(0,j)}return y}function s(){var e=document.createElement("canvas");return e.id="lumagl-canvas",e.style.width="100%",e.style.height="100%",T.pageLoadPromise.then(function(t){var r=t.body;r.insertBefore(e,r.firstChild)}),e}function u(e,t,r){if(!m.webGLTypesAvailable)throw new Error(M);if(!A.default.globals.headlessGL)throw new Error(k);var n=A.default.globals.headlessGL(e,t,r);if(!n)throw new Error(P);return n}function c(e,t){var r="Illegal arg to getExtension";(0,I.default)(e instanceof m.WebGLRenderingContext,r),(0,I.default)("string"==typeof t,r);var n=e.getExtension(t);return(0,I.default)(n,t+" not supported!"),n}function l(e){(0,w.assertWebGLContext)(e),x.default.poll(e)}function f(e,t,r){var n=t.scissorTest,i=t.framebuffer,o=void 0;if(n){o=e.isEnabled(e.SCISSOR_TEST);var a=n.x,s=n.y,u=n.w,c=n.h;e.enable(e.SCISSOR_TEST),e.scissor(a,s,u,c)}i&&i.bind();var l=void 0;try{l=r(e)}finally{o||e.disable(e.SCISSOR_TEST),i&&e.bindFramebuffer(e.FRAMEBUFFER,null)}return l}function h(e){var t=e.getExtension("WEBGL_debug_renderer_info");return{vendor:t&&t.UNMASKED_VENDOR_WEBGL?e.getParameter(t.UNMASKED_VENDOR_WEBGL):"unknown",renderer:t&&t.UNMASKED_RENDERER_WEBGL?e.getParameter(t.UNMASKED_RENDERER_WEBGL):"unknown"}}function d(e){var t=(0,w.isWebGL2Context)(e)?"WebGL2":"WebGL1",r=h(e),n=r?"using driver: "+r.vendor+" "+r.renderer:"",i=e.debug?"debug":"";T.log.log(0,"luma.gl "+A.default.VERSION+": "+t+" "+i+" context "+n,e)}function p(e,t){var r=b.default.glFunctionArgsToString(e,t);return r=""+r.slice(0,100)+(r.length>100?"...":""),"gl."+e+"("+r+")"}function v(e,t,r){var n=b.default.glEnumToString(e),i=b.default.glFunctionArgsToString(t,r);throw new Error(n+" was caused by call to: "+("gl."+t+"("+i+")"))}function _(e,t){var r=void 0;T.log.priority>=4&&(r=p(e,t),T.log.info(4,""+r));var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;if(void 0===u)throw r=r||p(e,t),new Error("Undefined argument: "+r)}}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}if(T.log.break){r=r||p(e,t);T.log.break&&T.log.break.every(function(e){return r.indexOf(e)!==-1})}}function g(e,t){return T.log.warn(0,"luma.gl: getExtension is deprecated"),c(e,t)}Object.defineProperty(r,"__esModule",{value:!0}),r.createGLContext=a,r.getGLExtension=c,r.poll=l,r.glContextWithState=f,r.glGetDebugInfo=h,r.getExtension=g;var y=e("webgl-debug"),b=n(y),m=e("./webgl-types"),w=e("./webgl-checks"),E=e("./helpers/query-manager"),x=n(E),T=e("../utils"),O=e("../globals"),A=n(O),S=e("assert"),I=n(S),R="WebGL API is missing. Check your if your browser supports WebGL or\ninstall a recent version of a major browser.",M="WebGL API is missing. To run luma.gl under Node.js, please \"npm install gl\"\nand import 'luma.gl/headless' before importing 'luma.gl'.",k="Cannot create headless WebGL context, headlessGL not available",P="headlessGL failed to create headless WebGL context",j="Assign luma.log.priority in console to control logging: 0: none, 1: minimal, 2: verbose, 3: attribute/uniforms, 4: gl logs\nluma.log.break[], set to gl funcs, luma.log.profile[] set to model names"},{"../globals":427,"../utils":459,"./helpers/query-manager":470,"./webgl-checks":482,"./webgl-types":485,assert:2,"webgl-debug":552}],468:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=t.drawMode,n=void 0===r?o.GL.TRIANGLES:r,i=t.vertexCount,s=t.offset,u=void 0===s?0:s,c=t.isIndexed,l=void 0!==c&&c,f=t.indexType,h=void 0===f?o.GL.UNSIGNED_SHORT:f,d=t.isInstanced,p=void 0!==d&&d,v=t.instanceCount,_=void 0===v?0:v;if((0,a.assertWebGLContext)(e),n=(0,o.glGet)(n),h=(0,o.glGet)(h),(0,a.assertDrawMode)(n,"in draw"),l&&(0,a.assertIndexType)(h,"in draw"),p){var g=e.getExtension("ANGLE_instanced_arrays");l?g.drawElementsInstancedANGLE(n,i,h,u,_):g.drawArraysInstancedANGLE(n,u,i,_)}else l?e.drawElements(n,i,h,u):e.drawArrays(n,u,i)}Object.defineProperty(r,"__esModule",{value:!0}),r.draw=i;var o=(e("./context"),e("./webgl")),a=e("./webgl-checks"),s=e("assert");n(s)},{"./context":467,"./webgl":486,"./webgl-checks":482,assert:2}],469:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){switch(e){case u.GL.ALPHA:return 1;case u.GL.RGB:return 3;case u.GL.RGBA:return 4;default:throw new Error("Unknown format")}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./webgl"),c=e("./webgl-checks"),l=e("./texture-2d"),f=n(l),h=e("./renderbuffer"),d=n(h),p=e("assert"),v=n(p),_=e("../utils"),g=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.id,a=i(r,["id"]);o(this,e),(0,c.assertWebGLContext)(t);var s=t.createFramebuffer();if(!s)throw new Error("Failed to create WebGL Framebuffer");this.gl=t,this.id=(0,_.uid)(n),this.handle=s,this.colorBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.texture=null,this.userData={},this.width=0,this.height=0,Object.seal(this),this.resize(a)}return s(e,null,[{key:"makeFrom",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r instanceof e?r:new e(t,{handle:r.handle||r})}}]),s(e,[{key:"delete",value:function(){var e=this.gl;e.deleteFramebuffer(this.handle)}},{key:"resize",value:function(e){var t=e.width,r=e.height;this.update({width:t,height:r})}},{key:"update",value:function(e){var t=e.width,r=void 0===t?1:t,n=e.height,i=void 0===n?1:n,o=e.depth,a=void 0===o||o,s=e.minFilter,c=(void 0===s?u.GL.NEAREST:s,e.magFilter),l=(void 0===c?u.GL.NEAREST:c,e.format),h=void 0===l?u.GL.RGBA:l,p=e.type,g=void 0===p?u.GL.UNSIGNED_BYTE:p;if((0,v.default)(r>=0&&i>=0,"Width and height need to be integers"),r!==this.width||i!==this.height){_.log.log(1,"Resizing framebuffer "+this.id+" to "+r+"x"+i);var y=this.gl,b=new f.default(y,{minFilter:this.minFilter,magFilter:this.magFilter}).setImageData({data:null,width:r,height:i,type:g,format:h});if(this.attachTexture({attachment:u.GL.COLOR_ATTACHMENT0,texture:b}),this.colorBuffer&&this.colorBuffer.delete(),this.colorBuffer=b,this.texture=b,a){var m=new d.default(y).storage({internalFormat:u.GL.DEPTH_COMPONENT16,width:r,height:i});this.attachRenderbuffer({attachment:u.GL.DEPTH_ATTACHMENT,renderbuffer:m}),this.depthBuffer&&this.depthBuffer.delete(),this.depthBuffer=m}this.checkStatus(),this.width=r,this.height=i}}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?u.GL.FRAMEBUFFER:t,n=this.gl;return n.bindFramebuffer(r,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?u.GL.FRAMEBUFFER:t,n=this.gl;return n.bindFramebuffer(r,null),this}},{key:"readPixels",value:function(e){var t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,o=e.width,s=e.height,c=e.format,l=void 0===c?u.GL.RGBA:c,f=e.type,h=e.pixelArray,d=void 0===h?null:h,p=this.gl;if(!d){f=f||u.GL.UNSIGNED_BYTE;var v=(0,u.glTypeToArray)(f),_=a(l);d=d||new v(o*s*_)}return f=f||(0,u.glTypeFromArray)(d),this.bind(),p.readPixels(r,i,o,s,l,f,d),this.unbind(),d}},{key:"attachTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.texture,r=void 0===t?null:t,n=e.target,i=void 0===n?u.GL.FRAMEBUFFER:n,o=e.attachment,a=void 0===o?u.GL.COLOR_ATTACHMENT0:o,s=e.textureTarget,c=void 0===s?u.GL.TEXTURE_2D:s,l=e.mipmapLevel,h=void 0===l?0:l,d=this.gl;return r=r&&f.default.makeFrom(d,r),this.bind({target:i}),d.framebufferTexture2D(i,(0,u.glGet)(a),(0,u.glGet)(c),r.handle,h),this.unbind(),this}},{key:"attachRenderbuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderbuffer,r=void 0===t?null:t,n=e.attachment,i=void 0===n?u.GL.COLOR_ATTACHMENT0:n,o=e.target,a=void 0===o?u.GL.FRAMEBUFFER:o,s=e.renderbufferTarget,c=void 0===s?u.GL.RENDERBUFFER:s,l=this.gl;return r=r&&d.default.makeFrom(l,r),this.bind({target:a}),l.framebufferRenderbuffer(a,(0,u.glGet)(i),(0,u.glGet)(c),r.handle),this.unbind({target:a}),this}},{key:"checkStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?u.GL.FRAMEBUFFER:t,n=this.gl;this.bind({target:r});var i=n.checkFramebufferStatus(r);if(this.unbind({target:r}),i!==n.FRAMEBUFFER_COMPLETE)throw new Error(this._getFrameBufferStatus(i));return this}},{key:"blit",value:function(e){var t=e.srcX0,r=e.srcY0,n=e.srcX1,i=e.srcY1,o=e.dstX0,a=e.dstY0,s=e.dstX1,l=e.dstY1,f=e.mask,h=e.filter,d=void 0===h?u.GL.NEAREST:h,p=this.gl;return(0,c.assertWebGL2)(p),p.blitFramebuffer(t,r,n,i,o,a,s,l,f,d),this}},{key:"textureLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,r=void 0===t?u.GL.FRAMEBUFFER:t,n=e.attachment,i=e.texture,o=e.level,a=e.layer,s=this.gl;return(0,c.assertWebGL2)(s),s.framebufferTextureLayer(r,n,i,o,a),this}},{key:"invalidate",value:function(e){var t=e.target,r=void 0===t?u.GL.FRAMEBUFFER:t,n=e.attachments,i=void 0===n?[]:n,o=this.gl;return(0,c.assertWebGL2)(o),o.invalidateFramebuffer(r,i),this}},{key:"invalidateSub",value:function(e){var t=e.target,r=void 0===t?u.GL.FRAMEBUFFER:t,n=e.attachments,i=void 0===n?[]:n,o=e.x,a=void 0===o?0:o,s=e.y,l=void 0===s?0:s,f=e.width,h=e.height,d=this.gl;return(0,c.assertWebGL2)(d),d.invalidateFramebuffer(r,i,a,l,f,h),this}},{key:"readBuffer",value:function(e){var t=e.src,r=this.gl;return(0,c.assertWebGL2)(r),r.readBuffer(t),this}},{key:"alphaSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE)}},{key:"blueSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE)}},{key:"colorEncoding",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING)}},{key:"componentType",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE)}},{key:"depthSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE)}},{key:"greenSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE)}},{key:"objectName",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME)}},{key:"objectType",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE)}},{key:"redSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_RED_SIZE)}},{key:"stencilSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE)}},{key:"cubeMapFace",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE)}},{key:"layer",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER)}},{key:"level",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}},{key:"getParameters",value:function(){return{redSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_RED_SIZE),greenSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE),blueSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE),alphaSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE),depthSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE),stencilSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE),colorEncoding:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING),componentType:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE),objectName:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),objectType:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE),cubeMapFace:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE),layer:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER),level:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}}},{key:"getAttachmentParameter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pname,r=e.target,n=e.attachment,i=this.gl;(0,c.assertWebGL2)(i);var o=i.getFramebufferAttachmentParameter(r,n,t);return o}},{key:"_getFrameBufferStatus",value:function(e){var t=void 0;switch(e){case u.GL.FRAMEBUFFER_COMPLETE:t="Success. Framebuffer is correctly set up";break;case u.GL.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:t="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case u.GL.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:t="There is no attachment.";break;case u.GL.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:t="Height and width of the attachment are not the same.";break;case u.GL.FRAMEBUFFER_UNSUPPORTED:t="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.";break;case u.GL.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:t="The values of GL.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are non-zero if the attached images are a mix of renderbuffers and textures.";break;default:t="Framebuffer error "+e}return t}}]),e}();r.default=g},{"../utils":459,"./renderbuffer":473,"./texture-2d":475,"./webgl":486,"./webgl-checks":482,assert:2}],470:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o="Query was deleted before result was available",a="Query was canceled before result was available",s=function(e){return e},u=function(){function e(){n(this,e),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return i(e,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var t=!0,r=!1,n=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,s=a.isResultAvailable();if(s){var u=a.getResult();this.resolveQuery(a,u)}}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}},{key:"setInvalidator",value:function(e){var t=e.queryType,r=e.errorMessage,n=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=r,this.checkInvalid=n}},{key:"beginQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var n={};return e.promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),Object.assign(e.promise,n),this.pendingQueries.add(e),e.promise.then(t).catch(r)}},{key:"resolveQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,o)}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,a)}},{key:"invalidateQuery",value:function(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var t=!0,r=!1,n=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.invalidateQuery(a)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}}]),e}();r.default=new u},{}],471:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.TimerQuery=r.VertexAttributes=r.TextureCube=r.Texture2D=r.Renderbuffer=r.Framebuffer=r.Program=r.FragmentShader=r.VertexShader=r.Shader=r.Buffer=void 0;var o=e("./webgl");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./buffer");Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return i(a).default}});var s=e("./shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return i(s).default}}),Object.defineProperty(r,"VertexShader",{enumerable:!0,get:function(){return s.VertexShader}}),Object.defineProperty(r,"FragmentShader",{enumerable:!0,get:function(){return s.FragmentShader}});var u=e("./program");Object.defineProperty(r,"Program",{enumerable:!0,get:function(){return i(u).default}});var c=e("./framebuffer");Object.defineProperty(r,"Framebuffer",{enumerable:!0,get:function(){return i(c).default}});var l=e("./renderbuffer");Object.defineProperty(r,"Renderbuffer",{enumerable:!0,get:function(){return i(l).default}});var f=e("./texture-2d");Object.defineProperty(r,"Texture2D",{enumerable:!0,get:function(){return i(f).default}});var h=e("./texture-cube");Object.defineProperty(r,"TextureCube",{enumerable:!0,get:function(){return i(h).default}});var d=e("./timer-query");Object.defineProperty(r,"TimerQuery",{enumerable:!0,get:function(){return i(d).default}});var p=e("./context");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})});var v=e("./draw");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return v[e]}})});var _=e("./uniforms");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return _[e]}})});var g=e("./vertex-attributes"),y=n(g);r.VertexAttributes=y},{"./buffer":466,"./context":467,"./draw":468,"./framebuffer":469,"./program":472,"./renderbuffer":473,"./shader":474,"./texture-2d":475,"./texture-cube":476,"./timer-query":478,"./uniforms":479,"./vertex-attributes":480,"./webgl":486}],472:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r={},n=t.getUniformCount(),i=0;i<n;i++){var o=t.getUniformInfo(i),a=t.getUniformLocation(o.name),s=(0,_.getUniformSetter)(e,a,o);r[s.name]=s}return r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r.getUniformDescriptors=a;var u=e("./webgl"),c=e("./webgl-checks"),l=e("./vertex-attributes"),f=i(l),h=e("./buffer"),d=n(h),p=e("./texture"),v=n(p),_=e("./uniforms"),g=e("./shader"),y=e("../shaderlib"),b=n(y),m=e("../utils"),w=e("assert"),E=n(w),x=function(){
function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.id,i=r.vs,a=void 0===i?b.default.DEFAULT.vs:i,s=r.fs,u=void 0===s?b.default.DEFAULT.fs:s,l=r.defaultUniforms,f=r.handle;o(this,e),(0,c.assertWebGLContext)(t),(a===b.default.DEFAULT.vs||u===b.default.DEFAULT.fs&&void 0===l)&&(l=b.default.DEFAULT.defaultUniforms),this.vs="string"==typeof a?new g.VertexShader(t,a):a,this.fs="string"==typeof a?new g.FragmentShader(t,u):u,(0,E.default)(this.vs instanceof g.VertexShader,"Program: bad vertex shader"),(0,E.default)(this.fs instanceof g.FragmentShader,"Program: bad fragment shader");var h=this.vs.getName()||this.fs.getName();if(h=h?h+"-program":"program",this.id=n||(0,m.uid)(h),this.gl=t,this.defaultUniforms=l,this.handle=f,this.handle||(this.handle=t.createProgram(),this._compileAndLink()),!this.handle)throw new Error("Failed to create program");this._attributeLocations=this._getAttributeLocations(),this._attributeCount=this.getAttributeCount(),this._warn=[],this._filledLocations={},this._uniformSetters=this._getUniformSetters(),this._uniformCount=this.getUniformCount(),this._textureIndexCounter=0,this.userData={},Object.seal(this)}return s(e,null,[{key:"makeFrom",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r instanceof e?r:new e(t).setData({handle:r.handle||r})}}]),s(e,[{key:"delete",value:function(){var e=this.gl;return this.handle&&e.deleteProgram(this.handle),this.handle=null,this}},{key:"use",value:function(){var e=this.gl;return e.useProgram(this.handle),this}},{key:"clearBuffers",value:function(){return this._filledLocations={},this}},{key:"_print",value:function(e){return"Program "+this.id+": Attribute "+e}},{key:"setBuffers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.clear,n=void 0===r||r,i=t.check,o=void 0===i||i,a=t.drawParams,s=void 0===a?{}:a,u=this.gl;if(Array.isArray(e))throw new Error("Program.setBuffers expects map of buffers");n&&this.clearBuffers(),s.isInstanced=!1,s.isIndexed=!1,s.indexType=null;for(var c=this._sortBuffersByLocation(e),l=c.locations,h=c.elements,d=0;d<l.length;++d){var p=l[d],v=e[p];if(v){var _=v.layout.instanced?1:0;f.enable(u,d),f.setBuffer({gl:u,location:d,buffer:v}),f.setDivisor(u,d,_),s.isInstanced=v.layout.instanced>0,this._filledLocations[p]=!0}else f.disable(u,d)}if(h){var g=e[h];g.bind(),s.isIndexed=!0,s.indexType=g.layout.type}return o&&this.checkBuffers(),this}},{key:"checkBuffers",value:function(){for(var e in this._attributeLocations)if(!this._filledLocations[e]&&!this._warn[e]){var t=this._attributeLocations[e];m.log.warn(0,"Program "+this.id+": "+("Attribute "+t+":"+e+" not supplied")),this._warn[e]=!0}return this}},{key:"unsetBuffers",value:function(){for(var e=this.gl,t=this._attributeCount,r=1;r<t;++r)f.disable(e,r);return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this}},{key:"setUniforms",value:function(e){for(var t in e){var r=e[t],n=this._uniformSetters[t];if(n)if(r instanceof v.default){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);var i=r,o=n.textureIndex;i.bind(o),n(o)}else n(r)}return this}},{key:"getAttachedShadersCount",value:function(){return this.getProgramParameter(u.GL.ATTACHED_SHADERS)}},{key:"getAttributeCount",value:function(){return this.getProgramParameter(u.GL.ACTIVE_ATTRIBUTES)}},{key:"getAttributeInfo",value:function(e){return this.gl.getActiveAttrib(this.handle,e)}},{key:"getAttributeName",value:function(e){return this.getAttributeInfo(e).name}},{key:"getAttributeLocation",value:function(e){return this.gl.getAttribLocation(this.handle,e)}},{key:"getUniformCount",value:function(){return this.getProgramParameter(u.GL.ACTIVE_UNIFORMS)}},{key:"getUniformInfo",value:function(e){return this.gl.getActiveUniform(this.handle,e)}},{key:"getUniformLocation",value:function(e){return this.gl.getUniformLocation(this.handle,e)}},{key:"getUniformValue",value:function(e){return this.gl.getUniform(this.handle,e)}},{key:"isFlaggedForDeletion",value:function(){return this.getProgramParameter(u.GL.DELETE_STATUS)}},{key:"getLastLinkStatus",value:function(){return this.getProgramParameter(u.GL.LINK_STATUS)}},{key:"getLastValidationStatus",value:function(){return this.getProgramParameter(u.GL.VALIDATE_STATUS)}},{key:"getTransformFeedbackBufferMode",value:function(){return(0,c.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_BUFFER_MODE)}},{key:"getTransformFeedbackVaryingsCount",value:function(){return(0,c.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_VARYINGS)}},{key:"getActiveUniformBlocksCount",value:function(){return(0,c.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.ACTIVE_UNIFORM_BLOCKS)}},{key:"getFragDataLocation",value:function(e){return(0,c.assertWebGL2Context)(this.gl),this.gl.getFragDataLocation(this.handle,e)}},{key:"getProgramParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_compileAndLink",value:function(){var e=this.gl;e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),e.linkProgram(this.handle),e.validateProgram(this.handle);var t=e.getProgramParameter(this.handle,e.LINK_STATUS);if(!t)throw new Error("Error linking "+e.getProgramInfoLog(this.handle))}},{key:"_sortBuffersByLocation",value:function(e){var t=null,r=new Array(this._attributeCount);for(var n in e){var i=d.default.makeFrom(this.gl,e[n]),o=this._attributeLocations[n];if(void 0===o){if(i.target===u.GL.ELEMENT_ARRAY_BUFFER&&t)throw new Error(this._print(n)+" duplicate gl.ELEMENT_ARRAY_BUFFER");i.target===u.GL.ELEMENT_ARRAY_BUFFER?t=n:this._warn[n]||(m.log.warn(2,this._print(n)+" not used"),this._warn[n]=!0)}else{if(i.target===u.GL.ELEMENT_ARRAY_BUFFER)throw new Error(this._print(n)+":"+o+" has both location and type gl.ELEMENT_ARRAY_BUFFER");r[o]=n}}return{locations:r,elements:t}}},{key:"_areAllAttributesEnabled",value:function(){for(var e=this.gl,t=this._attributeCount,r=0;r<t;++r)if(!f.isEnabled(e,r))return!1;return!0}},{key:"_getAttributeLocations",value:function(){for(var e={},t=this.getAttributeCount(),r=0;r<t;r++){var n=this.getAttributeName(r);e[n]=this.getAttributeLocation(n)}return e}},{key:"_getUniformSetters",value:function(){for(var e=this.gl,t={},r=this.getUniformCount(),n=0;n<r;n++){var i=this.getUniformInfo(n),o=(0,_.parseUniformName)(i.name),a=this.getUniformLocation(o.name);t[o.name]=(0,_.getUniformSetter)(e,a,i,o.isArray)}return t}}]),e}();r.default=x},{"../shaderlib":457,"../utils":459,"./buffer":466,"./shader":474,"./texture":477,"./uniforms":479,"./vertex-attributes":480,"./webgl":486,"./webgl-checks":482,assert:2}],473:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./webgl"),s=n(a),u=e("./webgl-checks"),c=e("assert"),l=n(c),f=function(){function e(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,e),(0,u.assertWebGLContext)(t),this.gl=t,this.handle=t.createRenderbuffer(),!this.handle)throw new Error("Failed to create WebGL Renderbuffer")}return o(e,null,[{key:"makeFrom",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r instanceof e?r:new e(t,{handle:r.handle||r})}}]),o(e,[{key:"delete",value:function(){return this.gl.deleteRenderbuffer(this.handle),this}},{key:"bind",value:function(){return this.gl.bindRenderbuffer(s.default.RENDERBUFFER,this.handle),this}},{key:"unbind",value:function(){return this.gl.bindRenderbuffer(s.default.RENDERBUFFER,null),this}},{key:"storage",value:function(e){var t=e.internalFormat,r=e.width,n=e.height,i=this.gl;return(0,l.default)(t,"Needs internalFormat"),this.bind(),i.renderbufferStorage(s.default.RENDERBUFFER,(0,a.glGet)(t),r,n),this.unbind(),this}},{key:"getParameter",value:function(e){var t=this.gl;this.bind();var r=t.getRenderbufferParameter(s.default.RENDERBUFFER,(0,a.glGet)(e));return this.unbind(),r}},{key:"storageMultisample",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.samples,r=e.internalformat,n=e.width,i=e.height,o=this.gl;return(0,u.assertWebGL2Context)(o),o.renderbufferStorageMultisample(s.default.RENDERBUFFER,t,r,n,i),this}},{key:"getInternalformatParameter",value:function(e){var t=e.internalformat,r=e.pname,n=void 0===r?"SAMPLES":r,i=this.gl;return(0,u.assertWebGL2Context)(i),i.getInternalformatParameter(s.default.RENDERBUFFER,t,n)}},{key:"width",get:function(){return this.getParameter(s.default.RENDERBUFFER_WIDTH)}},{key:"height",get:function(){return this.getParameter(s.default.RENDERBUFFER_HEIGHT)}},{key:"internalFormat",get:function(){return this.getParameter(s.default.RENDERBUFFER_INTERNAL_FORMAT)}},{key:"greenSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_GREEN_SIZE)}},{key:"blueSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_BLUE_SIZE)}},{key:"redSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_RED_SIZE)}},{key:"alphaSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_ALPHA_SIZE)}},{key:"depthSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_DEPTH_SIZE)}},{key:"stencilSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_STENCIL_SIZE)}},{key:"samples",get:function(){return this.getParameter(this.gl.RENDERBUFFER_SAMPLES)}}]),e}();r.default=f},{"./webgl":486,"./webgl-checks":482,assert:2}],474:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.FragmentShader=r.VertexShader=r.Shader=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./webgl"),c=e("./webgl-checks"),l=e("./webgl-format-glsl-error"),f=e("../utils"),h=e("assert"),d=n(h),p="Shader: GLSL source code must be a JavaScript string",v=r.Shader=function(){function e(t,r,n){if(a(this,e),(0,c.assertWebGLContext)(t),(0,d.default)("string"==typeof r,p),this.id=(0,l.getShaderName)(r)||(0,f.uid)(this.getTypeName(n)),this.gl=t,this.shaderType=n,this.source=r,this.handle=t.createShader(n),null===this.handle)throw new Error("Error creating shader with type "+n);this.compile()}return s(e,[{key:"delete",value:function(){var e=this.gl;this.handle&&(e.deleteShader(this.handle),this.handle=null)}},{key:"toString",value:function(){return this.getTypeName(this.shaderType)+":"+this.id}},{key:"getName",value:function(){return(0,l.getShaderName)(this.source)}},{key:"getTypeName",value:function(e){switch(e){case u.GL.VERTEX_SHADER:return"vertex-shader";case u.GL.FRAGMENT_SHADER:return"fragment-shader";default:return"shader"}}},{key:"compile",value:function(){var e=this.gl;e.shaderSource(this.handle,this.source),e.compileShader(this.handle);var t=e.getShaderParameter(this.handle,u.GL.COMPILE_STATUS);if(!t){var r=e.getShaderInfoLog(this.handle),n=(0,l.formatCompilerError)(r,this.source,this.shaderType);throw f.log.priority>0&&this.copyToClipboard(this.source),this.delete(),new Error("Error while compiling the shader "+n)}}},{key:"copyToClipboard",value:function(e){if(f.isBrowser){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("copy")||console.log("Failed to copy to clipboard"),t.remove()}}}]),e}();r.VertexShader=function(e){function t(e,r){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,u.GL.VERTEX_SHADER))}return o(t,e),t}(v),r.FragmentShader=function(e){function t(e,r){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,u.GL.FRAGMENT_SHADER))}return o(t,e),t}(v)},{"../utils":459,"./webgl":486,"./webgl-checks":482,"./webgl-format-glsl-error":484,assert:2}],475:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),f=e("./webgl"),h=e("./webgl-checks"),d=e("./texture"),p=n(d),v=e("./buffer"),_=n(v),g=e("./framebuffer"),y=n(g),b=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,h.assertWebGLContext)(e);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({},r,{target:e.TEXTURE_2D})));return n.width=null,n.height=null,Object.seal(n),n.setImageData(r),r.generateMipmap&&n.generateMipmap(),n}return s(t,e),l(t,null,[{key:"makeFrom",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r instanceof t?r:new t(e,{handle:r.handle||r})}},{key:"makeFromSolidColor",value:function(e,r){var n=c(r,4),i=n[0],o=void 0===i?0:i,a=n[1],s=void 0===a?0:a,u=n[2],l=void 0===u?0:u,f=n[3],h=void 0===f?1:f;return new t(e,{pixels:new Uint8Array([o,s,l,h]),width:1,format:e.RGBA,magFilter:e.NEAREST,minFilter:e.NEAREST})}},{key:"makeFromPixelArray",value:function(e,r){var n=r.dataArray,o=(r.format,r.width,r.height,i(r,["dataArray","format","width","height"])),a=new Uint8Array(n);return new t(e,u({pixels:a,width:1,format:e.RGBA},o))}}]),l(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(t.TEXTURE0+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(e.TEXTURE0+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(f.GL.ACTIVE_TEXTURE)-f.GL.TEXTURE0}},{key:"setPixels",value:function(e){var t=e.buffer,r=(e.offset,e.width),n=void 0===r?null:r,o=e.height,a=void 0===o?null:o,s=e.mipmapLevel,u=void 0===s?0:s,c=e.internalFormat,l=(void 0===c?f.GL.RGBA:c,e.format),h=void 0===l?f.GL.RGBA:l,d=e.type,p=void 0===d?f.GL.UNSIGNED_BYTE:d,v=e.border,g=void 0===v?0:v,y=(i(e,["buffer","offset","width","height","mipmapLevel","internalFormat","format","type","border"]),this.gl);return t=_.default.makeFrom(t),y.bindBuffer(f.GL.PIXEL_UNPACK_BUFFER,t.target),this.bind(),y.texImage2D(y.TEXTURE_2D,u,h,n,a,g,h,p,t.target),this.unbind(),y.bindBuffer(f.GL.GL_PIXEL_UNPACK_BUFFER,null),this}},{key:"setImageDataFromCompressedBuffer",value:function(e){var t=e.buffer,r=(e.offset,e.width),n=void 0===r?null:r,o=e.height,a=void 0===o?null:o,s=e.mipmapLevel,u=void 0===s?0:s,c=e.internalFormat,l=void 0===c?f.GL.RGBA:c,h=e.format,d=(void 0===h?f.GL.RGBA:h,e.type),p=(void 0===d?f.GL.UNSIGNED_BYTE:d,e.border),v=void 0===p?0:p,_=(i(e,["buffer","offset","width","height","mipmapLevel","internalFormat","format","type","border"]),this.gl);return _.compressedTexImage2D(this.target,u,l,n,a,v,t),this}},{key:"copyImageFromFramebuffer",value:function(e){var t=e.framebuffer,r=(e.offset,e.x),n=e.y,o=e.width,a=e.height,s=e.mipmapLevel,u=void 0===s?0:s,c=e.internalFormat,l=void 0===c?f.GL.RGBA:c,h=e.type,d=(void 0===h?f.GL.UNSIGNED_BYTE:h,e.border),p=void 0===d?0:d,v=(i(e,["framebuffer","offset","x","y","width","height","mipmapLevel","internalFormat","type","border"]),this.gl);t=y.default.makeFrom(t),t.bind(),this.bind(),v.copyTexImage2D(this.target,u,l,r,n,o,a,p),this.unbind(),t.unbind()}},{key:"copySubImage",value:function(e){var t=(e.pixels,e.offset,e.x,e.y,e.width,e.height,e.mipmapLevel,e.internalFormat),r=(void 0===t?f.GL.RGBA:t,e.type);void 0===r?f.GL.UNSIGNED_BYTE:r,e.border}}]),t}(p.default);r.default=b},{"./buffer":466,"./framebuffer":469,"./texture":477,"./webgl":486,"./webgl-checks":482}],476:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./webgl"),f=e("./webgl-checks"),h=e("./texture"),d=n(h),p=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,f.assertWebGLContext)(e);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,u({},r,{target:l.GL.TEXTURE_CUBE_MAP})));return n.setCubeMapImageData(r),n}return s(t,e),c(t,null,[{key:"makeFrom",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r instanceof t?r:new t(e,{handle:r.handle||r})}}]),c(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,r=this.gl;if(void 0!==t&&r.activeTexture(l.GL.TEXTURE0+t),r.bindTexture(l.GL.TEXTURE_CUBE_MAP,this.handle),void 0===t){var n=r.getParameter(r.ACTIVE_TEXTURE)-l.GL.TEXTURE0;return n}return t}},{key:"unbind",value:function(){var e=this.gl;e.bindTexture(l.GL.TEXTURE_CUBE_MAP,null)}},{key:"setCubeMapImageData",value:function(e){var t=e.width,r=e.height,n=e.pixels,o=e.data,a=e.border,s=void 0===a?0:a,u=e.format,c=void 0===u?l.GL.RGBA:u,f=e.type,h=void 0===f?l.GL.UNSIGNED_BYTE:f,d=e.generateMipmap,p=void 0!==d&&d,v=(i(e,["width","height","pixels","data","border","format","type","generateMipmap"]),this.gl);return n=n||o,this.bind(),this.width||this.height?(v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_X,0,c,t,r,s,c,h,n.pos.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Y,0,c,t,r,s,c,h,n.pos.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Z,0,c,t,r,s,c,h,n.pos.z),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_X,0,c,t,r,s,c,h,n.neg.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,c,t,r,s,c,h,n.neg.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,c,t,r,s,c,h,n.neg.z)):(v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_X,0,c,c,h,n.pos.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Y,0,c,c,h,n.pos.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Z,0,c,c,h,n.pos.z),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_X,0,c,c,h,n.neg.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,c,c,h,n.neg.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,c,c,h,n.neg.z)),this.unbind(),p&&this.generateMipmap(),this}}]),t}(d.default);r.default=p},{"./texture":477,"./webgl":486,"./webgl-checks":482}],477:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./webgl"),c=e("./webgl-checks"),l=e("./buffer"),f=n(l),h=e("../utils"),d=e("assert"),p=n(d),v=function(){function e(t,r){var n=r.id,s=void 0===n?(0,h.uid)("texture"):n,l=r.unpackFlipY,f=void 0===l||l,d=r.magFilter,p=void 0===d?u.GL.NEAREST:d,v=r.minFilter,_=void 0===v?u.GL.NEAREST:v,g=r.wrapS,y=void 0===g?u.GL.CLAMP_TO_EDGE:g,b=r.wrapT,m=void 0===b?u.GL.CLAMP_TO_EDGE:b,w=r.target,E=void 0===w?u.GL.TEXTURE_2D:w,x=r.handle,T=i(r,["id","unpackFlipY","magFilter","minFilter","wrapS","wrapT","target","handle"]);o(this,e),(0,c.assertWebGLContext)(t),this.handle=x||t.createTexture(),this.id=s,this.gl=t,this.target=E,this.hasFloatTexture=t.getExtension("OES_texture_float"),this.width=null,this.height=null,this.textureUnit=void 0,this.userData={},this.setPixelStorageModes(a({},T,{unpackFlipY:f})),this.setParameters(a({},T,{magFilter:p,minFilter:_,wrapS:y,wrapT:m}))}return s(e,[{key:"delete",value:function(){return this.handle&&(this.gl.deleteTexture(this.handle),this.handle=null),this}},{key:"toString",value:function(){return"Texture("+this.id+","+this.width+"x"+this.height+")"}},{key:"generateMipmap",value:function(){return this.gl.bindTexture(this.target,this.handle),this.gl.generateMipmap(this.target),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){var t=e.target,r=void 0===t?this.target:t,n=e.pixels,o=void 0===n?null:n,a=e.data,s=void 0===a?null:a,c=e.width,l=e.height,h=e.mipmapLevel,d=void 0===h?0:h,v=e.format,_=void 0===v?u.GL.RGBA:v,g=e.type,y=e.offset,b=void 0===y?0:y,m=e.border,w=void 0===m?0:m,E=(i(e,["target","pixels","data","width","height","mipmapLevel","format","type","offset","border"]),this.gl);if(o=o||s,o&&o.data){var x=o;o=x.data,c=x.shape[0],l=x.shape[1]}if(E.bindTexture(this.target,this.handle),null===o)c=c||1,l=l||1,g=g||u.GL.UNSIGNED_BYTE,E.texImage2D(r,d,_,c,l,w,_,g,o),this.width=c,this.height=l;else if(ArrayBuffer.isView(o)){if((0,p.default)(c>0&&l>0,"Texture2D: Width and height required"),g=g||(0,u.glTypeFromArray)(o),g===E.FLOAT&&!this.hasFloatTexture)throw new Error("floating point textures are not supported.");E.texImage2D(r,d,_,c,l,w,_,g,o),this.width=c,this.height=l}else if(o instanceof u.WebGLBuffer||o instanceof f.default){(0,p.default)(E instanceof u.WebGL2RenderingContext,"Requires WebGL2"),g=g||u.GL.UNSIGNED_BYTE;var T=f.default.makeFrom(o);E.bindBuffer(u.GL.PIXEL_UNPACK_BUFFER,T.handle),E.texImage2D(r,d,_,c,l,w,_,g,b),E.bindBuffer(u.GL.GL_PIXEL_UNPACK_BUFFER,null),this.width=c,this.height=l}else{var O=this._deduceImageSize(o);(0,p.default)(void 0===c&&void 0===l,"Texture2D.setImageData: Width and height must not be provided"),g=g||u.GL.UNSIGNED_BYTE,E.texImage2D(r,d,_,_,g,o),this.width=O.width,this.height=O.height}return E.bindTexture(this.target,null),this}},{key:"_deduceImageSize",value:function(e){if("undefined"!=typeof ImageData&&e instanceof ImageData)return{width:e.width,height:e.height};if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)return{width:e.naturalWidth,height:e.naturalHeight};if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{width:e.width,height:e.height};if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)return{width:e.videoWidth,height:e.videoHeight};throw new Error("Unknown image data format. Failed to deduce image size")}},{key:"setPixelStorageModes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.packAlignment,r=e.unpackAlignment,n=e.unpackFlipY,i=e.unpackPremultiplyAlpha,o=e.unpackColorspaceConversion,a=e.packRowLength,s=e.packSkipPixels,u=e.packSkipRows,c=e.unpackRowLength,l=e.unpackImageHeight,f=e.unpackSkipPixels,h=e.unpackSkipRows,d=e.unpackSkipImages,p=this.gl;return p.bindTexture(this.target,this.handle),t&&p.pixelStorei(p.PACK_ALIGNMENT,t),r&&p.pixelStorei(p.UNPACK_ALIGNMENT,r),n&&p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,n),i&&p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),o&&p.pixelStorei(p.UNPACK_COLORSPACE_CONVERSION_WEBGL,o),a&&p.pixelStorei(p.PACK_ROW_LENGTH,a),s&&p.pixelStorei(p.PACK_SKIP_PIXELS,s),u&&p.pixelStorei(p.PACK_SKIP_ROWS,u),c&&p.pixelStorei(p.UNPACK_ROW_LENGTH,c),l&&p.pixelStorei(p.UNPACK_IMAGE_HEIGHT,l),f&&p.pixelStorei(p.UNPACK_SKIP_PIXELS,f),h&&p.pixelStorei(p.UNPACK_SKIP_ROWS,h),d&&p.pixelStorei(p.UNPACK_SKIP_IMAGES,d),p.bindTexture(this.target,null),this}},{key:"setParameters",value:function(e){var t=e.magFilter,r=e.minFilter,n=e.wrapS,i=e.wrapT,o=e.wrapR,a=e.baseLevel,s=e.maxLevel,u=e.minLOD,c=e.maxLOD,l=e.compareFunc,f=e.compareMode,h=this.gl;return h.bindTexture(this.target,this.handle),t&&h.texParameteri(this.target,h.TEXTURE_MAG_FILTER,t),r&&h.texParameteri(this.target,h.TEXTURE_MIN_FILTER,r),n&&h.texParameteri(this.target,h.TEXTURE_WRAP_S,n),i&&h.texParameteri(this.target,h.TEXTURE_WRAP_T,i),o&&h.texParameteri(this.target,h.TEXTURE_WRAP_R,o),a&&h.texParameteri(this.target,h.TEXTURE_BASE_LEVEL,a),s&&h.texParameteri(this.target,h.TEXTURE_MAX_LEVEL,s),l&&h.texParameteri(this.target,h.TEXTURE_COMPARE_FUNC,l),f&&h.texParameteri(this.target,h.TEXTURE_COMPARE_MODE,f),u&&h.texParameterf(this.target,h.TEXTURE_MIN_LOD,u),c&&h.texParameterf(this.target,h.TEXTURE_MAX_LOD,c),h.bindTexture(this.target,null),this}},{key:"getParameters",value:function(){var e=this.gl;e.bindTexture(this.target,this.handle);var t={magFilter:e.getTexParameter(this.target,e.TEXTURE_MAG_FILTER),minFilter:e.getTexParameter(this.target,e.TEXTURE_MIN_FILTER),wrapS:e.getTexParameter(this.target,e.TEXTURE_WRAP_S),wrapT:e.getTexParameter(this.target,e.TEXTURE_WRAP_T)};return e.bindTexture(this.target,null),t}},{key:"image2D",value:function(e){var t=e.pixels,r=e.format,n=void 0===r?u.GL.RGBA:r,i=e.type,o=void 0===i?u.GL.UNSIGNED_BYTE:i;if(o===u.GL.FLOAT&&!this.hasFloatTexture)throw new Error("floating point textures are not supported.");return this.gl.bindTexture(this.target,this.handle),this.gl.texImage2D(u.GL.TEXTURE_2D,0,n,n,o,t),this.gl.bindTexture(this.target,null),this}},{key:"update",value:function(e){throw new Error("Texture.update() is deprecated()")}}]),e}();r.default=v},{"../utils":459,"./buffer":466,"./webgl":486,"./webgl-checks":482,assert:2}],478:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../webgl/webgl-checks"),s=e("./helpers/query-manager"),u=n(s),c=34916,l=34918,f=34919,h=35007,d=36392,p=36795,v=function(e){return e},_="Disjoint GPU operation invalidated timer queries",g='Timer queries require "EXT_disjoint_timer_query" extension',y=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.onComplete,o=void 0===n?v:n,s=r.onError,u=void 0===s?v:s;i(this,e),(0,a.assertWebGLContext)(t),this.gl=t,this.ext=this.gl.getExtension("EXT_disjoint_timer_query"),this.handle=this.ext?this.ext.createQueryEXT():null,this.target=null,this.userData={},this.onComplete=o,this.onError=u,this.promise=null,Object.seal(this)}return o(e,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.requireTimestamps,n=void 0!==r&&r;(0,a.assertWebGLContext)(e);var i=e.getExtension("EXT_disjoint_timer_query"),o=i?i.getQueryEXT(d,c):0,s=o>0;return Boolean(i)&&(!n||s)}}]),o(e,[{key:"delete",value:function(){return this.handle&&(u.default.deleteQuery(this),this.ext.deleteQueryEXT(this.handle),(0,a.glCheckError)(this.gl),this.handle=null),this}},{key:"begin",value:function(){return u.default.beginQuery(this,this.onComplete,this.onError),this.ext?(this.target=h,this.ext.beginQueryEXT(this.target,this.handle)):u.default.rejectQuery(this,g),this}},{key:"end",value:function(){return this.target&&(this.ext.endQueryEXT(this.target),this.target=null),this}},{key:"timestamp",value:function(){return u.default.beginQuery(this,this.onComplete,this.onError),this.ext?this.ext.queryCounterEXT(this.handle,d):u.default.rejectQuery(this,g),this}},{key:"cancel",value:function(){return this.end(),u.default.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.ext&&this.ext.getQueryObjectEXT(this.handle,f)}},{key:"getResult",value:function(){return this.ext?this.ext.getQueryObjectEXT(this.handle,l)/1e6:0}}]),e}();r.default=y,u.default.setInvalidator({queryType:y,errorMessage:_,checkInvalid:function(e){return e.getParameter(p)}})},{"../webgl/webgl-checks":482,"./helpers/query-manager":470}],479:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){var t=/([^\[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name "+e);return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function a(e,t,r){var n=g[r.type];if(!n)throw new Error("Unknown GLSL uniform type "+r.type);var i=e[n.function].bind(e),o=n.type,a=r.size*(n.elements||1),s=void 0;return s=a>1?function(e){if(!(e instanceof o)){var r=new o(a);r.set(e),e=r}(0,_.default)(e.length===a),n.matrix?i(t,!1,e):i(t,e)}:function(e){return i(t,e)}}function s(e,t){for(var r in e){var n=e[r];if(!u(n))throw t=t?t+" ":"",console.error(t+" Bad uniform "+r,n),
new Error(t+" Bad uniform "+r)}return!0}function u(e){var t=!0;if(e instanceof d.default)t=!0;else if(Array.isArray(e)){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;isFinite(s)||(t=!1)}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}t=t&&e.length>0}else ArrayBuffer.isView(e)?t=e.length>0:isFinite(e)||(t=!1);return t}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,r=void 0===t?"Uniforms":t,n=e.program,o=e.uniforms;(0,_.default)(n);var a=n._uniformSetters,s=i({},r,{});for(var u in a){var c=o[u];void 0!==c&&(s[u]={Type:c,Value:(0,p.formatValue)(c)})}for(var l in a){var f=o[l];void 0===f&&(s[l]={Type:"NOT PROVIDED",Value:"N/A"})}var h={},d=0;for(var v in o){var g=o[v];s[v]||(d++,h[v]={Type:"NOT USED: "+g,Value:(0,p.formatValue)(g)})}return{table:s,unusedTable:h,unusedCount:d}}Object.defineProperty(r,"__esModule",{value:!0});var l;r.parseUniformName=o,r.getUniformSetter=a,r.checkUniformValues=s,r.getUniformsTable=c;var f=e("./webgl"),h=e("./texture"),d=n(h),p=e("../utils"),v=e("assert"),_=n(v),g=(l={},i(l,f.GL.FLOAT,{function:"uniform1f",type:Float32Array}),i(l,f.GL.INT,{function:"uniform1i",type:Uint16Array}),i(l,f.GL.BOOL,{function:"uniform1i",type:Uint16Array}),i(l,f.GL.FLOAT_VEC2,{function:"uniform2fv",type:Float32Array,elements:2}),i(l,f.GL.FLOAT_VEC3,{function:"uniform3fv",type:Float32Array,elements:3}),i(l,f.GL.FLOAT_VEC4,{function:"uniform4fv",type:Float32Array,elements:4}),i(l,f.GL.INT_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),i(l,f.GL.INT_VEC3,{function:"uniform3iv",type:Uint16Array,elements:3}),i(l,f.GL.INT_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),i(l,f.GL.BOOL_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),i(l,f.GL.BOOL_VEC3,{function:"uniform3fv",type:Uint16Array,elements:3}),i(l,f.GL.BOOL_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),i(l,f.GL.FLOAT_MAT2,{function:"uniformMatrix2fv",type:Float32Array,matrix:!0,elements:4}),i(l,f.GL.FLOAT_MAT3,{mfunction:"uniformMatrix3fv",type:Float32Array,matrix:!0,elements:9}),i(l,f.GL.FLOAT_MAT4,{function:"uniformMatrix4fv",type:Float32Array,matrix:!0,elements:16}),i(l,f.GL.SAMPLER_2D,{function:"uniform1i",type:Uint16Array,texture:!0}),i(l,f.GL.SAMPLER_CUBE,{function:"uniform1i",type:Uint16Array,texture:!0}),l)},{"../utils":459,"./texture":477,"./webgl":486,assert:2}],480:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.luma||(e.luma={extensions:{}}),void 0===e.luma.extensions.ANGLE_instanced_arrays&&(e.luma.extensions.ANGLE_instanced_arrays=e.getExtension("ANGLE_instanced_arrays")),e.luma}function o(e){return(0,O.assertWebGLContext)(e),e.getParameter(e.MAX_VERTEX_ATTRIBS)}function a(e){return(0,O.assertWebGLContext)(e),Boolean((0,O.isWebGL2Context)(e)||e.getExtension(e,"ANGLE_instanced_arrays"))}function s(e,t){return Boolean(_(e,t,e.VERTEX_ATTRIB_ARRAY_ENABLED))}function u(e,t){return _(e,t,e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING)}function c(e,t){return _(e,e.CURRENT_VERTEX_ATTRIB)}function l(e,t){return _(t,e.VERTEX_ATTRIB_ARRAY_SIZE)}function f(e,t){return _(t,e.VERTEX_ATTRIB_ARRAY_TYPE)}function h(e,t){return _(t,e.VERTEX_ATTRIB_ARRAY_NORMALIZED)}function d(e,t){return(0,O.assertWebGL2Context)(e),_(t,e.VERTEX_ATTRIB_ARRAY_INTEGER)}function p(e,t){return _(t,e.VERTEX_ATTRIB_ARRAY_STRIDE)}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.VERTEX_ATTRIB_ARRAY_POINTER;return e.getVertexAttribOffset(t,r)}function _(e,t,r){return(0,O.assertWebGLContext)(e),e.getVertexAttrib(t,r)}function g(e,t){e.enableVertexAttribArray(t)}function y(e,t){t>0&&e.disableVertexAttribArray(t)}function b(e,t,r){if((0,O.isWebGL2Context)(e))return void e.vertexAttribDivisor(t,r);var n=i(e).extensions.ANGLE_instanced_arrays;if(n)return void n.vertexAttribDivisorANGLE(t,r);if(0!==r)throw new Error("WebGL instanced rendering not supported")}function m(e,t){if((0,M.default)(t>0),(0,O.isWebGL2Context)(e)){var r=_(t,e.VERTEX_ATTRIB_ARRAY_DIVISOR);return r}var n=i(e).extensions.ANGLE_instanced_arrays;if(n){var o=_(t,n.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);return o}return 0}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gl,r=e.location,n=e.buffer,i=e.target,o=e.layout;(0,O.assertWebGLContext)(t),n=S.default.makeFrom(t,n),i=(0,T.glGet)(void 0!==i?i:n.target),o=void 0!==o?o:n.layout,(0,M.default)(i,"setBuffer needs target"),(0,M.default)(o,"setBuffer called on uninitialized buffer"),n.bind({target:t.ARRAY_BUFFER}),o.integer?((0,O.assertWebGL2Context)(t),t.vertexAttribIPointer(r,o.size,(0,T.glGet)(o.type),o.stride,o.offset)):t.vertexAttribPointer(r,o.size,(0,T.glGet)(o.type),o.normalized,o.stride,o.offset),n.unbind({target:t.ARRAY_BUFFER})}function E(e){var t=e.gl,r=e.location,n=e.array;I.log.warn(0,"VertexAttributes.setGeneric is not well tested"),n instanceof Float32Array?t.vertexAttrib4fv(r,n):n instanceof Int32Array?((0,O.assertWebGL2Context)(t),t.vertexAttribI4iv(r,n)):n instanceof Uint32Array&&((0,O.assertWebGL2Context)(t),t.vertexAttribI4uiv(r,n))}function x(e,t,r,n,i,o){switch(I.log.warn(0,"VertexAttributes.setGenericValues is not well tested"),arguments.length-1){case 1:e.vertexAttrib1f(t,r);break;case 2:e.vertexAttrib2f(t,r,n);break;case 3:e.vertexAttrib3f(t,r,n,i);break;case 4:e.vertexAttrib4f(t,r,n,i,o);break;default:throw new Error("vertex attribute size must be between 1 and 4")}}Object.defineProperty(r,"__esModule",{value:!0}),r.getMaxAttributes=o,r.hasDivisor=a,r.isEnabled=s,r.getBuffer=u,r.getGeneric=c,r.getSize=l,r.getType=f,r.isNormalized=h,r.isInteger=d,r.getStride=p,r.getOffset=v,r.enable=g,r.disable=y,r.setDivisor=b,r.getDivisor=m,r.setBuffer=w,r.setGeneric=E,r.setGenericValues=x;var T=e("./webgl"),O=e("./webgl-checks"),A=e("./buffer"),S=n(A),I=e("../utils"),R=e("assert"),M=n(R)},{"../utils":459,"./buffer":466,"./webgl":486,"./webgl-checks":482,assert:2}],481:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=ArrayBuffer.isView(e)?e.constructor:e;switch(t){case Float32Array:return s.default.FLOAT;case Uint16Array:return s.default.UNSIGNED_SHORT;case Uint32Array:return s.default.UNSIGNED_INT;case Uint8Array:return s.default.UNSIGNED_BYTE;case Uint8ClampedArray:return s.default.UNSIGNED_BYTE;case Int8Array:return s.default.BYTE;case Int16Array:return s.default.SHORT;case Int32Array:return s.default.INT;default:throw new Error("Failed to deduce type from array/array type")}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.clamped,n=void 0===r||r;switch(e){case s.default.FLOAT:return Float32Array;case s.default.UNSIGNED_SHORT:case s.default.UNSIGNED_SHORT_5_6_5:case s.default.UNSIGNED_SHORT_4_4_4_4:case s.default.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case s.default.UNSIGNED_INT:return Uint32Array;case s.default.UNSIGNED_BYTE:return n?Uint8ClampedArray:Uint8Array;case s.default.BYTE:return Int8Array;case s.default.SHORT:return Int16Array;case s.default.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}Object.defineProperty(r,"__esModule",{value:!0}),r.glArrayFromType=void 0,r.glTypeFromArray=i,r.glTypeToArray=o;var a=e("./webgl-constants"),s=n(a);r.glArrayFromType=o},{"./webgl-constants":483}],482:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e instanceof _.WebGLRenderingContext||e&&34962===e.ARRAY_BUFFER}function o(e){return e instanceof _.WebGL2RenderingContext||e&&32874===e.TEXTURE_BINDING_3D}function a(e){(0,w.default)(i(e),E)}function s(e){(0,w.default)(o(e),x)}function u(e){return T.indexOf(e)!==-1}function c(e,t){(0,w.default)(u(e),"Bad index type "+(0,g.glKey)(e)+" "+t)}function l(e){return O.indexOf(e)!==-1}function f(e,t){(0,w.default)(l(e),"Bad draw mode "+(0,g.glKey)(e)+" "+t)}function h(e,t,r){(0,w.default)(t===(0,b.glTypeFromArray)(e),(e.constructor.name||"Array")+" "+("does not match element type "+(0,g.glKey)(t)+" "+r))}function d(e){for(var t=[],r=e.getError();r!==e.NO_ERROR;)t.push(v(e,r)),r=e.getError();return t.length?new Error(t.join("\n")):null}function p(e){if(e.debug){var t=d(e);if(t)throw t}}function v(e,t){switch(t){case y.default.CONTEXT_LOST_WEBGL:return"WebGL context lost";case y.default.INVALID_ENUM:return"WebGL invalid enumerated argument";case y.default.INVALID_VALUE:return"WebGL invalid value";case y.default.INVALID_OPERATION:return"WebGL invalid operation";case y.default.INVALID_FRAMEBUFFER_OPERATION:return"WebGL invalid framebuffer operation";case y.default.OUT_OF_MEMORY:return"WebGL out of memory";default:return"WebGL unknown error "+t}}Object.defineProperty(r,"__esModule",{value:!0}),r.GL_BUFFER_USAGE=r.GL_TARGETS=r.GL_DRAW_MODES=r.GL_INDEX_TYPES=void 0,r.isWebGLContext=i,r.isWebGL2Context=o,r.assertWebGLContext=a,r.assertWebGL2Context=s,r.isIndexType=u,r.assertIndexType=c,r.isDrawMode=l,r.assertDrawMode=f,r.assertArrayTypeMatch=h,r.glGetError=d,r.glCheckError=p;var _=e("./webgl-types"),g=e("./webgl-constants"),y=n(g),b=e("./webgl-arrays"),m=e("assert"),w=n(m),E="Invalid WebGLRenderingContext",x="Requires WebGL2",T=r.GL_INDEX_TYPES=[y.default.UNSIGNED_BYTE,y.default.UNSIGNED_SHORT,y.default.UNSIGNED_INT],O=r.GL_DRAW_MODES=[y.default.POINTS,y.default.LINE_STRIP,y.default.LINE_LOOP,y.default.LINES,y.default.TRIANGLE_STRIP,y.default.TRIANGLE_FAN,y.default.TRIANGLES];r.GL_TARGETS=[y.default.ARRAY_BUFFER,y.default.ELEMENT_ARRAY_BUFFER,y.default.COPY_READ_BUFFER,y.default.COPY_WRITE_BUFFER,y.default.TRANSFORM_FEEDBACK_BUFFER,y.default.UNIFORM_BUFFER,y.default.PIXEL_PACK_BUFFER,y.default.PIXEL_UNPACK_BUFFER],r.GL_BUFFER_USAGE=[y.default.STATIC_DRAW,y.default.DYNAMIC_DRAW,y.default.STREAM_DRAW,y.default.STATIC_READ,y.default.DYNAMIC_READ,y.default.STREAM_READ,y.default.STATIC_COPY,y.default.DYNAMIC_COPY,y.default.STREAM_COPY]},{"./webgl-arrays":481,"./webgl-constants":483,"./webgl-types":485,assert:2}],483:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e;return"string"==typeof e&&(t=s.default[e],(0,c.default)(void 0!==t,"Accessing GL."+e)),t}function o(e){for(var t in s.default)if(s.default[t]===e)return"GL."+t;return String(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.GL=void 0,r.glGet=i,r.glKey=o;var a=e("gl-constants"),s=n(a),u=e("assert"),c=n(u);r.GL=s.default,r.default=s.default},{assert:2,"gl-constants":384}],484:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return"unnamed"}function o(e,t,r){for(var n=e.split(/\r?\n/),o={},s=0;s<n.length;s++){var c=n[s];if(!(c.length<=1)){var l=parseInt(c.split(":")[2],10);if(isNaN(l))return"Could not parse GLSL compiler error: "+e;o[l]=c}}for(var f="",h=a(t).split(/\r?\n/),d=0;d<h.length;d++){var p=h[d];if((o[d+3]||o[d+2]||o[d+1])&&(f+=p+"\n",o[d+1])){var v=o[d+1];v=v.substr(v.split(":",3).join(":").length+1).trim(),f+="^^^ "+v+"\n\n"}}var _=i(t)||"unknown name",g=u(r);return"GLSL error in "+g+" shader "+_+"\n"+f}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map(function(e,n){var o=n+t,a=String(o).length,u=s(o,i-a);return u+r+e}).join("\n")}function s(e,t){for(var r="",n=0;n<t;++n)r+=" ";return""+r+e}function u(e){switch(e){case l.default.FRAGMENT_SHADER:return"fragment";case l.default.VERTEX_SHADER:return"vertex";default:return"unknown type"}}Object.defineProperty(r,"__esModule",{value:!0}),r.getShaderName=i,r.default=o;var c=e("./webgl-constants"),l=n(c)},{"./webgl-constants":483}],485:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=function e(){i(this,e)};return c.WebGL2RenderingContext||e}function a(){var e=function e(){i(this,e)};return c.Image||e}Object.defineProperty(r,"__esModule",{value:!0}),r.WebGL2RenderingContext=r.WebGLShaderPrecisionFormat=r.WebGLActiveInfo=r.WebGLUniformLocation=r.WebGLTexture=r.WebGLRenderbuffer=r.WebGLFramebuffer=r.WebGLBuffer=r.WebGLShader=r.WebGLProgram=r.WebGLRenderingContext=r.Image=r.webGLTypesAvailable=void 0;var s=e("../globals"),u=n(s),c=u.default.global,l=function e(){i(this,e)},f=u.default.globals.headlessTypes||c,h=f.WebGLRenderingContext,d=void 0===h?l:h,p=f.WebGLProgram,v=void 0===p?l:p,_=f.WebGLShader,g=void 0===_?l:_,y=f.WebGLBuffer,b=void 0===y?l:y,m=f.WebGLFramebuffer,w=void 0===m?l:m,E=f.WebGLRenderbuffer,x=void 0===E?l:E,T=f.WebGLTexture,O=void 0===T?l:T,A=f.WebGLUniformLocation,S=void 0===A?l:A,I=f.WebGLActiveInfo,R=void 0===I?l:I,M=f.WebGLShaderPrecisionFormat,k=void 0===M?l:M,P=(r.webGLTypesAvailable=d!==l&&v!==l&&g!==l&&b!==l&&w!==l&&x!==l&&O!==l&&S!==l&&R!==l&&k!==l,o()),j=a();r.Image=j,r.WebGLRenderingContext=d,r.WebGLProgram=v,r.WebGLShader=g,r.WebGLBuffer=b,r.WebGLFramebuffer=w,r.WebGLRenderbuffer=x,r.WebGLTexture=O,r.WebGLUniformLocation=S,r.WebGLActiveInfo=R,r.WebGLShaderPrecisionFormat=k,r.WebGL2RenderingContext=P},{"../globals":427}],486:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./webgl-types");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})});var o=e("./webgl-arrays");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./webgl-constants");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return n(a).default}})},{"./webgl-arrays":481,"./webgl-constants":483,"./webgl-types":485}],487:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.Fx=r.Shaders=void 0;var o=e("./webgl");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return o[e]}})});var a=e("./webgl2");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}})});var s=e("./math");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}})});var u=e("./scenegraph");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return u[e]}})});var c=e("./core");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return c[e]}})});var l=e("./geometry");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return l[e]}})});var f=e("./models");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return f[e]}})});var h=e("./shaderlib");Object.defineProperty(r,"Shaders",{enumerable:!0,get:function(){return i(h).default}});var d=e("./addons/fx");Object.defineProperty(r,"Fx",{enumerable:!0,get:function(){return i(d).default}});var p=e("./deprecated");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return p[e]}})});var v=n(o),_=n(a),g=n(s),y=n(u),b=n(c),m=n(l),w=n(f),E=e("./experimental"),x=n(E),T=i(h),O=i(d),A=n(p),S=e("./globals"),I=i(S);Object.assign(I.default,v,_,g,y,b,m,w,x,T.default,A,{Fx:O.default})},{"./addons/fx":405,"./core":411,"./deprecated":415,"./experimental":417,"./geometry":423,"./globals":427,"./math":440,"./models":450,"./scenegraph":452,"./shaderlib":457,"./webgl":471,"./webgl2":464}],488:[function(e,t,r){t.exports={name:"luma.gl",version:"2.10.4",description:"A WebGL JavaScript visualization library.",license:"MIT",contributors:["Ib Green <ib@uber.com>","Nicolas Belmonte <nico@uber.com>","Rye Terrell <ryeterrell@ryeterrell.net","Shan He <shan@uber.com>","Mikola Lysenko <mikolalysenko@gmail.com","Wesam Manassra <manassra@uber.com>"],repository:{type:"git",url:"https://github.com/uber/luma.gl"},keywords:["webgl","w3c","visualization","canvas","animation","3d"],main:"dist/index.js",files:["dist","shaderlib","src","headless.js","node-io.js","experimental.js"],dependencies:{"autobind-decorator":"^1.3.3","babel-polyfill":"^6.5.0","canvas-to-blob":"0.0.0","filesaver.js":"^0.2.0","get-pixels":"^3.3.0","gl-constants":"^1.0.0","gl-matrix":"^2.3.2",global:"^4.3.1",ndarray:"^1.0.18","save-pixels":"^2.3.2",through:"^2.3.8","webgl-debug":"^1.0.2"},devDependencies:{"babel-cli":"^6.3.15","babel-core":"^6.7.7","babel-eslint":"^6.0.0","babel-plugin-static-fs":"^1.1.0","babel-plugin-transform-builtin-extend":"^1.1.0","babel-plugin-transform-decorators-legacy":"^1.3.4","babel-preset-es2015":"^6.3.13","babel-preset-stage-2":"^6.3.13",babelify:"^7.2.0",bl:"^1.1.2","blue-tape":"^0.2.0","brfs-babel":"^1.0.0",browserify:"^13.0.0",budo:"^8.0.3","cookie-cutter":"^0.1.1","d3-format":"^1.0.0",disc:"^1.3.2","electron-prebuilt":"^0.37.2",eslint:"^2.0","eslint-config-uber-es2015":"^2.0.0",faucet:"0.0.1",gl:"^4.0.2",husky:"^0.10.2",mkdirp:"^0.5.1","source-map-support":"^0.4.2","tap-browser-color":"^0.1.2","tape-catch":"^1.0.4","tape-promise":"^1.1.0",testron:"^1.2.0","uglify-js":"^2.6.1"},scripts:{build:"npm run build-clean && npm run build-compile && npm run build-script","build-clean":"rm -fr dist/*","build-compile":"babel src -d dist --source-maps inline --copy-files","build-watch":"babel src -d dist --source-maps inline --copy-files --watch & babel examples -d dist --source-maps inline --copy-files --watch &","build-script":"browserify src/bundle.js --debug -o dist/lumagl.js -t babelify -t brfs-babel && cat dist/lumagl.js | uglifyjs > dist/lumagl.min.js",docs:"npm run docs-build && open ./_docs/docs/index.html","docs-build":"rm -fr _docs/* && jekyll build --config=docs/_config.yml --layouts docs/_layouts","docs-gh-pages":"git subtree push --prefix _docs origin gh-pages","docs-gh-pages-force":"git push origin `git subtree split --prefix _docs dev`:gh-pages --force","docs-publish":"npm run docs-build && git add _docs -f && git commit -m 'UPDATE DOCS' --no-verify && npm run docs-gh-pages",lint:"eslint src",precommit:"npm test",mypublish:"npm run build && npm run test && npm publish",test:"npm run lint && npm run test-headless && npm run test-headless-nowebgl","test-headless":"babel-node --include='' test/headless.js | faucet","test-headless-nowebgl":"babel-node --include='' test/headless-nowebgl.js | faucet","test-browser":"budo test/browser.js:build/test-bundle.js --dir test --live --open --port 3001 --watch-glob '**/*.{html,css,js,glsl}' -- -t babelify","test-electron":"browserify test/electron.js | testron | faucet","profile-disc":"browserify src/bundle.js --full-paths -t babelify -t brfs-babel | discify --open",start:"npm run build-watch && budo dist/bundle.js:dist/lumagl.js --live --open --port 3000 --watch-glob '**/*.{html,css,js,glsl}' -- -t brfs-babel"}}},{}],489:[function(e,t,r){"use strict";function n(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var r=e.args[t];0===t?e.args[t]={name:r,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:e.args[t]={name:r,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function i(e){return a({args:e.args,pre:n(e.pre),body:n(e.body),post:n(e.proc),funcName:e.funcName})}function o(e){for(var t=[],r=0;r<e.args.length;++r)t.push("a"+r);var n=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return n(i(e))}var a=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in u){var t=u[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var c={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in c){var t=c[e];r[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),r[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var t=l[e];r[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),r[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),r[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<f.length;++e){var t=f[e];r[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),r[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var t=h[e];r[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),r[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),r[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];r[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),r[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),r[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),r[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),r.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":315}],490:[function(e,t,r){"use strict";var n=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var r=[],o=e,a=1;Array.isArray(o);)r.push(o.length),a*=o.length,o=o[0];return 0===r.length?n():(t||(t=n(new Float64Array(a),r)),i(t,e),t)}},{"./doConvert.js":491,ndarray:492}],491:[function(e,t,r){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":315}],492:[function(e,t,r){function n(e,t){return e[0]-t[0]}function i(){var e,t=this.stride,r=new Array(t.length);for(e=0;e<r.length;++e)r[e]=[Math.abs(t[e]),e];r.sort(n);var i=new Array(r.length);for(e=0;e<i.length;++e)i[e]=r[e][1];return i}function o(e,t){var r=["View",t,"d",e].join("");t<0&&(r="View_Nil"+e);var n="generic"===e;if(t===-1){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",a=new Function(o);return a()}if(0===t){var o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",a=new Function("TrivialArray",o);return a(f[e][0])}var o=["'use strict'"],s=u(t),c=s.map(function(e){return"i"+e}),l="this.offset+"+s.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),h=s.map(function(e){return"b"+e}).join(","),d=s.map(function(e){return"c"+e}).join(",");o.push("function "+r+"(a,"+h+","+d+",d){this.data=a","this.shape=["+h+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),t<4?(o.push("function "+r+"_order(){"),2===t?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),
o.push("proto.set=function "+r+"_set("+c.join(",")+",v){"),n?o.push("return this.data.set("+l+",v)}"):o.push("return this.data["+l+"]=v}"),o.push("proto.get=function "+r+"_get("+c.join(",")+"){"),n?o.push("return this.data.get("+l+")}"):o.push("return this.data["+l+"]}"),o.push("proto.index=function "+r+"_index(",c.join(),"){return "+l+"}"),o.push("proto.hi=function "+r+"_hi("+c.join(",")+"){return new "+r+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var p=s.map(function(e){return"a"+e+"=this.shape["+e+"]"}),v=s.map(function(e){return"c"+e+"=this.stride["+e+"]"});o.push("proto.lo=function "+r+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+v.join(","));for(var _=0;_<t;++_)o.push("if(typeof i"+_+"==='number'&&i"+_+">=0){d=i"+_+"|0;b+=c"+_+"*d;a"+_+"-=d}");o.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+c.join(",")+"){var "+s.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+s.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var _=0;_<t;++_)o.push("if(typeof i"+_+"==='number'){d=i"+_+"|0;if(d<0){c+=b"+_+"*(a"+_+"-1);a"+_+"=ceil(-a"+_+"/d)}else{a"+_+"=ceil(a"+_+"/d)}b"+_+"*=d}");o.push("return new "+r+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var g=new Array(t),y=new Array(t),_=0;_<t;++_)g[_]="a[i"+_+"]",y[_]="b[i"+_+"]";o.push("proto.transpose=function "+r+"_transpose("+c+"){"+c.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+g.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var _=0;_<t;++_)o.push("if(typeof i"+_+"==='number'&&i"+_+">=0){c=(c+this.stride["+_+"]*i"+_+")|0}else{a.push(this.shape["+_+"]);b.push(this.stride["+_+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(f[e],i)}function a(e){if(c(e))return"buffer";if(l)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,r,n){if(void 0===e){var i=f.array[0];return i([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===r){r=new Array(s);for(var u=s-1,c=1;u>=0;--u)r[u]=c,c*=t[u]}if(void 0===n){n=0;for(var u=0;u<s;++u)r[u]<0&&(n-=(t[u]-1)*r[u])}for(var l=a(e),h=f[l];h.length<=s+1;)h.push(o(l,h.length-1));var i=h[s+1];return i(e,t,r,n)}var u=e("iota-array"),c=e("is-buffer"),l="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=s},{"iota-array":398,"is-buffer":399}],493:[function(e,t,r){function n(e,t,r,n){function o(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}var a=0,n=void 0===n?{}:n,s=void 0===n.loop?null:n.loop,u=void 0===n.palette?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";e[a++]=71,e[a++]=73,e[a++]=70,e[a++]=56,e[a++]=57,e[a++]=97;var c=0,l=0;if(null!==u){for(var f=o(u);f>>=1;)++c;if(f=1<<c,--c,void 0!==n.background){if(l=n.background,l>=f)throw"Background index out of range.";if(0===l)throw"Background index explicitly passed as 0."}}if(e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=(null!==u?128:0)|c,e[a++]=l,e[a++]=0,null!==u)for(var h=0,d=u.length;h<d;++h){var p=u[h];e[a++]=p>>16&255,e[a++]=p>>8&255,e[a++]=255&p}if(null!==s){if(s<0||s>65535)throw"Loop count invalid.";e[a++]=33,e[a++]=255,e[a++]=11,e[a++]=78,e[a++]=69,e[a++]=84,e[a++]=83,e[a++]=67,e[a++]=65,e[a++]=80,e[a++]=69,e[a++]=50,e[a++]=46,e[a++]=48,e[a++]=3,e[a++]=1,e[a++]=255&s,e[a++]=s>>8&255,e[a++]=0}var v=!1;this.addFrame=function(t,r,n,s,c,l){if(v===!0&&(--a,v=!1),l=void 0===l?{}:l,t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(n<=0||s<=0||n>65535||s>65535)throw"Width/Height invalid.";if(c.length<n*s)throw"Not enough pixels for the frame size.";var f=!0,h=l.palette;if(void 0!==h&&null!==h||(f=!1,h=u),void 0===h||null===h)throw"Must supply either a local or global palette.";for(var d=o(h),p=0;d>>=1;)++p;d=1<<p;var _=void 0===l.delay?0:l.delay,g=void 0===l.disposal?0:l.disposal;if(g<0||g>3)throw"Disposal out of range.";var y=!1,b=0;if(void 0!==l.transparent&&null!==l.transparent&&(y=!0,b=l.transparent,b<0||b>=d))throw"Transparent color index.";if((0!==g||y||0!==_)&&(e[a++]=33,e[a++]=249,e[a++]=4,e[a++]=g<<2|(y===!0?1:0),e[a++]=255&_,e[a++]=_>>8&255,e[a++]=b,e[a++]=0),e[a++]=44,e[a++]=255&t,e[a++]=t>>8&255,e[a++]=255&r,e[a++]=r>>8&255,e[a++]=255&n,e[a++]=n>>8&255,e[a++]=255&s,e[a++]=s>>8&255,e[a++]=f===!0?128|p-1:0,f===!0)for(var m=0,w=h.length;m<w;++m){var E=h[m];e[a++]=E>>16&255,e[a++]=E>>8&255,e[a++]=255&E}a=i(e,a,p<2?2:p,c)},this.end=function(){return v===!1&&(e[a++]=59,v=!0),a}}function i(e,t,r,n){function i(r){for(;h>=r;)e[t++]=255&d,d>>=8,h-=8,t===a+256&&(e[a]=255,a=t++)}function o(e){d|=e<<h,h+=f,i(8)}e[t++]=r;var a=t++,s=1<<r,u=s-1,c=s+1,l=c+1,f=r+1,h=0,d=0,p=n[0]&u,v={};o(s);for(var _=1,g=n.length;_<g;++_){var y=n[_]&u,b=p<<8|y,m=v[b];if(void 0===m){for(d|=p<<h,h+=f;h>=8;)e[t++]=255&d,d>>=8,h-=8,t===a+256&&(e[a]=255,a=t++);4096===l?(o(s),l=c+1,f=r+1,v={}):(l>=1<<f&&++f,v[b]=l++),p=y}else p=m}return o(p),o(c),i(1),a+1===t?e[a]=0:(e[a]=t-a-1,e[t++]=0),t}function o(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!==(e[t++]+1&253)||97!==e[t++])throw"Invalid GIF 87a/89a header.";var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,s=7&i,u=1<<s+1;e[t++];e[t++];var c=null;o&&(c=t,t+=3*u);var l=!0,f=[],h=0,d=null,p=0,v=null;for(this.width=r,this.height=n;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){var _=e[t++];if(0===_)break;t+=_}break;case 249:if(4!==e[t++]||0!==e[t+4])throw"Invalid graphics extension block.";var g=e[t++];h=e[t++]|e[t++]<<8,d=e[t++],0===(1&g)&&(d=null),p=g>>2&7,t++;break;case 254:for(;;){var _=e[t++];if(0===_)break;t+=_}break;default:throw"Unknown graphic control label: 0x"+e[t-1].toString(16)}break;case 44:var y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,E=e[t++],x=E>>7,T=E>>6&1,O=7&E,A=1<<O+1,S=c,I=!1;if(x){var I=!0;S=t,t+=3*A}var R=t;for(t++;;){var _=e[t++];if(0===_)break;t+=_}f.push({x:y,y:b,width:m,height:w,has_local_palette:I,palette_offset:S,data_offset:R,data_length:t-R,transparent_index:d,interlaced:!!T,delay:h,disposal:p});break;case 59:l=!1;break;default:throw"Unknown gif block: 0x"+e[t-1].toString(16)}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(e){if(e<0||e>=f.length)throw"Frame index out of range.";return f[e]},this.decodeAndBlitFrameBGRA=function(t,n){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);a(e,i.data_offset,s,o);var u=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,f=r-l,h=l,d=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),v=d,_=4*f;i.interlaced===!0&&(_+=4*r*7);for(var g=8,y=0,b=s.length;y<b;++y){var m=s[y];if(0===h&&(v+=_,h=l,v>=p&&(_=4*f+4*r*(g-1),v=d+(l+f)*(g<<1),g>>=1)),m===c)v+=4;else{var w=e[u+3*m],E=e[u+3*m+1],x=e[u+3*m+2];n[v++]=x,n[v++]=E,n[v++]=w,n[v++]=255}--h}},this.decodeAndBlitFrameRGBA=function(t,n){var i=this.frameInfo(t),o=i.width*i.height,s=new Uint8Array(o);a(e,i.data_offset,s,o);var u=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,f=r-l,h=l,d=4*(i.y*r+i.x),p=4*((i.y+i.height)*r+i.x),v=d,_=4*f;i.interlaced===!0&&(_+=4*r*7);for(var g=8,y=0,b=s.length;y<b;++y){var m=s[y];if(0===h&&(v+=_,h=l,v>=p&&(_=4*f+4*r*(g-1),v=d+(l+f)*(g<<1),g>>=1)),m===c)v+=4;else{var w=e[u+3*m],E=e[u+3*m+1],x=e[u+3*m+2];n[v++]=w,n[v++]=E,n[v++]=x,n[v++]=255}--h}}}function a(e,t,r,n){for(var i=e[t++],o=1<<i,a=o+1,s=a+1,u=i+1,c=(1<<u)-1,l=0,f=0,h=0,d=e[t++],p=new Int32Array(4096),v=null;;){for(;l<16&&0!==d;)f|=e[t++]<<l,l+=8,1===d?d=e[t++]:--d;if(l<u)break;var _=f&c;if(f>>=u,l-=u,_!==o){if(_===a)break;for(var g=_<s?_:v,y=0,b=g;b>o;)b=p[b]>>8,++y;var m=b,w=h+y+(g!==_?1:0);if(w>n)return void console.log("Warning, gif stream longer than expected.");r[h++]=m,h+=y;var E=h;for(g!==_&&(r[h++]=m),b=g;y--;)b=p[b],r[--E]=255&b,b>>=8;null!==v&&s<4096&&(p[s++]=v<<8|m,s>=c+1&&u<12&&(++u,c=c<<1|1)),v=_}else s=a+1,u=i+1,c=(1<<u)-1,v=null}return h!==n&&console.log("Warning, gif stream shorter than expected."),r}try{r.GifWriter=n,r.GifReader=o}catch(e){}},{}],494:[function(e,t,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(r,r+n),i);for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],495:[function(e,t,r){"use strict";function n(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){a=r>2e3?2e3:r,r-=a;do i=i+t[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}t.exports=n},{}],496:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],497:[function(e,t,r){"use strict";function n(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}function i(e,t,r,n){var i=o,a=n+r;e^=-1;for(var s=n;s<a;s++)e=e>>>8^i[255&(e^t[s])];return e^-1}var o=n();t.exports=i},{}],498:[function(e,t,r){"use strict";function n(e,t){return e.msg=N[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(M.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function s(e,t){k._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,M.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=P(e.adler,t,i,r):2===e.state.wrap&&(e.adler=j(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function f(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-fe?e.strstart-(e.w_size-fe):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+le,d=c[o+a-1],p=c[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,c[r+a]===p&&c[r+a-1]===d&&c[r]===c[o]&&c[++r]===c[o+1]){o+=2,r++;do;while(c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&c[++o]===c[++r]&&o<h);if(n=le-(h-o),o=h-le,n>a){if(e.match_start=t,a=n,n>=s)break;d=c[o+a-1],p=c[o+a]}}while((t=f[t&l])>u&&0!==--i);return a<=e.lookahead?a:e.lookahead}function h(e){var t,r,n,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-fe)){M.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,r=e.hash_size,t=r;do n=e.head[--t],e.head[t]=n>=a?n-a:0;while(--r);r=a,t=r;do n=e.prev[--t],e.prev[t]=n>=a?n-a:0;while(--r);i+=a}if(0===e.strm.avail_in)break;if(r=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=ce)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ce-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ce)););}while(e.lookahead<fe&&0!==e.strm.avail_in)}function d(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===F)return me;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,s(e,!1),0===e.strm.avail_out))return me;if(e.strstart-e.block_start>=e.w_size-fe&&(s(e,!1),0===e.strm.avail_out))return me}return e.insert=0,t===D?(s(e,!0),0===e.strm.avail_out?Ee:xe):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?me:me}function p(e,t){for(var r,n;;){if(e.lookahead<fe){if(h(e),e.lookahead<fe&&t===F)return me;if(0===e.lookahead)break}if(r=0,e.lookahead>=ce&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-fe&&(e.match_length=f(e,r)),e.match_length>=ce)if(n=k._tr_tally(e,e.strstart-e.match_start,e.match_length-ce),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ce){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(s(e,!1),0===e.strm.avail_out))return me}return e.insert=e.strstart<ce-1?e.strstart:ce-1,t===D?(s(e,!0),0===e.strm.avail_out?Ee:xe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?me:we}function v(e,t){for(var r,n,i;;){if(e.lookahead<fe){if(h(e),e.lookahead<fe&&t===F)return me;if(0===e.lookahead)break}if(r=0,e.lookahead>=ce&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ce-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-fe&&(e.match_length=f(e,r),e.match_length<=5&&(e.strategy===Y||e.match_length===ce&&e.strstart-e.match_start>4096)&&(e.match_length=ce-1)),e.prev_length>=ce&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ce,n=k._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ce),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ce-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=ce-1,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return me}else if(e.match_available){if(n=k._tr_tally(e,0,e.window[e.strstart-1]),n&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return me}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=k._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ce-1?e.strstart:ce-1,t===D?(s(e,!0),0===e.strm.avail_out?Ee:xe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?me:we}function _(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=le){if(h(e),e.lookahead<=le&&t===F)return me;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ce&&e.strstart>0&&(i=e.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+le;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<o);e.match_length=le-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ce?(r=k._tr_tally(e,1,e.match_length-ce),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(s(e,!1),0===e.strm.avail_out))return me}return e.insert=0,t===D?(s(e,!0),0===e.strm.avail_out?Ee:xe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?me:we}function g(e,t){for(var r;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===F)return me;break}if(e.match_length=0,r=k._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return me}return e.insert=0,t===D?(s(e,!0),0===e.strm.avail_out?Ee:xe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?me:we}function y(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function b(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=R[e.level].max_lazy,e.good_match=R[e.level].good_length,e.nice_match=R[e.level].nice_length,e.max_chain_length=R[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ce-1,e.match_available=0,e.ins_h=0}function m(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new M.Buf16(2*se),this.dyn_dtree=new M.Buf16(2*(2*oe+1)),this.bl_tree=new M.Buf16(2*(2*ae+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new M.Buf16(ue+1),this.heap=new M.Buf16(2*ie+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new M.Buf16(2*ie+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Q,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?de:ye,e.adler=2===t.wrap?0:1,t.last_flush=F,k._tr_init(t),B):n(e,z)}function E(e){var t=w(e);return t===B&&b(e.state),t}function x(e,t){return e&&e.state?2!==e.state.wrap?z:(e.state.gzhead=t,B):z}function T(e,t,r,i,o,a){if(!e)return z;var s=1;if(t===V&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>J||r!==$||i<8||i>15||t<0||t>9||a<0||a>Z)return n(e,z);8===i&&(i=9);var u=new m;return e.state=u,u.strm=e,u.wrap=s,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+ce-1)/ce),u.window=new M.Buf8(2*u.w_size),u.head=new M.Buf16(u.hash_size),u.prev=new M.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new M.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=a,u.method=r,E(e)}function O(e,t){return T(e,t,$,ee,te,K)}function A(e,t){var r,s,l,f;if(!e||!e.state||t>U||t<0)return e?n(e,z):z;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===be&&t!==D)return n(e,0===e.avail_out?W:z);if(s.strm=e,r=s.last_flush,s.last_flush=t,s.status===de)if(2===s.wrap)e.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=q||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=j(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=pe):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=q||s.level<2?4:0),u(s,Te),s.status=ye);else{var h=$+(s.w_bits-8<<4)<<8,d=-1;d=s.strategy>=q||s.level<2?0:s.level<6?1:6===s.level?2:3,h|=d<<6,0!==s.strstart&&(h|=he),h+=31-h%31,s.status=ye,c(s,h),0!==s.strstart&&(c(s,e.adler>>>16),c(s,65535&e.adler)),e.adler=1}if(s.status===pe)if(s.gzhead.extra){for(l=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>l&&(e.adler=j(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>l&&(e.adler=j(e.adler,s.pending_buf,s.pending-l,l)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=ve)}else s.status=ve;if(s.status===ve)if(s.gzhead.name){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=j(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(e.adler=j(e.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.gzindex=0,s.status=_e)}else s.status=_e;if(s.status===_e)if(s.gzhead.comment){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(e.adler=j(e.adler,s.pending_buf,s.pending-l,l)),a(e),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(e.adler=j(e.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.status=ge)}else s.status=ge;if(s.status===ge&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(u(s,255&e.adler),u(s,e.adler>>8&255),e.adler=0,s.status=ye)):s.status=ye),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,B}else if(0===e.avail_in&&i(t)<=i(r)&&t!==D)return n(e,W);if(s.status===be&&0!==e.avail_in)return n(e,W);if(0!==e.avail_in||0!==s.lookahead||t!==F&&s.status!==be){var p=s.strategy===q?g(s,t):s.strategy===X?_(s,t):R[s.level].func(s,t);if(p!==Ee&&p!==xe||(s.status=be),p===me||p===Ee)return 0===e.avail_out&&(s.last_flush=-1),B;if(p===we&&(t===L?k._tr_align(s):t!==U&&(k._tr_stored_block(s,0,0,!1),t===C&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,B}return t!==D?B:s.wrap<=0?G:(2===s.wrap?(u(s,255&e.adler),u(s,e.adler>>8&255),u(s,e.adler>>16&255),u(s,e.adler>>24&255),u(s,255&e.total_in),u(s,e.total_in>>8&255),u(s,e.total_in>>16&255),u(s,e.total_in>>24&255)):(c(s,e.adler>>>16),c(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?B:G)}function S(e){var t;return e&&e.state?(t=e.state.status,t!==de&&t!==pe&&t!==ve&&t!==_e&&t!==ge&&t!==ye&&t!==be?n(e,z):(e.state=null,t===ye?n(e,H):B)):z}function I(e,t){var r,n,i,a,s,u,c,l,f=t.length;if(!e||!e.state)return z;if(r=e.state,a=r.wrap,2===a||1===a&&r.status!==de||r.lookahead)return z;for(1===a&&(e.adler=P(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===a&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new M.Buf8(r.w_size),M.arraySet(l,t,f-r.w_size,r.w_size,0),t=l,f=r.w_size),s=e.avail_in,u=e.next_in,c=e.input,e.avail_in=f,e.next_in=0,e.input=t,h(r);r.lookahead>=ce;){n=r.strstart,i=r.lookahead-(ce-1);do r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+ce-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++;while(--i);r.strstart=n,r.lookahead=ce-1,h(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=ce-1,r.match_available=0,e.next_in=u,e.input=c,e.avail_in=s,r.wrap=a,B}var R,M=e("../utils/common"),k=e("./trees"),P=e("./adler32"),j=e("./crc32"),N=e("./messages"),F=0,L=1,C=3,D=4,U=5,B=0,G=1,z=-2,H=-3,W=-5,V=-1,Y=1,q=2,X=3,Z=4,K=0,Q=2,$=8,J=9,ee=15,te=8,re=29,ne=256,ie=ne+1+re,oe=30,ae=19,se=2*ie+1,ue=15,ce=3,le=258,fe=le+ce+1,he=32,de=42,pe=69,ve=73,_e=91,ge=103,ye=113,be=666,me=1,we=2,Ee=3,xe=4,Te=3;R=[new y(0,0,0,0,d),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,v),new y(8,16,32,32,v),new y(8,16,128,128,v),new y(8,32,128,256,v),new y(32,128,258,1024,v),new y(32,258,258,4096,v)],r.deflateInit=O,r.deflateInit2=T,r.deflateReset=E,r.deflateResetKeep=w,r.deflateSetHeader=x,r.deflate=A,r.deflateEnd=S,r.deflateSetDictionary=I,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":494,"./adler32":495,"./crc32":497,"./messages":502,"./trees":503}],499:[function(e,t,r){"use strict";var n=30,i=12;t.exports=function(e,t){var r,o,a,s,u,c,l,f,h,d,p,v,_,g,y,b,m,w,E,x,T,O,A,S,I;r=e.state,o=e.next_in,S=e.input,a=o+(e.avail_in-5),s=e.next_out,I=e.output,u=s-(t-e.avail_out),c=s+(e.avail_out-257),l=r.dmax,f=r.wsize,h=r.whave,d=r.wnext,p=r.window,v=r.hold,_=r.bits,g=r.lencode,y=r.distcode,b=(1<<r.lenbits)-1,m=(1<<r.distbits)-1;e:do{_<15&&(v+=S[o++]<<_,_+=8,v+=S[o++]<<_,_+=8),w=g[v&b];t:for(;;){if(E=w>>>24,v>>>=E,_-=E,E=w>>>16&255,0===E)I[s++]=65535&w;else{if(!(16&E)){if(0===(64&E)){w=g[(65535&w)+(v&(1<<E)-1)];continue t}if(32&E){r.mode=i;break e}e.msg="invalid literal/length code",r.mode=n;break e}x=65535&w,E&=15,E&&(_<E&&(v+=S[o++]<<_,_+=8),x+=v&(1<<E)-1,v>>>=E,_-=E),_<15&&(v+=S[o++]<<_,_+=8,v+=S[o++]<<_,_+=8),w=y[v&m];r:for(;;){if(E=w>>>24,v>>>=E,_-=E,E=w>>>16&255,!(16&E)){if(0===(64&E)){w=y[(65535&w)+(v&(1<<E)-1)];continue r}e.msg="invalid distance code",r.mode=n;break e}if(T=65535&w,E&=15,_<E&&(v+=S[o++]<<_,_+=8,_<E&&(v+=S[o++]<<_,_+=8)),T+=v&(1<<E)-1,T>l){e.msg="invalid distance too far back",r.mode=n;break e}if(v>>>=E,_-=E,E=s-u,T>E){if(E=T-E,E>h&&r.sane){e.msg="invalid distance too far back",r.mode=n;break e}if(O=0,A=p,0===d){if(O+=f-E,E<x){x-=E;do I[s++]=p[O++];while(--E);O=s-T,A=I}}else if(d<E){if(O+=f+d-E,E-=d,E<x){x-=E;do I[s++]=p[O++];while(--E);if(O=0,d<x){E=d,x-=E;do I[s++]=p[O++];while(--E);O=s-T,A=I}}}else if(O+=d-E,E<x){x-=E;do I[s++]=p[O++];while(--E);O=s-T,A=I}for(;x>2;)I[s++]=A[O++],I[s++]=A[O++],I[s++]=A[O++],x-=3;x&&(I[s++]=A[O++],x>1&&(I[s++]=A[O++]))}else{O=s-T;do I[s++]=I[O++],I[s++]=I[O++],I[s++]=I[O++],x-=3;while(x>2);x&&(I[s++]=I[O++],x>1&&(I[s++]=I[O++]))}break}}break}}while(o<a&&s<c);x=_>>3,o-=x,_-=x<<3,v&=(1<<_)-1,e.next_in=o,e.next_out=s,e.avail_in=o<a?5+(a-o):5-(o-a),e.avail_out=s<c?257+(c-s):257-(s-c),r.hold=v,r.bits=_}},{}],500:[function(e,t,r){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=C,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(ve),t.distcode=t.distdyn=new y.Buf32(_e),t.sane=1,t.back=-1,R):P}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):P}function s(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?P:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,a(e))):P}function u(e,t){var r,n;return e?(n=new i,e.state=n,n.window=null,r=s(e,t),r!==R&&(e.state=null),r):P}function c(e){return u(e,ye)}function l(e){if(be){var t;for(_=new y.Buf32(512),g=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(E(T,e.lens,0,288,_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;E(O,e.lens,0,32,g,0,e.work,{bits:5}),be=!1}e.lencode=_,e.lenbits=9,e.distcode=g,e.distbits=5}function f(e,t,r,n){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new y.Buf8(o.wsize)),n>=o.wsize?(y.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),y.arraySet(o.window,t,r-n,i,o.wnext),n-=i,n?(y.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(e,t){var r,i,o,a,s,u,c,h,d,p,v,_,g,ve,_e,ge,ye,be,me,we,Ee,xe,Te,Oe,Ae=0,Se=new y.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return P;r=e.state,r.mode===X&&(r.mode=Z),s=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,i=e.input,u=e.avail_in,h=r.hold,d=r.bits,p=u,v=c,xe=R;e:for(;;)switch(r.mode){case C:if(0===r.wrap){r.mode=Z;break}for(;d<16;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(2&r.wrap&&35615===h){r.check=0,Se[0]=255&h,Se[1]=h>>>8&255,r.check=m(r.check,Se,2,0),h=0,d=0,r.mode=D;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=he;break}if((15&h)!==L){e.msg="unknown compression method",r.mode=he;break}if(h>>>=4,d-=4,Ee=(15&h)+8,0===r.wbits)r.wbits=Ee;else if(Ee>r.wbits){e.msg="invalid window size",r.mode=he;break}r.dmax=1<<Ee,e.adler=r.check=1,r.mode=512&h?Y:X,h=0,d=0;break;case D:for(;d<16;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(r.flags=h,(255&r.flags)!==L){e.msg="unknown compression method",r.mode=he;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=he;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(Se[0]=255&h,Se[1]=h>>>8&255,r.check=m(r.check,Se,2,0)),h=0,d=0,r.mode=U;case U:for(;d<32;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}r.head&&(r.head.time=h),512&r.flags&&(Se[0]=255&h,Se[1]=h>>>8&255,Se[2]=h>>>16&255,Se[3]=h>>>24&255,r.check=m(r.check,Se,4,0)),h=0,d=0,r.mode=B;case B:for(;d<16;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(Se[0]=255&h,Se[1]=h>>>8&255,r.check=m(r.check,Se,2,0)),h=0,d=0,r.mode=G;case G:if(1024&r.flags){for(;d<16;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(Se[0]=255&h,Se[1]=h>>>8&255,r.check=m(r.check,Se,2,0)),h=0,d=0}else r.head&&(r.head.extra=null);r.mode=z;case z:if(1024&r.flags&&(_=r.length,_>u&&(_=u),_&&(r.head&&(Ee=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),
y.arraySet(r.head.extra,i,a,_,Ee)),512&r.flags&&(r.check=m(r.check,i,_,a)),u-=_,a+=_,r.length-=_),r.length))break e;r.length=0,r.mode=H;case H:if(2048&r.flags){if(0===u)break e;_=0;do Ee=i[a+_++],r.head&&Ee&&r.length<65536&&(r.head.name+=String.fromCharCode(Ee));while(Ee&&_<u);if(512&r.flags&&(r.check=m(r.check,i,_,a)),u-=_,a+=_,Ee)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=W;case W:if(4096&r.flags){if(0===u)break e;_=0;do Ee=i[a+_++],r.head&&Ee&&r.length<65536&&(r.head.comment+=String.fromCharCode(Ee));while(Ee&&_<u);if(512&r.flags&&(r.check=m(r.check,i,_,a)),u-=_,a+=_,Ee)break e}else r.head&&(r.head.comment=null);r.mode=V;case V:if(512&r.flags){for(;d<16;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(h!==(65535&r.check)){e.msg="header crc mismatch",r.mode=he;break}h=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=X;break;case Y:for(;d<32;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}e.adler=r.check=n(h),h=0,d=0,r.mode=q;case q:if(0===r.havedict)return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=h,r.bits=d,k;e.adler=r.check=1,r.mode=X;case X:if(t===S||t===I)break e;case Z:if(r.last){h>>>=7&d,d-=7&d,r.mode=ce;break}for(;d<3;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}switch(r.last=1&h,h>>>=1,d-=1,3&h){case 0:r.mode=K;break;case 1:if(l(r),r.mode=re,t===I){h>>>=2,d-=2;break e}break;case 2:r.mode=J;break;case 3:e.msg="invalid block type",r.mode=he}h>>>=2,d-=2;break;case K:for(h>>>=7&d,d-=7&d;d<32;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if((65535&h)!==(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=he;break}if(r.length=65535&h,h=0,d=0,r.mode=Q,t===I)break e;case Q:r.mode=$;case $:if(_=r.length){if(_>u&&(_=u),_>c&&(_=c),0===_)break e;y.arraySet(o,i,a,_,s),u-=_,a+=_,c-=_,s+=_,r.length-=_;break}r.mode=X;break;case J:for(;d<14;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(r.nlen=(31&h)+257,h>>>=5,d-=5,r.ndist=(31&h)+1,h>>>=5,d-=5,r.ncode=(15&h)+4,h>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=he;break}r.have=0,r.mode=ee;case ee:for(;r.have<r.ncode;){for(;d<3;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}r.lens[Ie[r.have++]]=7&h,h>>>=3,d-=3}for(;r.have<19;)r.lens[Ie[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Te={bits:r.lenbits},xe=E(x,r.lens,0,19,r.lencode,0,r.work,Te),r.lenbits=Te.bits,xe){e.msg="invalid code lengths set",r.mode=he;break}r.have=0,r.mode=te;case te:for(;r.have<r.nlen+r.ndist;){for(;Ae=r.lencode[h&(1<<r.lenbits)-1],_e=Ae>>>24,ge=Ae>>>16&255,ye=65535&Ae,!(_e<=d);){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(ye<16)h>>>=_e,d-=_e,r.lens[r.have++]=ye;else{if(16===ye){for(Oe=_e+2;d<Oe;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(h>>>=_e,d-=_e,0===r.have){e.msg="invalid bit length repeat",r.mode=he;break}Ee=r.lens[r.have-1],_=3+(3&h),h>>>=2,d-=2}else if(17===ye){for(Oe=_e+3;d<Oe;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}h>>>=_e,d-=_e,Ee=0,_=3+(7&h),h>>>=3,d-=3}else{for(Oe=_e+7;d<Oe;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}h>>>=_e,d-=_e,Ee=0,_=11+(127&h),h>>>=7,d-=7}if(r.have+_>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=he;break}for(;_--;)r.lens[r.have++]=Ee}}if(r.mode===he)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=he;break}if(r.lenbits=9,Te={bits:r.lenbits},xe=E(T,r.lens,0,r.nlen,r.lencode,0,r.work,Te),r.lenbits=Te.bits,xe){e.msg="invalid literal/lengths set",r.mode=he;break}if(r.distbits=6,r.distcode=r.distdyn,Te={bits:r.distbits},xe=E(O,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Te),r.distbits=Te.bits,xe){e.msg="invalid distances set",r.mode=he;break}if(r.mode=re,t===I)break e;case re:r.mode=ne;case ne:if(u>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=h,r.bits=d,w(e,v),s=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,i=e.input,u=e.avail_in,h=r.hold,d=r.bits,r.mode===X&&(r.back=-1);break}for(r.back=0;Ae=r.lencode[h&(1<<r.lenbits)-1],_e=Ae>>>24,ge=Ae>>>16&255,ye=65535&Ae,!(_e<=d);){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(ge&&0===(240&ge)){for(be=_e,me=ge,we=ye;Ae=r.lencode[we+((h&(1<<be+me)-1)>>be)],_e=Ae>>>24,ge=Ae>>>16&255,ye=65535&Ae,!(be+_e<=d);){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}h>>>=be,d-=be,r.back+=be}if(h>>>=_e,d-=_e,r.back+=_e,r.length=ye,0===ge){r.mode=ue;break}if(32&ge){r.back=-1,r.mode=X;break}if(64&ge){e.msg="invalid literal/length code",r.mode=he;break}r.extra=15&ge,r.mode=ie;case ie:if(r.extra){for(Oe=r.extra;d<Oe;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=oe;case oe:for(;Ae=r.distcode[h&(1<<r.distbits)-1],_e=Ae>>>24,ge=Ae>>>16&255,ye=65535&Ae,!(_e<=d);){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(0===(240&ge)){for(be=_e,me=ge,we=ye;Ae=r.distcode[we+((h&(1<<be+me)-1)>>be)],_e=Ae>>>24,ge=Ae>>>16&255,ye=65535&Ae,!(be+_e<=d);){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}h>>>=be,d-=be,r.back+=be}if(h>>>=_e,d-=_e,r.back+=_e,64&ge){e.msg="invalid distance code",r.mode=he;break}r.offset=ye,r.extra=15&ge,r.mode=ae;case ae:if(r.extra){for(Oe=r.extra;d<Oe;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=he;break}r.mode=se;case se:if(0===c)break e;if(_=v-c,r.offset>_){if(_=r.offset-_,_>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=he;break}_>r.wnext?(_-=r.wnext,g=r.wsize-_):g=r.wnext-_,_>r.length&&(_=r.length),ve=r.window}else ve=o,g=s-r.offset,_=r.length;_>c&&(_=c),c-=_,r.length-=_;do o[s++]=ve[g++];while(--_);0===r.length&&(r.mode=ne);break;case ue:if(0===c)break e;o[s++]=r.length,c--,r.mode=ne;break;case ce:if(r.wrap){for(;d<32;){if(0===u)break e;u--,h|=i[a++]<<d,d+=8}if(v-=c,e.total_out+=v,r.total+=v,v&&(e.adler=r.check=r.flags?m(r.check,o,v,s-v):b(r.check,o,v,s-v)),v=c,(r.flags?h:n(h))!==r.check){e.msg="incorrect data check",r.mode=he;break}h=0,d=0}r.mode=le;case le:if(r.wrap&&r.flags){for(;d<32;){if(0===u)break e;u--,h+=i[a++]<<d,d+=8}if(h!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=he;break}h=0,d=0}r.mode=fe;case fe:xe=M;break e;case he:xe=j;break e;case de:return N;case pe:default:return P}return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=h,r.bits=d,(r.wsize||v!==e.avail_out&&r.mode<he&&(r.mode<ce||t!==A))&&f(e,e.output,e.next_out,v-e.avail_out)?(r.mode=de,N):(p-=e.avail_in,v-=e.avail_out,e.total_in+=p,e.total_out+=v,r.total+=v,r.wrap&&v&&(e.adler=r.check=r.flags?m(r.check,o,v,e.next_out-v):b(r.check,o,v,e.next_out-v)),e.data_type=r.bits+(r.last?64:0)+(r.mode===X?128:0)+(r.mode===re||r.mode===Q?256:0),(0===p&&0===v||t===A)&&xe===R&&(xe=F),xe)}function d(e){if(!e||!e.state)return P;var t=e.state;return t.window&&(t.window=null),e.state=null,R}function p(e,t){var r;return e&&e.state?(r=e.state,0===(2&r.wrap)?P:(r.head=t,t.done=!1,R)):P}function v(e,t){var r,n,i,o=t.length;return e&&e.state?(r=e.state,0!==r.wrap&&r.mode!==q?P:r.mode===q&&(n=1,n=b(n,t,o,0),n!==r.check)?j:(i=f(e,t,o,o))?(r.mode=de,N):(r.havedict=1,R)):P}var _,g,y=e("../utils/common"),b=e("./adler32"),m=e("./crc32"),w=e("./inffast"),E=e("./inftrees"),x=0,T=1,O=2,A=4,S=5,I=6,R=0,M=1,k=2,P=-2,j=-3,N=-4,F=-5,L=8,C=1,D=2,U=3,B=4,G=5,z=6,H=7,W=8,V=9,Y=10,q=11,X=12,Z=13,K=14,Q=15,$=16,J=17,ee=18,te=19,re=20,ne=21,ie=22,oe=23,ae=24,se=25,ue=26,ce=27,le=28,fe=29,he=30,de=31,pe=32,ve=852,_e=592,ge=15,ye=ge,be=!0;r.inflateReset=a,r.inflateReset2=s,r.inflateResetKeep=o,r.inflateInit=c,r.inflateInit2=u,r.inflate=h,r.inflateEnd=d,r.inflateGetHeader=p,r.inflateSetDictionary=v,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":494,"./adler32":495,"./crc32":497,"./inffast":499,"./inftrees":501}],501:[function(e,t,r){"use strict";var n=e("../utils/common"),i=15,o=852,a=592,s=0,u=1,c=2,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,p,v,_,g,y){var b,m,w,E,x,T,O,A,S,I=y.bits,R=0,M=0,k=0,P=0,j=0,N=0,F=0,L=0,C=0,D=0,U=null,B=0,G=new n.Buf16(i+1),z=new n.Buf16(i+1),H=null,W=0;for(R=0;R<=i;R++)G[R]=0;for(M=0;M<p;M++)G[t[r+M]]++;for(j=I,P=i;P>=1&&0===G[P];P--);if(j>P&&(j=P),0===P)return v[_++]=20971520,v[_++]=20971520,y.bits=1,0;for(k=1;k<P&&0===G[k];k++);for(j<k&&(j=k),L=1,R=1;R<=i;R++)if(L<<=1,L-=G[R],L<0)return-1;if(L>0&&(e===s||1!==P))return-1;for(z[1]=0,R=1;R<i;R++)z[R+1]=z[R]+G[R];for(M=0;M<p;M++)0!==t[r+M]&&(g[z[t[r+M]]++]=M);if(e===s?(U=H=g,T=19):e===u?(U=l,B-=257,H=f,W-=257,T=256):(U=h,H=d,T=-1),D=0,M=0,R=k,x=_,N=j,F=0,w=-1,C=1<<j,E=C-1,e===u&&C>o||e===c&&C>a)return 1;for(var V=0;;){V++,O=R-F,g[M]<T?(A=0,S=g[M]):g[M]>T?(A=H[W+g[M]],S=U[B+g[M]]):(A=96,S=0),b=1<<R-F,m=1<<N,k=m;do m-=b,v[x+(D>>F)+m]=O<<24|A<<16|S|0;while(0!==m);for(b=1<<R-1;D&b;)b>>=1;if(0!==b?(D&=b-1,D+=b):D=0,M++,0===--G[R]){if(R===P)break;R=t[r+g[M]]}if(R>j&&(D&E)!==w){for(0===F&&(F=j),x+=k,N=R-F,L=1<<N;N+F<P&&(L-=G[N+F],!(L<=0));)N++,L<<=1;if(C+=1<<N,e===u&&C>o||e===c&&C>a)return 1;w=D&E,v[w]=j<<24|N<<16|x-_|0}}return 0!==D&&(v[x+D]=R-F<<24|64<<16|0),y.bits=j,0}},{"../utils/common":494}],502:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],503:[function(e,t,r){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?ue[e]:ue[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,r){e.bi_valid>Z-r?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>Z-e.bi_valid,e.bi_valid+=r-Z):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function c(e,t,r){u(e,r[2*t],r[2*t+1])}function l(e,t){var r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1}function f(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function h(e,t){var r,n,i,o,a,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,v=0;for(o=0;o<=X;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<q;r++)n=e.heap[r],o=u[2*u[2*n+1]+1]+1,o>p&&(o=p,v++),u[2*n+1]=o,n>c||(e.bl_count[o]++,a=0,n>=d&&(a=h[n-d]),s=u[2*n],e.opt_len+=s*(o+a),f&&(e.static_len+=s*(l[2*n+1]+a)));if(0!==v){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,v-=2}while(v>0);for(o=p;0!==o;o--)for(n=e.bl_count[o];0!==n;)i=e.heap[--r],i>c||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}function d(e,t,r){var n,i,o=new Array(X+1),a=0;for(n=1;n<=X;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=l(o[s]++,s))}}function p(){var e,t,r,n,o,a=new Array(X+1);for(r=0,n=0;n<z-1;n++)for(le[n]=r,e=0;e<1<<te[n];e++)ce[r++]=n;for(ce[r-1]=n,o=0,n=0;n<16;n++)for(fe[n]=o,e=0;e<1<<re[n];e++)ue[o++]=n;for(o>>=7;n<V;n++)for(fe[n]=o<<7,e=0;e<1<<re[n]-7;e++)ue[256+o++]=n;for(t=0;t<=X;t++)a[t]=0;for(e=0;e<=143;)ae[2*e+1]=8,e++,a[8]++;for(;e<=255;)ae[2*e+1]=9,e++,a[9]++;for(;e<=279;)ae[2*e+1]=7,e++,a[7]++;for(;e<=287;)ae[2*e+1]=8,e++,a[8]++;for(d(ae,W+1,a),e=0;e<V;e++)se[2*e+1]=5,se[2*e]=l(e,5);he=new i(ae,te,H+1,W,X),de=new i(se,re,0,V,X),pe=new i(new Array(0),ne,0,Y,K)}function v(e){var t;for(t=0;t<W;t++)e.dyn_ltree[2*t]=0;for(t=0;t<V;t++)e.dyn_dtree[2*t]=0;for(t=0;t<Y;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Q]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function g(e,t,r,n){_(e),n&&(s(e,r),s(e,~r)),P.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function y(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function b(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function m(e,t,r){var n,i,o,s,l=0;if(0!==e.last_lit)do n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===n?c(e,i,t):(o=ce[i],c(e,o+H+1,t),s=te[o],0!==s&&(i-=le[o],u(e,i,s)),n--,o=a(n),c(e,o,r),s=re[o],0!==s&&(n-=fe[o],u(e,n,s)));while(l<e.last_lit);c(e,Q,t)}function w(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=q,r=0;r<u;r++)0!==o[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=c<2?++c:0,o[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)b(e,o,r);i=u;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,b(e,o,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],h(e,t),d(o,c,e.bl_count)}function E(e,t,r){var n,i,o=-1,a=t[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=t[2*(n+1)+1],++s<u&&i===a||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*$]++):s<=10?e.bl_tree[2*J]++:e.bl_tree[2*ee]++,s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function x(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,f=4;for(0===a&&(l=138,f=3),n=0;n<=r;n++)if(i=a,a=t[2*(n+1)+1],!(++s<l&&i===a)){if(s<f){do c(e,i,e.bl_tree);while(0!==--s)}else 0!==i?(i!==o&&(c(e,i,e.bl_tree),s--),c(e,$,e.bl_tree),u(e,s-3,2)):s<=10?(c(e,J,e.bl_tree),u(e,s-3,3)):(c(e,ee,e.bl_tree),u(e,s-11,7));s=0,o=i,0===a?(l=138,f=3):i===a?(l=6,f=3):(l=7,f=4)}}function T(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=Y-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function O(e,t,r,n){var i;for(u(e,t-257,5),u(e,r-1,5),u(e,n-4,4),i=0;i<n;i++)u(e,e.bl_tree[2*ie[i]+1],3);x(e,e.dyn_ltree,t-1),x(e,e.dyn_dtree,r-1)}function A(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return N;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return F;for(t=32;t<H;t++)if(0!==e.dyn_ltree[2*t])return F;return N}function S(e){ve||(p(),ve=!0),e.l_desc=new o(e.dyn_ltree,he),e.d_desc=new o(e.dyn_dtree,de),e.bl_desc=new o(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,v(e)}function I(e,t,r,n){u(e,(C<<1)+(n?1:0),3),g(e,t,r,!0)}function R(e){u(e,D<<1,3),c(e,Q,ae),f(e)}function M(e,t,r,n){var i,o,a=0;e.level>0?(e.strm.data_type===L&&(e.strm.data_type=A(e)),w(e,e.l_desc),w(e,e.d_desc),a=T(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?I(e,t,r,n):e.strategy===j||o===i?(u(e,(D<<1)+(n?1:0),3),m(e,ae,se)):(u(e,(U<<1)+(n?1:0),3),O(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),m(e,e.dyn_ltree,e.dyn_dtree)),v(e),n&&_(e)}function k(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(ce[r]+H+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1}var P=e("../utils/common"),j=4,N=0,F=1,L=2,C=0,D=1,U=2,B=3,G=258,z=29,H=256,W=H+1+z,V=30,Y=19,q=2*W+1,X=15,Z=16,K=7,Q=256,$=16,J=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],re=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=512,ae=new Array(2*(W+2));n(ae);var se=new Array(2*V);n(se);var ue=new Array(oe);n(ue);var ce=new Array(G-B+1);n(ce);var le=new Array(z);n(le);var fe=new Array(V);n(fe);var he,de,pe,ve=!1;r._tr_init=S,r._tr_stored_block=I,r._tr_flush_block=M,r._tr_tally=k,r._tr_align=R},{"../utils/common":494}],504:[function(e,t,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n},{}],505:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(r=a+"/"+r,i="/"===a.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),o="/"===a(e,-1);return e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:528}],506:[function(e,t,r){(function(t){"use strict";function n(e,t){function r(){if(i===e.length)throw new Error("Ran out of data");var r=e[i];i++;var o,a,s,u,c,l,f,h;switch(t){default:throw new Error("unrecognised depth");case 16:f=e[i],i++,n.push((r<<8)+f);break;case 4:f=15&r,h=r>>4,n.push(h,f);break;case 2:c=3&r,l=r>>2&3,f=r>>4&3,h=r>>6&3,n.push(h,f,l,c);break;case 1:o=1&r,a=r>>1&1,s=r>>2&1,u=r>>3&1,c=r>>4&1,l=r>>5&1,f=r>>6&1,h=r>>7&1,n.push(h,f,l,c,u,s,a,o)}}var n=[],i=0;return{get:function(e){for(;n.length<e;)r();var t=n.slice(0,e);return n=n.slice(e),t},resetAfterLine:function(){n.length=0},end:function(){if(i!==e.length)throw new Error("extra data found")}}}function i(e,t,r,n,i,o){for(var a=e.width,u=e.height,c=e.index,l=0;l<u;l++)for(var f=0;f<a;f++){for(var h=r(f,l,c),d=0;d<4;d++){var p=s[n][d];if(d===i.length)throw new Error("Ran out of data");t[h+d]=255!==p?i[p+o]:255}o+=n}return o}function o(e,t,r,n,i,o){for(var a=e.width,u=e.height,c=e.index,l=0;l<u;l++){for(var f=0;f<a;f++)for(var h=i.get(n),d=r(f,l,c),p=0;p<4;p++){var v=s[n][p];t[d+p]=255!==v?h[v]:o}i.resetAfterLine()}}var a=e("./interlace"),s={1:{0:0,1:0,2:0,3:255},2:{0:0,1:0,2:0,3:1},3:{0:0,1:1,2:2,3:255},4:{0:0,1:1,2:2,3:3}};r.dataToBitMap=function(e,r){var s=r.width,u=r.height,c=r.depth,l=r.bpp,f=r.interlace;if(8!==c)var h=n(e,c);var d;d=c<=8?new t(s*u*4):new Uint16Array(s*u*4);var p,v,_=Math.pow(2,c)-1,g=0;if(f)p=a.getImagePasses(s,u),v=a.getInterlaceIterator(s,u);else{var y=0;v=function(){var e=y;return y+=4,e},p=[{width:s,height:u}]}for(var b=0;b<p.length;b++)8===c?g=i(p[b],d,v,l,e,g):o(p[b],d,v,l,h,_);if(8===c){if(g!==e.length)throw new Error("extra data found")}else h.end();return d}}).call(this,e("buffer").Buffer)},{"./interlace":516,buffer:11}],507:[function(e,t,r){(function(r){"use strict";var n=e("./constants");t.exports=function(e,t,i,o){var a=o.colorType===n.COLORTYPE_COLOR_ALPHA;if(o.inputHasAlpha&&a)return e;if(!o.inputHasAlpha&&!a)return e;var s=a?4:3,u=new r(t*i*s),c=o.inputHasAlpha?4:3,l=0,f=0,h=o.bgColor||{};void 0===h.red&&(h.red=255),void 0===h.green&&(h.green=255),void 0===h.blue&&(h.blue=255);for(var d=0;d<i;d++)for(var p=0;p<t;p++){var v,_=e[l],g=e[l+1],y=e[l+2];o.inputHasAlpha?(v=e[l+3],a||(v/=255,_=Math.min(Math.max(Math.round((1-v)*h.red+v*_),0),255),g=Math.min(Math.max(Math.round((1-v)*h.green+v*g),0),255),y=Math.min(Math.max(Math.round((1-v)*h.blue+v*y),0),255))):v=255,u[f]=_,u[f+1]=g,u[f+2]=y,a&&(u[f+3]=v),l+=c,f+=s}return u}}).call(this,e("buffer").Buffer)},{"./constants":509,buffer:11}],508:[function(e,t,r){(function(r,n){"use strict";var i=e("util"),o=e("stream"),a=t.exports=function(){o.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(a,o),a.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),r.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},a.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;var r;return r=n.isBuffer(e)?e:new n(e,t||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused},a.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},a.prototype.destroySoon=a.prototype.end,a.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("There are some read requests waitng on finished stream")),this.destroy()},a.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},a.prototype._processReadAllowingLess=function(e){this._reads.shift();var t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},a.prototype._processRead=function(e){this._reads.shift();for(var t=0,r=0,i=new n(e.length);t<e.length;){var o=this._buffers[r++],a=Math.min(o.length,e.length-t);o.copy(i,t,0,a),t+=a,a!==o.length&&(this._buffers[--r]=o.slice(a))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,i)},a.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else{if(!(this._buffered>=e.length))break;this._processRead(e)}}this._buffers&&this._buffers.length>0&&null===this._buffers[0]&&this._end()}catch(e){this.emit("error",e)}}}).call(this,e("_process"),e("buffer").Buffer)},{_process:528,buffer:11,stream:542,util:549}],509:[function(e,t,r){"use strict";t.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],510:[function(e,t,r){"use strict";var n=[];!function(){for(var e=0;e<256;e++){for(var t=e,r=0;r<8;r++)1&t?t=3988292384^t>>>1:t>>>=1;n[e]=t}}();var i=t.exports=function(){this._crc=-1};i.prototype.write=function(e){for(var t=0;t<e.length;t++)this._crc=n[255&(this._crc^e[t])]^this._crc>>>8;return!0},i.prototype.crc32=function(){return this._crc^-1},i.crc32=function(e){for(var t=-1,r=0;r<e.length;r++)t=n[255&(t^e[r])]^t>>>8;return t^-1}},{}],511:[function(e,t,r){(function(r){"use strict";function n(e,t,r,n,i){e.copy(n,i,t,t+r)}function i(e,t,r){for(var n=0,i=t+r,o=t;o<i;o++)n+=Math.abs(e[o]);return n}function o(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=a>=o?e[t+a-o]:0,u=e[t+a]-s;n[i+a]=u}}function a(e,t,r,n){for(var i=0,o=0;o<r;o++){var a=o>=n?e[t+o-n]:0,s=e[t+o]-a;i+=Math.abs(s)}return i}function s(e,t,r,n,i){for(var o=0;o<r;o++){var a=t>0?e[t+o-r]:0,s=e[t+o]-a;n[i+o]=s}}function u(e,t,r){for(var n=0,i=t+r,o=t;o<i;o++){var a=t>0?e[o-r]:0,s=e[o]-a;n+=Math.abs(s)}return n}function c(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=a>=o?e[t+a-o]:0,u=t>0?e[t+a-r]:0,c=e[t+a]-(s+u>>1);n[i+a]=c}}function l(e,t,r,n){for(var i=0,o=0;o<r;o++){var a=o>=n?e[t+o-n]:0,s=t>0?e[t+o-r]:0,u=e[t+o]-(a+s>>1);i+=Math.abs(u)}return i}function f(e,t,r,n,i,o){for(var a=0;a<r;a++){var s=a>=o?e[t+a-o]:0,u=t>0?e[t+a-r]:0,c=t>0&&a>=o?e[t+a-(r+o)]:0,l=e[t+a]-d(s,u,c);n[i+a]=l}}function h(e,t,r,n){for(var i=0,o=0;o<r;o++){var a=o>=n?e[t+o-n]:0,s=t>0?e[t+o-r]:0,u=t>0&&o>=n?e[t+o-(r+n)]:0,c=e[t+o]-d(a,s,u);i+=Math.abs(c)}return i}var d=e("./paeth-predictor"),p={0:n,1:o,2:s,3:c,4:f},v={0:i,1:a,2:u,3:l,4:h};t.exports=function(e,t,n,i,o){var a;if("filterType"in i&&i.filterType!==-1){if("number"!=typeof i.filterType)throw new Error("unrecognised filter types");a=[i.filterType]}else a=[0,1,2,3,4];for(var s=t*o,u=0,c=0,l=new r((s+1)*n),f=a[0],h=0;h<n;h++){if(a.length>1)for(var d=1/0,_=0;_<a.length;_++){var g=v[a[_]](e,c,s,o);g<d&&(f=a[_],d=g)}l[u]=f,u++,p[f](e,c,s,l,u,o),u+=s,c+=s}return l}}).call(this,e("buffer").Buffer)},{"./paeth-predictor":520,buffer:11}],512:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("./chunkstream"),o=e("./filter-parse"),a=t.exports=function(e){i.call(this);var t=[],n=this;this._filter=new o(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){n.emit("complete",r.concat(t))}}),this._filter.start()};n.inherits(a,i)}).call(this,e("buffer").Buffer)},{"./chunkstream":508,"./filter-parse":514,buffer:11,util:549}],513:[function(e,t,r){(function(t){"use strict";var n=e("./sync-reader"),i=e("./filter-parse");r.process=function(e,r){var o=[],a=new n(e),s=new i(r,{read:a.read.bind(a),write:function(e){o.push(e)},complete:function(){}});return s.start(),a.process(),t.concat(o)}}).call(this,e("buffer").Buffer)},{"./filter-parse":514,"./sync-reader":526,buffer:11}],514:[function(e,t,r){(function(r){"use strict";function n(e,t,r){var n=e*t;return 8!==r&&(n=Math.ceil(n/(8/r))),n}var i=e("./interlace"),o=e("./paeth-predictor"),a=t.exports=function(e,t){var r=e.width,o=e.height,a=e.interlace,s=e.bpp,u=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],a)for(var c=i.getImagePasses(r,o),l=0;l<c.length;l++)this._images.push({byteWidth:n(c[l].width,s,u),height:c[l].height,lineIndex:0});else this._images.push({byteWidth:n(r,s,u),height:o,lineIndex:0});8===u?this._xComparison=s:16===u?this._xComparison=2*s:this._xComparison=1};a.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},a.prototype._unFilterType1=function(e,t,r){for(var n=this._xComparison,i=n-1,o=0;o<r;o++){var a=e[1+o],s=o>i?t[o-n]:0;t[o]=a+s}},a.prototype._unFilterType2=function(e,t,r){for(var n=this._lastLine,i=0;i<r;i++){var o=e[1+i],a=n?n[i]:0;t[i]=o+a}},a.prototype._unFilterType3=function(e,t,r){for(var n=this._xComparison,i=n-1,o=this._lastLine,a=0;a<r;a++){var s=e[1+a],u=o?o[a]:0,c=a>i?t[a-n]:0,l=Math.floor((c+u)/2);t[a]=s+l}},a.prototype._unFilterType4=function(e,t,r){for(var n=this._xComparison,i=n-1,a=this._lastLine,s=0;s<r;s++){var u=e[1+s],c=a?a[s]:0,l=s>i?t[s-n]:0,f=s>i&&a?a[s-n]:0,h=o(l,c,f);t[s]=u+h}},a.prototype._reverseFilterLine=function(e){var t,n=e[0],i=this._images[this._imageIndex],o=i.byteWidth;if(0===n)t=e.slice(1,o+1);else switch(t=new r(o),n){case 1:this._unFilterType1(e,t,o);break;case 2:this._unFilterType2(e,t,o);break;case 3:this._unFilterType3(e,t,o);break;case 4:this._unFilterType4(e,t,o);break;default:throw new Error("Unrecognised filter type - "+n)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this,e("buffer").Buffer)},{"./interlace":516,"./paeth-predictor":520,buffer:11}],515:[function(e,t,r){(function(e){"use strict";function r(e,t,r,n,i){for(var o=0,a=0;a<n;a++)for(var s=0;s<r;s++){var u=i[e[o]];if(!u)throw new Error("index "+e[o]+" not in palette");for(var c=0;c<4;c++)t[o+c]=u[c];o+=4}}function n(e,t,r,n,i){for(var o=0,a=0;a<n;a++)for(var s=0;s<r;s++){var u=!1;if(1===i.length?i[0]===e[o]&&(u=!0):i[0]===e[o]&&i[1]===e[o+1]&&i[2]===e[o+2]&&(u=!0),u)for(var c=0;c<4;c++)t[o+c]=0;o+=4}}function i(e,t,r,n,i){for(var o=255,a=Math.pow(2,i)-1,s=0,u=0;u<n;u++)for(var c=0;c<r;c++){for(var l=0;l<4;l++)t[s+l]=Math.floor(e[s+l]*o/a+.5);s+=4}}t.exports=function(t,o){var a=o.depth,s=o.width,u=o.height,c=o.colorType,l=o.transColor,f=o.palette,h=t;return 3===c?r(t,h,s,u,f):(l&&n(t,h,s,u,l),8!==a&&(16===a&&(h=new e(s*u*4)),i(t,h,s,u,a))),h}}).call(this,e("buffer").Buffer)},{buffer:11}],516:[function(e,t,r){"use strict";var n=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];r.getImagePasses=function(e,t){for(var r=[],i=e%8,o=t%8,a=(e-i)/8,s=(t-o)/8,u=0;u<n.length;u++){for(var c=n[u],l=a*c.x.length,f=s*c.y.length,h=0;h<c.x.length&&c.x[h]<i;h++)l++;for(h=0;h<c.y.length&&c.y[h]<o;h++)f++;l>0&&f>0&&r.push({width:l,height:f,index:u})}return r},r.getInterlaceIterator=function(e){return function(t,r,i){var o=t%n[i].x.length,a=(t-o)/n[i].x.length*8+n[i].x[o],s=r%n[i].y.length,u=(r-s)/n[i].y.length*8+n[i].y[s];return 4*a+u*e*4}}},{}],517:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("stream"),o=e("./constants"),a=e("./packer"),s=t.exports=function(e){i.call(this);var t=e||{};this._packer=new a(t),this._deflate=this._packer.createDeflate(),this.readable=!0};n.inherits(s,i),s.prototype.pack=function(e,t,n,i){this.emit("data",new r(o.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),i&&this.emit("data",this._packer.packGAMA(i));var a=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(e){this.emit("data",this._packer.packIDAT(e))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(a)}}).call(this,e("buffer").Buffer)},{"./constants":509,"./packer":519,buffer:11,stream:542,util:549}],518:[function(e,t,r){(function(r){"use strict";var n=!0,i=e("zlib");i.deflateSync||(n=!1);var o=e("./constants"),a=e("./packer");t.exports=function(e,t){if(!n)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var s=t||{},u=new a(s),c=[];c.push(new r(o.PNG_SIGNATURE)),c.push(u.packIHDR(e.width,e.height)),e.gamma&&c.push(u.packGAMA(e.gamma));var l=u.filterData(e.data,e.width,e.height),f=i.deflateSync(l,u.getDeflateOptions());if(l=null,!f||!f.length)throw new Error("bad png - invalid compressed data response");return c.push(u.packIDAT(f)),c.push(u.packIEND()),r.concat(c)}}).call(this,e("buffer").Buffer)},{"./constants":509,"./packer":519,buffer:11,zlib:8}],519:[function(e,t,r){(function(r){"use strict";var n=e("./constants"),i=e("./crc"),o=e("./bitpacker"),a=e("./filter-pack"),s=e("zlib"),u=t.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,
e.deflateFactory=e.deflateFactory||s.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:n.COLORTYPE_COLOR_ALPHA,e.colorType!==n.COLORTYPE_COLOR&&e.colorType!==n.COLORTYPE_COLOR_ALPHA)throw new Error("option color type:"+e.colorType+" is not supported at present");if(8!==e.bitDepth)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};u.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},u.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},u.prototype.filterData=function(e,t,r){var i=o(e,t,r,this._options),s=n.COLORTYPE_TO_BPP_MAP[this._options.colorType],u=a(i,t,r,this._options,s);return u},u.prototype._packChunk=function(e,t){var n=t?t.length:0,o=new r(n+12);return o.writeUInt32BE(n,0),o.writeUInt32BE(e,4),t&&t.copy(o,8),o.writeInt32BE(i.crc32(o.slice(4,o.length-4)),o.length-4),o},u.prototype.packGAMA=function(e){var t=new r(4);return t.writeUInt32BE(Math.floor(e*n.GAMMA_DIVISION),0),this._packChunk(n.TYPE_gAMA,t)},u.prototype.packIHDR=function(e,t){var i=new r(13);return i.writeUInt32BE(e,0),i.writeUInt32BE(t,4),i[8]=this._options.bitDepth,i[9]=this._options.colorType,i[10]=0,i[11]=0,i[12]=0,this._packChunk(n.TYPE_IHDR,i)},u.prototype.packIDAT=function(e){return this._packChunk(n.TYPE_IDAT,e)},u.prototype.packIEND=function(){return this._packChunk(n.TYPE_IEND,null)}}).call(this,e("buffer").Buffer)},{"./bitpacker":507,"./constants":509,"./crc":510,"./filter-pack":511,buffer:11,zlib:8}],520:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),a=Math.abs(n-r);return i<=o&&i<=a?e:o<=a?t:r}},{}],521:[function(e,t,r){"use strict";var n=e("util"),i=e("zlib"),o=e("./chunkstream"),a=e("./filter-parse-async"),s=e("./parser"),u=e("./bitmapper"),c=e("./format-normaliser"),l=t.exports=function(e){o.call(this),this._parser=new s(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};n.inherits(l,o),l.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this.errord=!0},l.prototype._inflateData=function(e){this._inflate||(this._inflate=i.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter)),this._inflate.write(e)},l.prototype._handleMetaData=function(e){this.emit("metadata",e),this._bitmapInfo=Object.create(e),this._filter=new a(this._bitmapInfo)},l.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},l.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},l.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},l.prototype._complete=function(e){if(!this.errord){try{var t=u.dataToBitMap(e,this._bitmapInfo),r=c(t,this._bitmapInfo);t=null}catch(e){return void this._handleError(e)}this.emit("parsed",r)}}},{"./bitmapper":506,"./chunkstream":508,"./filter-parse-async":512,"./format-normaliser":515,"./parser":523,util:549,zlib:8}],522:[function(e,t,r){(function(r){"use strict";var n=!0,i=e("zlib");i.deflateSync||(n=!1);var o=e("./sync-reader"),a=e("./filter-parse-sync"),s=e("./parser"),u=e("./bitmapper"),c=e("./format-normaliser");t.exports=function(e,t){function l(e){_=e}function f(e){g=e}function h(e){g.transColor=e}function d(e){g.palette=e}function p(e){y=e}function v(e){b.push(e)}if(!n)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var _,g,y,b=[],m=new o(e),w=new s(t,{read:m.read.bind(m),error:l,metadata:f,gamma:p,palette:d,transColor:h,inflateData:v});if(w.start(),m.process(),_)throw _;var E=r.concat(b);b.length=0;var x=i.inflateSync(E);if(E=null,!x||!x.length)throw new Error("bad png - invalid inflate data response");var T=a.process(x,g);E=null;var O=u.dataToBitMap(T,g);T=null;var A=c(O,g);return g.data=A,g.gamma=y||0,g}}).call(this,e("buffer").Buffer)},{"./bitmapper":506,"./filter-parse-sync":513,"./format-normaliser":515,"./parser":523,"./sync-reader":526,buffer:11,zlib:8}],523:[function(e,t,r){(function(r){"use strict";var n=e("./constants"),i=e("./crc"),o=t.exports=function(e,t){this._options=e,e.checkCRC=e.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[n.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[n.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[n.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[n.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[n.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[n.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.inflateData=t.inflateData,this.finished=t.finished};o.prototype.start=function(){this.read(n.PNG_SIGNATURE.length,this._parseSignature.bind(this))},o.prototype._parseSignature=function(e){for(var t=n.PNG_SIGNATURE,r=0;r<t.length;r++)if(e[r]!==t[r])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},o.prototype._parseChunkBegin=function(e){for(var t=e.readUInt32BE(0),o=e.readUInt32BE(4),a="",s=4;s<8;s++)a+=String.fromCharCode(e[s]);var u=Boolean(32&e[4]);return this._hasIHDR||o===n.TYPE_IHDR?(this._crc=new i,this._crc.write(new r(a)),this._chunks[o]?this._chunks[o](t):u?void this.read(t+4,this._skipChunk.bind(this)):void this.error(new Error("Unsupported critical chunk type "+a))):void this.error(new Error("Expected IHDR on beggining"))},o.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},o.prototype._parseChunkEnd=function(e){var t=e.readInt32BE(0),r=this._crc.crc32();return this._options.checkCRC&&r!==t?void this.error(new Error("Crc error - "+t+" - "+r)):void(this._hasIEND||this.read(8,this._parseChunkBegin.bind(this)))},o.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},o.prototype._parseIHDR=function(e){this._crc.write(e);var t=e.readUInt32BE(0),r=e.readUInt32BE(4),i=e[8],o=e[9],a=e[10],s=e[11],u=e[12];if(8!==i&&4!==i&&2!==i&&1!==i&&16!==i)return void this.error(new Error("Unsupported bit depth "+i));if(!(o in n.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(0!==a)return void this.error(new Error("Unsupported compression method"));if(0!==s)return void this.error(new Error("Unsupported filter method"));if(0!==u&&1!==u)return void this.error(new Error("Unsupported interlace method"));this._colorType=o;var c=n.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:r,depth:i,interlace:Boolean(u),palette:Boolean(o&n.COLORTYPE_PALETTE),color:Boolean(o&n.COLORTYPE_COLOR),alpha:Boolean(o&n.COLORTYPE_ALPHA),bpp:c,colorType:o}),this._handleChunkEnd()},o.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},o.prototype._parsePLTE=function(e){this._crc.write(e);for(var t=Math.floor(e.length/3),r=0;r<t;r++)this._palette.push([e[3*r],e[3*r+1],e[3*r+2],255]);this.palette(this._palette),this._handleChunkEnd()},o.prototype._handleTRNS=function(e){this.read(e,this._parseTRNS.bind(this))},o.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===n.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(e.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(var t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===n.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===n.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},o.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},o.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/n.GAMMA_DIVISION),this._handleChunkEnd()},o.prototype._handleIDAT=function(e){this.read(-e,this._parseIDAT.bind(this,e))},o.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===n.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(t);var r=e-t.length;r>0?this._handleIDAT(r):this._handleChunkEnd()},o.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},o.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this,e("buffer").Buffer)},{"./constants":509,"./crc":510,buffer:11}],524:[function(e,t,r){"use strict";var n=e("./parser-sync"),i=e("./packer-sync");r.read=function(e,t){return n(e,t||{})},r.write=function(e){return i(e)}},{"./packer-sync":518,"./parser-sync":522}],525:[function(e,t,r){(function(t,n){"use strict";var i=e("util"),o=e("stream"),a=e("./parser-async"),s=e("./packer-async"),u=e("./png-sync"),c=r.PNG=function(e){o.call(this),e=e||{},this.width=e.width||0,this.height=e.height||0,this.data=this.width>0&&this.height>0?new n(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new a(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new s(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(c,o),c.sync=u,c.prototype.pack=function(){return this.data&&this.data.length?(t.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},c.prototype.parse=function(e,t){if(t){var r,n;r=function(e){this.removeListener("error",n),this.data=e,t(null,this)}.bind(this),n=function(e){this.removeListener("parsed",r),t(e,null)}.bind(this),this.once("parsed",r),this.once("error",n)}return this.end(e),this},c.prototype.write=function(e){return this._parser.write(e),!0},c.prototype.end=function(e){this._parser.end(e)},c.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},c.prototype._gamma=function(e){this.gamma=e},c.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},c.bitblt=function(e,t,r,n,i,o,a,s){if(r>e.width||n>e.height||r+i>e.width||n+o>e.height)throw new Error("bitblt reading outside image");if(a>t.width||s>t.height||a+i>t.width||s+o>t.height)throw new Error("bitblt writing outside image");for(var u=0;u<o;u++)e.data.copy(t.data,(s+u)*t.width+a<<2,(n+u)*e.width+r<<2,(n+u)*e.width+r+i<<2)},c.prototype.bitblt=function(e,t,r,n,i,o,a){return c.bitblt(this,e,t,r,n,i,o,a),this},c.adjustGamma=function(e){if(e.gamma){for(var t=0;t<e.height;t++)for(var r=0;r<e.width;r++)for(var n=e.width*t+r<<2,i=0;i<3;i++){var o=e.data[n+i]/255;o=Math.pow(o,1/2.2/e.gamma),e.data[n+i]=Math.round(255*o)}e.gamma=0}},c.prototype.adjustGamma=function(){c.adjustGamma(this)}}).call(this,e("_process"),e("buffer").Buffer)},{"./packer-async":517,"./parser-async":521,"./png-sync":524,_process:528,buffer:11,stream:542,util:549}],526:[function(e,t,r){"use strict";var n=t.exports=function(e){this._buffer=e,this._reads=[]};n.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},n.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var e=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=e.length||e.allowLess))break;this._reads.shift();var t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},{}],527:[function(e,t,r){(function(e){"use strict";function r(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:528}],528:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function s(){_&&p&&(_=!1,p.length?v=p.concat(v):g=-1,v.length&&u())}function u(){if(!_){var e=o(s);_=!0;for(var t=v.length;t;){for(p=v,v=[];++g<t;)p&&p[g].run();g=-1,t=v.length}p=null,_=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,h,d=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,v=[],_=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];v.push(new c(e,t)),1!==v.length||_||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],529:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":530}],530:[function(e,t,r){"use strict";function n(e){return this instanceof n?(c.call(this,e),l.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(e)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var s=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var c=e("./_stream_readable"),l=e("./_stream_writable");u.inherits(n,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var d=f[h];n.prototype[d]||(n.prototype[d]=l.prototype[d])}},{"./_stream_readable":532,"./_stream_writable":534,"core-util-is":314,inherits:397,"process-nextick-args":527}],531:[function(e,t,r){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":533,"core-util-is":314,inherits:397}],532:[function(e,t,r){(function(r){"use strict";function n(e,t,r){return"function"==typeof e.prependListener?e.prependListener(t,r):void(e._events&&e._events[t]?k(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r))}function i(t,r){R=R||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof R&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(U||(U=e("string_decoder/").StringDecoder),this.decoder=new U(t.encoding),this.encoding=t.encoding)}function o(t){return R=R||e("./_stream_duplex"),this instanceof o?(this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void P.call(this)):new o(t)}function a(e,t,r,n,i){var o=l(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,f(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var c;!t.decoder||i||n||(r=t.decoder.write(r),c=!t.objectMode&&0===r.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&h(e))),p(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=G?e=G:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function l(e,t){var r=null;return N.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(D("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?M(d,e):d(e))}function d(e){D("emit readable"),e.emit("readable"),m(e)}function p(e,t){t.readingMore||(t.readingMore=!0,M(v,e,t))}function v(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(D("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;D("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&j(e,"data")&&(t.flowing=!0,m(e))}}function g(e){D("readable nexttick read 0"),e.read(0)}function y(e,t){t.resumeScheduled||(t.resumeScheduled=!0,M(b,e,t))}function b(e,t){t.reading||(D("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}function m(e){var t=e._readableState;for(D("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=E(e,t.buffer,t.decoder),r}function E(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?x(e,t):T(e,t),n}function x(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(i+=a===o.length?o:o.slice(0,e),e-=a,0===e){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}function T(e,t){var r=F.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),e-=a,0===e){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,M(A,t,e))}function A(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function S(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function I(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=o;var R,M=e("process-nextick-args"),k=e("isarray");o.ReadableState=i;var P,j=(e("events").EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{P=e("stream")}catch(e){}finally{P||(P=e("events").EventEmitter)}}();var N=e("buffer").Buffer,F=e("buffer-shims"),L=e("core-util-is");L.inherits=e("inherits");var C=e("util"),D=void 0;D=C&&C.debuglog?C.debuglog("stream"):function(){};var U,B=e("./internal/streams/BufferList");L.inherits(o,P),o.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding,t!==r.encoding&&(e=F.from(e,t),t="")),a(this,r,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return a(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return U||(U=e("string_decoder/").StringDecoder),this._readableState.decoder=new U(t),this._readableState.encoding=t,this};var G=8388608;o.prototype.read=function(e){D("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return D("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):h(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&O(this),null;var n=t.needReadable;D("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,D("length less than watermark",n)),t.ended||t.reading?(n=!1,D("reading or ended",n)):n&&(D("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(r,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&O(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function i(e){D("onunpipe"),e===h&&a()}function o(){D("onend"),e.end()}function a(){D("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",a),h.removeListener("data",s),y=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){D("ondata"),b=!1;var r=e.write(t);!1!==r||b||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&I(d.pipes,e)!==-1)&&!y&&(D("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,b=!0),h.pause())}function u(t){D("onerror",t),f(),e.removeListener("error",u),0===j(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){D("onfinish"),e.removeListener("close",c),f()}function f(){D("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,D("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||t.end!==!1)&&e!==r.stdout&&e!==r.stderr,v=p?o:a;d.endEmitted?M(v):h.once("end",v),e.on("unpipe",i);var g=_(h);e.on("drain",g);var y=!1,b=!1;return h.on("data",s),n(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),d.flowing||(D("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=I(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=P.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this,n):M(g,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(D("resume"),e.flowing=!0,y(this,e)),this},o.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(D("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(D("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return S(o,function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){D("wrapped _read",t),r&&(r=!1,e.resume())},n},o._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":530,"./internal/streams/BufferList":535,_process:528,buffer:11,"buffer-shims":10,"core-util-is":314,events:370,inherits:397,isarray:400,"process-nextick-args":527,"string_decoder/":543,util:6}],533:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(t)})}function a(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":530,"core-util-is":314,inherits:397}],534:[function(e,t,r){(function(r){"use strict";function n(){}function i(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function o(t,r){x=x||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof x&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function a(t){return x=x||e("./_stream_duplex"),k.call(a,this)||this instanceof x?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void S.call(this)):new a(t)}function s(e,t){var r=new Error("write after end");e.emit("error",r),T(t,r)}function u(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):R.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),T(n,o),i=!1),i}function c(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=M.from(t,r)),t}function l(e,t,r,n,o){r=c(t,r,n),R.isBuffer(r)&&(n="buffer");var a=t.objectMode?1:r.length;t.length+=a;var s=t.length<t.highWaterMark;if(s||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(r,n,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else f(e,t,!1,a,r,n,o);return s}function f(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,r,n,i){--t.pendingcb,r?T(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(d(r),t)h(e,r,n,t,i);else{var o=y(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||g(e,r),n?O(v,e,r,o,i):v(e,r,o,i)}}function v(e,t,r,n){r||_(e,t),t.pendingcb--,n(),m(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function g(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;f(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new E(t)}else{for(;r;){var s=r.chunk,u=r.encoding,c=r.callback,l=t.objectMode?1:s.length;if(f(e,t,!1,l,s,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var r=y(t);return r&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),
r}function w(e,t,r){t.ending=!0,m(e,t),r&&(t.finished?T(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function E(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=a;var x,T=e("process-nextick-args"),O=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:T;a.WritableState=o;var A=e("core-util-is");A.inherits=e("inherits");var S,I={deprecate:e("util-deprecate")};!function(){try{S=e("stream")}catch(e){}finally{S||(S=e("events").EventEmitter)}}();var R=e("buffer").Buffer,M=e("buffer-shims");A.inherits(a,S),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var k;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(e){return!!k.call(this,e)||e&&e._writableState instanceof o}})):k=function(e){return e instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(e,t,r){var i=this._writableState,o=!1;return"function"==typeof t&&(r=t,t=null),R.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=n),i.ended?s(this,r):u(this,i,e,r)&&(i.pendingcb++,o=l(this,i,e,t,r)),o},a.prototype.cork=function(){var e=this._writableState;e.corked++},a.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||g(this,e))},a.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},a.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||w(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":530,_process:528,buffer:11,"buffer-shims":10,"core-util-is":314,events:370,inherits:397,"process-nextick-args":527,"util-deprecate":546}],535:[function(e,t,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var i=(e("buffer").Buffer,e("buffer-shims"));t.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},n.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},{buffer:11,"buffer-shims":10}],536:[function(e,t,r){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":531}],537:[function(e,t,r){(function(n){var i=function(){try{return e("stream")}catch(e){}}();r=t.exports=e("./lib/_stream_readable.js"),r.Stream=i||r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(t.exports=i)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":530,"./lib/_stream_passthrough.js":531,"./lib/_stream_readable.js":532,"./lib/_stream_transform.js":533,"./lib/_stream_writable.js":534,_process:528}],538:[function(e,t,r){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":533}],539:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":534}],540:[function(e,t,r){(function(e,r){!function(r){"use strict";function n(e,t,r,n){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),s=new d(n||[]);return a._invoke=l(e,r,s),a}function i(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function o(){}function a(){}function s(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(t){function r(e,n,o,a){var s=i(t[e],t,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(e){r("next",e,o,a)},function(e){r("throw",e,o,a)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},a)}a(s.arg)}function n(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return o=o?o.then(n,n):n()}"object"==typeof e&&e.domain&&(r=e.domain.bind(r));var o;this._invoke=n}function l(e,t,r){var n=T;return function(o,a){if(n===A)throw new Error("Generator is already running");if(n===S){if("throw"===o)throw a;return v()}for(;;){var s=r.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===_){r.delegate=null;var u=s.iterator.return;if(u){var c=i(u,s.iterator,a);if("throw"===c.type){o="throw",a=c.arg;continue}}if("return"===o)continue}var c=i(s.iterator[o],s.iterator,a);if("throw"===c.type){r.delegate=null,o="throw",a=c.arg;continue}o="next",a=_;var l=c.arg;if(!l.done)return n=O,l;r[s.resultName]=l.value,r.next=s.nextLoc,r.delegate=null}if("next"===o)r.sent=r._sent=a;else if("throw"===o){if(n===T)throw n=S,a;r.dispatchException(a)&&(o="next",a=_)}else"return"===o&&r.abrupt("return",a);n=A;var c=i(e,t,r);if("normal"===c.type){n=r.done?S:O;var l={value:c.arg,done:r.done};if(c.arg!==I)return l;r.delegate&&"next"===o&&(a=_)}else"throw"===c.type&&(n=S,o="throw",a=c.arg)}}}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[m];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=_,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:_,done:!0}}var _,g=Object.prototype,y=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},m=b.iterator||"@@iterator",w=b.toStringTag||"@@toStringTag",E="object"==typeof t,x=r.regeneratorRuntime;if(x)return void(E&&(t.exports=x));x=r.regeneratorRuntime=E?t.exports:{},x.wrap=n;var T="suspendedStart",O="suspendedYield",A="executing",S="completed",I={},R={};R[m]=function(){return this};var M=Object.getPrototypeOf,k=M&&M(M(p([])));k&&k!==g&&y.call(k,m)&&(R=k);var P=s.prototype=o.prototype=Object.create(R);a.prototype=P.constructor=s,s.constructor=a,s[w]=a.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(P),e},x.awrap=function(e){return{__await:e}},u(c.prototype),x.AsyncIterator=c,x.async=function(e,t,r,i){var o=new c(n(e,t,r,i));return x.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(P),P[w]="Generator",P.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},x.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=_)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),I},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),I}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},I}}}("object"==typeof r?r:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:528}],541:[function(e,t,r){(function(r){"use strict";function n(e,t,r){if(4===e.shape.length)return n(e.pick(r),t,0);if(3===e.shape.length)if(3===e.shape[2])l.assign(c(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),e),l.assigns(c(t,[e.shape[0]*e.shape[1]],[4],3),255);else if(4===e.shape[2])l.assign(c(t,[e.shape[0],e.shape[1],4],[4,4*e.shape[0],1]),e);else{if(1!==e.shape[2])return new Error("Incompatible array shape");l.assign(c(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),c(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),l.assigns(c(t,[e.shape[0]*e.shape[1]],[4],3),255)}else{if(2!==e.shape.length)return new Error("Incompatible array shape");l.assign(c(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),c(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),l.assigns(c(t,[e.shape[0]*e.shape[1]],[4],3),255)}return t}function i(e){var t=f();return t.emit("error",e),t}var o=e("contentstream"),a=e("gif-encoder"),s=e("jpeg-js"),u=e("pngjs-nozlib").PNG,c=e("ndarray"),l=e("ndarray-ops"),f=e("through");t.exports=function(e,t,c){switch(c=c||{},t.toUpperCase()){case"JPG":case".JPG":case"JPEG":case".JPEG":case"JPE":case".JPE":var l=e.shape[0],f=e.shape[1],h=new r(l*f*4);h=n(e,h);var d={data:h,width:l,height:f},p=s.encode(d,c.quality);return new o(p.data);case"GIF":case".GIF":var v=4===e.shape.length?e.shape[0]:1,l=4===e.shape.length?e.shape[1]:e.shape[0],f=4===e.shape.length?e.shape[2]:e.shape[1],h=new r(l*f*4),_=new a(l,f);_.writeHeader();for(var g=0;g<v;g++)h=n(e,h,g),_.addFrame(h);return _.finish(),_;case"PNG":case".PNG":var y=new u({width:e.shape[0],height:e.shape[1]}),h=n(e,y.data);return"Error"==typeof h?i(h):(y.data=h,y.pack());case"CANVAS":var b=document.createElement("canvas"),m=b.getContext("2d");b.width=e.shape[0],b.height=e.shape[1];var w=m.getImageData(0,0,b.width,b.height),h=w.data;return h=n(e,h),"Error"==typeof h?i(h):(m.putImageData(w,0,0),b);default:return i(new Error("Unsupported file type: "+t))}}}).call(this,e("buffer").Buffer)},{buffer:11,contentstream:12,"gif-encoder":374,"jpeg-js":401,ndarray:492,"ndarray-ops":489,"pngjs-nozlib":525,through:544}],542:[function(e,t,r){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter,o=e("inherits");o(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function a(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),e.on("error",s),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:370,inherits:397,"readable-stream/duplex.js":529,"readable-stream/passthrough.js":536,"readable-stream/readable.js":537,"readable-stream/transform.js":538,"readable-stream/writable.js":539}],543:[function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=e("buffer").Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:11}],544:[function(e,t,r){(function(n){function i(e,t,r){function i(){for(;c.length&&!f.paused;){var e=c.shift();if(null===e)return f.emit("end");f.emit("data",e)}}function a(){f.writable=!1,t.call(f),!f.readable&&f.autoDestroy&&f.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var s=!1,u=!1,c=[],l=!1,f=new o;return f.readable=f.writable=!0,f.paused=!1,f.autoDestroy=!(r&&r.autoDestroy===!1),f.write=function(t){return e.call(this,t),!f.paused},f.queue=f.push=function(e){return l?f:(null===e&&(l=!0),c.push(e),i(),f)},f.on("end",function(){f.readable=!1,!f.writable&&f.autoDestroy&&n.nextTick(function(){f.destroy()})}),f.end=function(e){if(!s)return s=!0,arguments.length&&f.write(e),a(),f},f.destroy=function(){if(!u)return u=!0,s=!0,c.length=0,f.writable=f.readable=!1,f.emit("close"),f},f.pause=function(){if(!f.paused)return f.paused=!0,f},f.resume=function(){return f.paused&&(f.paused=!1,f.emit("resume")),i(),f.paused||f.emit("drain"),f},f}var o=e("stream");r=t.exports=i,i.through=i}).call(this,e("_process"))},{_process:528,stream:542}],545:[function(e,t,r){"use strict";function n(e,t){for(var r=1,n=e.length,i=e[0],o=e[0],a=1;a<n;++a)if(o=i,i=e[a],t(i,o)){if(a===r){r++;continue}e[r++]=i}return e.length=r,e}function i(e){for(var t=1,r=e.length,n=e[0],i=e[0],o=1;o<r;++o,i=n)if(i=n,n=e[o],n!==i){if(o===t){t++;continue}e[t++]=n}return e.length=t,e}function o(e,t,r){return 0===e.length?e:t?(r||e.sort(t),n(e,t)):(r||e.sort(),i(e))}t.exports=o},{}],546:[function(e,t,r){(function(e){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],547:[function(e,t,r){arguments[4][397][0].apply(r,arguments)},{dup:397}],548:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],549:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return b(i)||(i=u(e,i,n)),i}var o=c(e,t);if(o)return o;var a=Object.keys(t),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),O(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(t);if(0===a.length){if(A(t)){var _=t.name?": "+t.name:"";return e.stylize("[Function"+_+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(T(t))return e.stylize(Date.prototype.toString.call(t),"date");if(O(t))return l(t)}var g="",y=!1,m=["{","}"];if(p(t)&&(y=!0,m=["[","]"]),A(t)){var w=t.name?": "+t.name:"";g=" [Function"+w+"]"}if(E(t)&&(g=" "+RegExp.prototype.toString.call(t)),T(t)&&(g=" "+Date.prototype.toUTCString.call(t)),O(t)&&(g=" "+l(t)),0===a.length&&(!y||0==t.length))return m[0]+g+m[1];if(n<0)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return x=y?f(e,t,n,v,a):a.map(function(r){return h(e,t,n,v,r,y)}),e.seen.pop(),d(x,g,m)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return y(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):_(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)k(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),k(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=_(r)?u(e,c.value,null):u(e,c.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function _(e){return null===e}function g(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function m(e){return"symbol"==typeof e}function w(e){return void 0===e}function E(e){return x(e)&&"[object RegExp]"===I(e)}function x(e){return"object"==typeof e&&null!==e}function T(e){return x(e)&&"[object Date]"===I(e)}function O(e){return x(e)&&("[object Error]"===I(e)||e instanceof Error)}function A(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function I(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),F[e.getMonth()],t].join(" ")}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P=/%[sdj%]/g;r.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(P,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])a+=_(s)||!x(s)?" "+s:" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var j,N={};r.debuglog=function(e){if(w(j)&&(j=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!N[e])if(new RegExp("\\b"+e+"\\b","i").test(j)){var n=t.pid;N[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else N[e]=function(){};return N[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=v,r.isNull=_,r.isNullOrUndefined=g,r.isNumber=y,r.isString=b,r.isSymbol=m,r.isUndefined=w,r.isRegExp=E,r.isObject=x,r.isDate=T,r.isError=O,r.isFunction=A,r.isPrimitive=S,r.isBuffer=e("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",M(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!x(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":548,_process:528,inherits:547}],550:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r,n,i){var o={};return Object.keys(n).forEach(function(e){o[e]=n[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.COORDINATE_SYSTEM=void 0;var a,s=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("gl-matrix"),l=e("autobind-decorator"),f=n(l),h=Math.PI,d=h/4,p=h/180,v=180/h,_=512,g=_/(2*h),y={latitude:37,longitude:-122,zoom:11,pitch:0,bearing:0,altitude:1.5},b=(r.COORDINATE_SYSTEM={LNGLAT:1,METERS:2,IDENTITY:0},a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.width,n=t.height,o=t.latitude,a=t.longitude,s=t.zoom,u=t.pitch,c=t.bearing,l=t.altitude,f=t.mercatorEnabled;i(this,e),this.width=void 0!==r?r:y.width,this.height=void 0!==n?n:y.height,this.zoom=void 0!==s?s:y.zoom,this.latitude=void 0!==o?o:y.latitude,this.longitude=void 0!==a?a:y.longitude,this.bearing=void 0!==c?c:y.bearing,this.pitch=void 0!==u?u:y.pitch,this.altitude=void 0!==l?l:y.altitude,this.mercatorEnabled=void 0===f||f,this.width=this.width||1,this.height=this.height||1,this._initialize()}return u(e,[{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,i=this.mercatorEnabled||this.mercator?this.projectFlat(e):e,o=s(i,2),a=o[0],u=o[1],l=[a,u,e[2]||0,1];c.vec4.transformMat4(l,l,this.pixelProjectionMatrix);var f=1/l[3];c.vec4.multiply(l,l,[f,f,f,f]);var h=l[0],d=l[1],p=l[2],v=n?this.height-d:d;return 2===e.length?[h,v]:[h,v,p]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r;return 3===e.length?this.unproject3d(e,{topLeft:n}):this.unproject2d(e,{topLeft:n})}},{key:"unproject3d",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,i=s(e,3),o=i[0],a=void 0===o?0:o,u=i[1],l=void 0===u?0:u,f=i[2],h=void 0===f?0:f,d=n?this.height-l:l,p=[a,d,h,1];c.vec4.transformMat4(p,p,this.pixelUnprojectionMatrix);var v=1/p[3];c.vec4.multiply(p,p,[v,v,v,v]);var _=this.unprojectFlat(p),g=s(_,2),y=g[0],b=g[1],m=p[2];return[y,b,m]}},{key:"unproject2d",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.topLeft,n=void 0===r||r,i=s(e,2),o=i[0],a=void 0===o?0:o,u=i[1],l=void 0===u?0:u,f=n?this.height-l:l,h=0,d=[a,f,0,1],p=[a,f,1,1];c.vec4.transformMat4(d,d,this.pixelUnprojectionMatrix),c.vec4.transformMat4(p,p,this.pixelUnprojectionMatrix);var v=[d[3],p[3]],_=v[0],g=v[1],y=d[0]/_,b=p[0]/g,m=d[1]/_,w=p[1]/g,E=d[2]/_,x=p[2]/g,T=E===x?0:(h-E)/(x-E),O=y*(1-T)+b*T,A=m*(1-T)+w*T;return this.unprojectFlat([O,A])}},{key:"projectFlat",value:function(e){var t=s(e,2),r=t[0],n=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;i*=g;var o=r*p,a=n*p,u=i*(o+h),c=i*(h-Math.log(Math.tan(d+.5*a)));return[u,c]}},{key:"unprojectFlat",value:function(e){var t=s(e,2),r=t[0],n=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;i*=g;var o=r/i-h,a=2*(Math.atan(Math.exp(h-n/i))-d);return[o*v,a*v]}},{key:"getProjections",value:function(){return{pixelProjectionMatrix:this.pixelProjectionMatrix,pixelUnprojectionMatrix:this.pixelUnprojectionMatrix,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix}}},{key:"getDistanceScales",value:function(){return{pixelsPerMeter:this.pixelsPerMeter,metersPerPixel:this.metersPerPixel}}},{key:"_initialize",value:function(){this.scale=Math.pow(2,this.zoom),this.worldSize=_*this.scale,this.tileZoom=Math.floor(this.zoom),this.zoomFraction=this.zoom-Math.floor(this.zoom),this.bearingRadians=this.bearing/180*Math.PI,this.bearingRotationMatrix=c.mat2.create(),c.mat2.rotate(this.bearingRotationMatrix,this.bearingRotationMatrix,this.bearing),this.originalPitch=this.pitch,this.pitch=Math.min(60,this.pitch),this.pitchRadians=this.pitch/180*Math.PI,this.originalAltitude=this.altitude,this.altitude=Math.max(.75,this.altitude),this.center=this.projectFlat([this.longitude,this.latitude]),this.centerX=this.center[0],this.centerY=this.center[1],this.halfFov=Math.atan(.5/this.altitude),this.topHalfSurfaceDistance=Math.sin(this.halfFov)*this.altitude/Math.sin(Math.PI/2-this.pitchRadians-this.halfFov),this.farZ=Math.cos(Math.PI/2-this.pitchRadians)*this.topHalfSurfaceDistance+this.altitude,this._calculateDistanceScales(),this._calculateTransformationMatrices()}},{key:"_calculateDistanceScales",value:function(){var e=111e3,t=this.latitude,r=this.longitude,n=Math.cos(t*Math.PI/180),i=e*n,o=c.vec2.distance(this.projectFlat([r+.5,t]),this.projectFlat([r-.5,t])),a=c.vec2.distance(this.projectFlat([r,t+.5]),this.projectFlat([r,t-.5])),s=o/i,u=a/i,l=(s+u)/2,f=this.worldSize/(4e7*n),h=[f,f,f],d=[1/s,1/u,1/l];this.pixelsPerMeter=h,this.metersPerPixel=d}},{key:"_calculateTransformationMatrices",value:function(){this.projectionMatrix=c.mat4.perspective(this._createMat4(),2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,10*this.farZ);var e=this._createMat4();c.mat4.translate(e,e,[0,0,-this.altitude]),c.mat4.scale(e,e,[1,-1,1/this.height]),c.mat4.rotateX(e,e,this.pitchRadians),c.mat4.rotateZ(e,e,-this.bearingRadians),this.viewMatrix=this._createMat4(),c.mat4.translate(this.viewMatrix,e,[-this.centerX,-this.centerY,0]);var t=this._createMat4();c.mat4.multiply(t,t,this.projectionMatrix),c.mat4.multiply(t,t,this.viewMatrix),this.viewProjectionMatrix=t;var r=this._createMat4();c.mat4.scale(r,r,[this.width,this.height,1]),c.mat4.translate(r,r,[.5,.5,0]),c.mat4.scale(r,r,[.5,.5,1]),c.mat4.multiply(r,r,this.viewProjectionMatrix),this.pixelProjectionMatrix=r;var n=this._createMat4();c.mat4.invert(n,r),this.pixelUnprojectionMatrix=n}},{key:"_calculatePixelProjectionMatrices",value:function(){var e=this._createMat4();c.mat4.scale(e,e,[this.width,this.height,1]),c.mat4.translate(e,e,[.5,.5,0]),c.mat4.scale(e,e,[.5,.5,0]),c.mat4.multiply(e,e,this.viewProjectionMatrix),this.pixelProjectionMatrix=e;
var t=this._createMat4();c.mat4.invert(t,e),this.pixelUnprojectionMatrix=t}},{key:"_createMat4",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}]),e}(),o(a.prototype,"project",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"project"),a.prototype),o(a.prototype,"unproject",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unproject"),a.prototype),o(a.prototype,"unproject3d",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unproject3d"),a.prototype),o(a.prototype,"unproject2d",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unproject2d"),a.prototype),o(a.prototype,"projectFlat",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"projectFlat"),a.prototype),o(a.prototype,"unprojectFlat",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unprojectFlat"),a.prototype),o(a.prototype,"getProjections",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"getProjections"),a.prototype),o(a.prototype,"getDistanceScales",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"getDistanceScales"),a.prototype),a);r.default=b},{"autobind-decorator":3,"gl-matrix":385}],551:[function(e,t,r){t.exports=e("./dist/perspective-viewport")},{"./dist/perspective-viewport":550}],552:[function(e,t,r){(function(e){WebGLDebugUtils=function(){function t(e){if(null==p){p={},v={};for(var t in e)"number"==typeof e[t]&&(p[e[t]]=t,v[t]=e[t])}}function r(){if(null==p)throw"WebGLDebugUtils.init(ctx) not called"}function n(e){return r(),void 0!==p[e]}function i(e){r();var t=p[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function o(e,t,r,n){var o=d[e];if(void 0!==o){var o=o[t];if(void 0!==o&&o[r]){if("object"==typeof o[r]&&void 0!==o[r].enumBitwiseOr){for(var a=o[r].enumBitwiseOr,s=0,u=[],c=0;c<a.length;++c){var l=v[a[c]];0!==(n&l)&&(s|=l,u.push(i(l)))}return s===n?u.join(" | "):i(n)}return i(n)}}return null===n?"null":void 0===n?"undefined":n.toString()}function a(e,t){for(var r="",n=t.length,i=0;i<n;++i)r+=(0==i?"":", ")+o(e,n,i,t[i]);return r}function s(e,t,r){e.__defineGetter__(r,function(){return t[r]}),e.__defineSetter__(r,function(e){t[r]=e})}function u(e,r,n,a){function c(e,t){return function(){n&&n(t,arguments);var i=e[t].apply(e,arguments),o=a.getError();return 0!=o&&(l[o]=!0,r(o,t,arguments)),i}}a=a||e,t(e),r=r||function(e,t,r){for(var n="",a=r.length,s=0;s<a;++s)n+=(0==s?"":", ")+o(t,a,s,r[s]);h("WebGL error "+i(e)+" in "+t+"("+n+")")};var l={},f={};for(var d in e)if("function"==typeof e[d])if("getExtension"!=d)f[d]=c(e,d);else{var p=c(e,d);f[d]=function(){var t=p.apply(e,arguments);return u(t,r,n,a)}}else s(f,e,d);return f.getError=function(){for(var t in l)if(l.hasOwnProperty(t)&&l[t])return l[t]=!1,t;return e.NO_ERROR},f}function c(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r);for(var n=0;n<t;++n)e.disableVertexAttribArray(n),e.vertexAttribPointer(n,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(n,0);e.deleteBuffer(r);for(var i=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),n=0;n<i;++n)e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function l(e){function t(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}function r(e){var t=e.addEventListener;e.addEventListener=function(r,n,i){switch(r){case"webglcontextlost":x(n);break;case"webglcontextrestored":T(n);break;default:t.apply(e,arguments)}}}function n(){for(var e=Object.keys(E),t=0;t<e.length;++t)delete E[e]}function i(){++b,_||y==b&&e.loseContext()}function o(e,t){var r=e[t];return function(){if(i(),!_){var t=r.apply(e,arguments);return t}}}function a(){for(var e=0;e<g.length;++e){var t=g[e];t instanceof WebGLBuffer?f.deleteBuffer(t):t instanceof WebGLFramebuffer?f.deleteFramebuffer(t):t instanceof WebGLProgram?f.deleteProgram(t):t instanceof WebGLRenderbuffer?f.deleteRenderbuffer(t):t instanceof WebGLShader?f.deleteShader(t):t instanceof WebGLTexture&&f.deleteTexture(t)}}function u(e){return{statusMessage:e,preventDefault:function(){m=!0}}}function l(e){for(var t in e)"function"==typeof e[t]?h[t]=o(e,t):s(h,e,t);h.getError=function(){if(i(),!_)for(var e;e=f.getError();)E[e]=!0;for(var e in E)if(E[e])return delete E[e],e;return h.NO_ERROR};for(var r=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],n=0;n<r.length;++n){var a=r[n];h[a]=function(t){return function(){if(i(),_)return null;var r=t.apply(e,arguments);return r.__webglDebugContextLostId__=v,g.push(r),r}}(e[a])}for(var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],n=0;n<u.length;++n){var a=u[n];h[a]=function(t){return function(){return i(),_?null:t.apply(e,arguments)}}(h[a])}for(var c=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],n=0;n<c.length;++n){var a=c[n];h[a]=function(t){return function(){return i(),!_&&t.apply(e,arguments)}}(h[a])}return h.checkFramebufferStatus=function(t){return function(){return i(),_?h.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(h.checkFramebufferStatus),h.getAttribLocation=function(t){return function(){return i(),_?-1:t.apply(e,arguments)}}(h.getAttribLocation),h.getVertexAttribOffset=function(t){return function(){return i(),_?0:t.apply(e,arguments)}}(h.getVertexAttribOffset),h.isContextLost=function(){return _},h}var f,h,d=[],p=[],h={},v=1,_=!1,g=[],y=0,b=0,m=!1,w=0,E={};e.getContext=function(t){return function(){var r=t.apply(e,arguments);if(r instanceof WebGLRenderingContext){if(r!=f){if(f)throw"got different context";f=r,h=l(f)}return h}return r}}(e.getContext);var x=function(e){d.push(t(e))},T=function(e){p.push(t(e))};return r(e),e.loseContext=function(){if(!_){for(_=!0,y=0,++v;f.getError(););n(),E[f.CONTEXT_LOST_WEBGL]=!0;var t=u("context lost"),r=d.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](t);w>=0&&setTimeout(function(){e.restoreContext()},w)},0)}},e.restoreContext=function(){_&&p.length&&setTimeout(function(){if(!m)throw"can not restore. webglcontestlost listener did not call event.preventDefault";a(),c(f),_=!1,b=0,m=!1;for(var e=p.slice(),t=u("context restored"),r=0;r<e.length;++r)e[r](t)},0)},e.loseContextInNCalls=function(e){if(_)throw"You can not ask a lost contet to be lost";y=b+e},e.getNumCalls=function(){return b},e.setRestoreTimeout=function(e){w=e},e}"undefined"==typeof window&&(window=e);var f=function(e){window.console&&window.console.log&&window.console.log(e)},h=function(e){window.console&&window.console.error?window.console.error(e):f(e)},d={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},p=null,v=null;return{init:t,mightBeEnum:n,glEnumToString:i,glFunctionArgToString:o,glFunctionArgsToString:a,makeDebugContext:u,makeLostContextSimulatingCanvas:l,resetToInitialState:c}}(),t.exports=WebGLDebugUtils}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);